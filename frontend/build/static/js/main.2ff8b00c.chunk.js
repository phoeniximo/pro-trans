(this["webpackJsonppro-trans-frontend"]=this["webpackJsonppro-trans-frontend"]||[]).push([[0],{114:function(e,t,a){e.exports=a(171)},169:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),l=a(94),n=a.n(l),m=a(8),c=a(81),o=a(4),i=a(7);const d=a(230).a.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});d.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),"/login"!==window.location.pathname&&(window.location.href="/login?session=expired")),Promise.reject(e)));var u=d;var p={register:async e=>{try{const t=await u.post("/auth/register",e);return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.data.user))),t.data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de l'inscription"}}},login:async e=>{try{const t=await u.post("/auth/login",e);return t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.data.user))),t.data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la connexion"}}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getCurrentUser:async()=>{try{return(await u.get("/auth/me")).data.data.user}catch(t){var e;throw(null===(e=t.response)||void 0===e?void 0:e.data)||{message:"Erreur lors de la r\xe9cup\xe9ration du profil"}}},forgotPassword:async e=>{try{return(await u.post("/auth/forgot-password",{email:e})).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la demande de r\xe9initialisation"}}},resetPassword:async(e,t)=>{try{return(await u.patch("/auth/reset-password/"+e,t)).data}catch(r){var a;throw(null===(a=r.response)||void 0===a?void 0:a.data)||{message:"Erreur lors de la r\xe9initialisation du mot de passe"}}},verifyEmail:async e=>{try{return(await u.get("/auth/verify-email/"+e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la v\xe9rification de l'email"}}},isTokenValid:()=>{const e=localStorage.getItem("token");if(!e)return!1;try{const t=1e3*JSON.parse(atob(e.split(".")[1])).exp;return Date.now()<t}catch(t){return console.error("Erreur lors de la v\xe9rification du token:",t),!1}}},v=a(95);const x=Object(r.createContext)(),g=e=>{let{children:t}=e;const[a,l]=Object(r.useState)(null),[n,m]=Object(r.useState)(!0),[c,o]=Object(r.useState)(null),[i,d]=Object(r.useState)(!1);Object(r.useEffect)(()=>{(async()=>{try{m(!0);const t=localStorage.getItem("token"),a=JSON.parse(localStorage.getItem("user")||"null");if(t)try{if(1e3*Object(v.a)(t).exp<Date.now())u(),o("Votre session a expir\xe9. Veuillez vous reconnecter.");else{const e=await p.getCurrentUser();l(e),d(!0)}}catch(e){u(),o("Session invalide. Veuillez vous reconnecter.")}else a&&u()}catch(t){console.error("Erreur d'initialisation de l'authentification:",t),u(),o("Erreur de connexion au serveur.")}finally{m(!1)}})()},[]);const u=()=>{p.logout(),l(null),d(!1)},g={user:a,loading:n,error:c,isAuthenticated:i,login:async e=>{m(!0),o(null);try{const t=await p.login(e);return l(t.data.user),d(!0),t}catch(t){throw o(t.message||"\xc9chec de la connexion"),t}finally{m(!1)}},register:async e=>{m(!0),o(null);try{const t=await p.register(e);return l(t.data.user),d(!0),t}catch(t){throw o(t.message||"\xc9chec de l'inscription"),t}finally{m(!1)}},logout:u,updateUserProfile:e=>{l(e),localStorage.setItem("user",JSON.stringify(e))}};return s.a.createElement(x.Provider,{value:g},t)},E=()=>{const e=Object(r.useContext)(x);if(!e)throw new Error("useAuth doit \xeatre utilis\xe9 \xe0 l'int\xe9rieur d'un AuthProvider");return e};var h=a(178),b=a(179),f=a(180),y=a(181),N=a(182);var w=e=>{let{variant:t="primary",size:a="md",fullWidth:r=!1,disabled:l=!1,isLoading:n=!1,type:c="button",to:o,href:i,onClick:d,children:u,className:p="",...v}=e;const x={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},g={primary:"bg-teal-600 text-white hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-opacity-50",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50",outline:"bg-transparent border border-teal-600 text-teal-600 hover:bg-teal-50 focus:ring-2 focus:ring-teal-500 focus:ring-opacity-50",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-opacity-50",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-opacity-50",text:"bg-transparent text-teal-600 hover:text-teal-800 hover:underline"},E=r?"w-full":"",h=n&&s.a.createElement("svg",{className:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},s.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),b=`\n    inline-flex items-center justify-center font-medium rounded-md focus:outline-none transition-colors\n    ${x[a]||x.md}\n    ${g[t]||g.primary}\n    ${l||n?"opacity-50 cursor-not-allowed":""}\n    ${E}\n    ${p}\n  `;return o?s.a.createElement(m.b,Object.assign({to:o,className:b},v),n&&h,u):i?s.a.createElement("a",Object.assign({href:i,className:b,target:"_blank",rel:"noopener noreferrer"},v),n&&h,u):s.a.createElement("button",Object.assign({type:c,className:b,disabled:l||n,onClick:d},v),n&&h,u)};var j=()=>s.a.createElement("div",{className:"bg-white"},s.a.createElement("div",{className:"relative bg-gradient-to-r from-teal-500 to-teal-700"},s.a.createElement("div",{className:"absolute inset-0 bg-black opacity-20"}),s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 relative"},s.a.createElement("div",{className:"text-center md:text-left md:max-w-2xl"},s.a.createElement("h1",{className:"text-4xl font-extrabold tracking-tight text-white sm:text-5xl md:text-6xl"},"Transport de marchandises facile et fiable"),s.a.createElement("p",{className:"mt-6 text-xl text-white"},"Trouvez des transporteurs professionnels pr\ufffds de chez vous. Economisez jusqu'\ufffd 40% sur vos frais de transport."),s.a.createElement("div",{className:"mt-10 flex flex-col sm:flex-row gap-4 justify-center md:justify-start"},s.a.createElement(w,{to:"/register",variant:"primary",size:"lg",className:"bg-white text-teal-600 hover:bg-gray-100"},"Publier une annonce"),s.a.createElement(w,{to:"/transporteurs",variant:"outline",size:"lg",className:"border-white text-white hover:bg-teal-600"},"Trouver un transporteur"))))),s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 relative z-10"},s.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6"},s.a.createElement("form",{className:"flex flex-col md:flex-row gap-4"},s.a.createElement("div",{className:"flex-1 relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"}))),s.a.createElement("input",{type:"text",placeholder:"Ville de d\ufffdpart",className:"pl-10 focus:ring-teal-500 focus:border-teal-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})),s.a.createElement("div",{className:"flex-1 relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"}))),s.a.createElement("input",{type:"text",placeholder:"Ville d'arriv\ufffde",className:"pl-10 focus:ring-teal-500 focus:border-teal-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})),s.a.createElement("div",{className:"flex-1 relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(h.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement("select",{className:"pl-10 focus:ring-teal-500 focus:border-teal-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},s.a.createElement("option",{value:""},"Type de transport"),s.a.createElement("option",{value:"colis"},"Colis"),s.a.createElement("option",{value:"meuble"},"Meuble"),s.a.createElement("option",{value:"marchandise"},"Marchandise"),s.a.createElement("option",{value:"palette"},"Palette"),s.a.createElement("option",{value:"demenagement"},"D\ufffdm\ufffdnagement"),s.a.createElement("option",{value:"vehicule"},"V\ufffdhicule"))),s.a.createElement("div",null,s.a.createElement(w,{type:"submit",variant:"primary",className:"w-full md:w-auto"},s.a.createElement(b.a,{className:"h-5 w-5 mr-2"}),"Rechercher"))))),s.a.createElement("div",{className:"py-16 bg-gray-50"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Comment \ufffda marche ?"),s.a.createElement("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto"},"Pro-Trans simplifie le transport de vos biens en vous connectant directement aux transporteurs.")),s.a.createElement("div",{className:"mt-16"},s.a.createElement("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3"},s.a.createElement("div",{className:"border border-gray-200 rounded-lg p-8 bg-white shadow-sm"},s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-teal-100 text-teal-600"},s.a.createElement("span",{className:"text-2xl font-bold"},"1")),s.a.createElement("h3",{className:"mt-6 text-xl font-medium text-gray-900"},"Publiez votre annonce"),s.a.createElement("p",{className:"mt-2 text-base text-gray-600"},"D\ufffdcrivez ce que vous souhaitez transporter, d'o\ufffd \ufffd o\ufffd, et quand."))),s.a.createElement("div",{className:"border border-gray-200 rounded-lg p-8 bg-white shadow-sm"},s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-teal-100 text-teal-600"},s.a.createElement("span",{className:"text-2xl font-bold"},"2")),s.a.createElement("h3",{className:"mt-6 text-xl font-medium text-gray-900"},"Recevez des devis"),s.a.createElement("p",{className:"mt-2 text-base text-gray-600"},"Les transporteurs vous envoient leurs propositions de prix et d\ufffdlais."))),s.a.createElement("div",{className:"border border-gray-200 rounded-lg p-8 bg-white shadow-sm"},s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-teal-100 text-teal-600"},s.a.createElement("span",{className:"text-2xl font-bold"},"3")),s.a.createElement("h3",{className:"mt-6 text-xl font-medium text-gray-900"},"Confirmez et suivez"),s.a.createElement("p",{className:"mt-2 text-base text-gray-600"},"Choisissez le transporteur qui vous convient et suivez votre livraison."))))))),s.a.createElement("div",{className:"py-16"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Pourquoi choisir Pro-Trans ?"),s.a.createElement("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto"},"Notre plateforme vous offre de nombreux avantages pour tous vos besoins de transport.")),s.a.createElement("div",{className:"mt-16"},s.a.createElement("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4"},s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-teal-500 text-white"},s.a.createElement(h.a,{className:"h-6 w-6","aria-hidden":"true"})),s.a.createElement("h3",{className:"mt-6 text-lg font-medium text-gray-900"},"R\ufffdseau de confiance"),s.a.createElement("p",{className:"mt-2 text-base text-gray-600"},"Transporteurs v\ufffdrifi\ufffds et \ufffdvalu\ufffds par notre communaut\ufffd.")),s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-teal-500 text-white"},s.a.createElement(f.a,{className:"h-6 w-6","aria-hidden":"true"})),s.a.createElement("h3",{className:"mt-6 text-lg font-medium text-gray-900"},"Rapidit\ufffd"),s.a.createElement("p",{className:"mt-2 text-base text-gray-600"},"Recevez des devis en quelques heures et organisez votre transport rapidement.")),s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-teal-500 text-white"},s.a.createElement(y.a,{className:"h-6 w-6","aria-hidden":"true"})),s.a.createElement("h3",{className:"mt-6 text-lg font-medium text-gray-900"},"Economies"),s.a.createElement("p",{className:"mt-2 text-base text-gray-600"},"Comparez les offres et \ufffdconomisez jusqu'\ufffd 40% sur vos frais de transport.")),s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-md bg-teal-500 text-white"},s.a.createElement(N.a,{className:"h-6 w-6","aria-hidden":"true"})),s.a.createElement("h3",{className:"mt-6 text-lg font-medium text-gray-900"},"S\ufffdcurit\ufffd"),s.a.createElement("p",{className:"mt-2 text-base text-gray-600"},"Paiement s\ufffdcuris\ufffd et assurance pour vos biens pendant le transport.")))))),s.a.createElement("div",{className:"py-16 bg-gray-50"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Tous types de transport"),s.a.createElement("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto"},"Que ce soit pour un petit colis ou un d\ufffdm\ufffdnagement complet, trouvez le transporteur adapt\ufffd \ufffd vos besoins.")),s.a.createElement("div",{className:"mt-16"},s.a.createElement("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},s.a.createElement("div",{className:"relative group"},s.a.createElement("div",{className:"aspect-w-3 aspect-h-2 rounded-lg overflow-hidden bg-gray-100"},s.a.createElement("img",{src:"/assets/images/transport-colis.jpg",alt:"Transport de colis",className:"object-center object-cover"}),s.a.createElement("div",{className:"flex items-end p-4 opacity-0 group-hover:opacity-100","aria-hidden":"true"},s.a.createElement("div",{className:"w-full bg-white bg-opacity-75 backdrop-filter backdrop-blur py-2 px-4 rounded-md text-sm font-medium text-gray-900 text-center"},"Voir les options"))),s.a.createElement("div",{className:"mt-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},s.a.createElement(m.b,{to:"/annonces?type=colis"},s.a.createElement("span",{className:"absolute inset-0"}),"Transport de colis")),s.a.createElement("p",{className:"text-base text-gray-600"},"Envoyez vos colis et petits objets partout en France."))),s.a.createElement("div",{className:"relative group"},s.a.createElement("div",{className:"aspect-w-3 aspect-h-2 rounded-lg overflow-hidden bg-gray-100"},s.a.createElement("img",{src:"/assets/images/transport-meuble.jpg",alt:"Transport de meubles",className:"object-center object-cover"}),s.a.createElement("div",{className:"flex items-end p-4 opacity-0 group-hover:opacity-100","aria-hidden":"true"},s.a.createElement("div",{className:"w-full bg-white bg-opacity-75 backdrop-filter backdrop-blur py-2 px-4 rounded-md text-sm font-medium text-gray-900 text-center"},"Voir les options"))),s.a.createElement("div",{className:"mt-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},s.a.createElement(m.b,{to:"/annonces?type=meuble"},s.a.createElement("span",{className:"absolute inset-0"}),"Transport de meubles")),s.a.createElement("p",{className:"text-base text-gray-600"},"Faites livrer vos meubles en toute s\ufffdcurit\ufffd."))),s.a.createElement("div",{className:"relative group"},s.a.createElement("div",{className:"aspect-w-3 aspect-h-2 rounded-lg overflow-hidden bg-gray-100"},s.a.createElement("img",{src:"/assets/images/demenagement.jpg",alt:"D\ufffdm\ufffdnagement",className:"object-center object-cover"}),s.a.createElement("div",{className:"flex items-end p-4 opacity-0 group-hover:opacity-100","aria-hidden":"true"},s.a.createElement("div",{className:"w-full bg-white bg-opacity-75 backdrop-filter backdrop-blur py-2 px-4 rounded-md text-sm font-medium text-gray-900 text-center"},"Voir les options"))),s.a.createElement("div",{className:"mt-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},s.a.createElement(m.b,{to:"/annonces?type=demenagement"},s.a.createElement("span",{className:"absolute inset-0"}),"D\ufffdm\ufffdnagement")),s.a.createElement("p",{className:"text-base text-gray-600"},"Solutions compl\ufffdtes pour votre d\ufffdm\ufffdnagement."))))),s.a.createElement("div",{className:"mt-12 text-center"},s.a.createElement(w,{to:"/annonces/create",variant:"primary",size:"lg"},"Publier votre annonce maintenant")))),s.a.createElement("div",{className:"py-16"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Ce que disent nos clients"),s.a.createElement("p",{className:"mt-4 text-lg text-gray-600 max-w-2xl mx-auto"},"D\ufffdcouvrez les exp\ufffdriences de ceux qui ont d\ufffdj\ufffd utilis\ufffd Pro-Trans pour leurs besoins de transport.")),s.a.createElement("div",{className:"mt-16"},s.a.createElement("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3"},s.a.createElement("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm"},s.a.createElement("div",{className:"flex items-center mb-4"},s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-gray-200 overflow-hidden"},s.a.createElement("img",{src:"/assets/images/testimonial-1.jpg",alt:"Sophie D.",className:"h-full w-full object-cover"})),s.a.createElement("div",{className:"ml-3"},s.a.createElement("h4",{className:"text-sm font-medium text-gray-900"},"Sophie D."),s.a.createElement("div",{className:"flex text-yellow-400"},s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"})))),s.a.createElement("p",{className:"text-gray-600 italic"},"\"J'ai trouv\ufffd un transporteur pour mon canap\ufffd en moins de 2 heures ! Le prix \ufffdtait bien inf\ufffdrieur \ufffd ce que m'avaient propos\ufffd les enseignes traditionnelles.\"")),s.a.createElement("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm"},s.a.createElement("div",{className:"flex items-center mb-4"},s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-gray-200 overflow-hidden"},s.a.createElement("img",{src:"/assets/images/testimonial-2.jpg",alt:"Marc L.",className:"h-full w-full object-cover"})),s.a.createElement("div",{className:"ml-3"},s.a.createElement("h4",{className:"text-sm font-medium text-gray-900"},"Marc L."),s.a.createElement("div",{className:"flex text-yellow-400"},s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4 text-gray-300"})))),s.a.createElement("p",{className:"text-gray-600 italic"},"\"En tant que transporteur, Pro-Trans m'a permis de trouver facilement des clients et d'optimiser mes trajets. Une excellente plateforme pour d\ufffdvelopper mon activit\ufffd.\"")),s.a.createElement("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm"},s.a.createElement("div",{className:"flex items-center mb-4"},s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-gray-200 overflow-hidden"},s.a.createElement("img",{src:"/assets/images/testimonial-3.jpg",alt:"Emilie F.",className:"h-full w-full object-cover"})),s.a.createElement("div",{className:"ml-3"},s.a.createElement("h4",{className:"text-sm font-medium text-gray-900"},"Emilie F."),s.a.createElement("div",{className:"flex text-yellow-400"},s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"}),s.a.createElement(StarIcon,{className:"h-4 w-4"})))),s.a.createElement("p",{className:"text-gray-600 italic"},"\"Mon d\ufffdm\ufffdnagement s'est d\ufffdroul\ufffd parfaitement gr\ufffdce \ufffd Pro-Trans. J'ai pu suivre mon mobilier en temps r\ufffdel et le transporteur \ufffdtait tr\ufffds professionnel. Je recommande !\"")))))),s.a.createElement("div",{className:"bg-teal-700"},s.a.createElement("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between"},s.a.createElement("h2",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl"},s.a.createElement("span",{className:"block"},"Pr\ufffdt \ufffd simplifier vos transports ?"),s.a.createElement("span",{className:"block text-teal-300"},"Rejoignez Pro-Trans aujourd'hui.")),s.a.createElement("div",{className:"mt-8 flex lg:mt-0 lg:flex-shrink-0"},s.a.createElement("div",{className:"inline-flex rounded-md shadow"},s.a.createElement(w,{to:"/register",variant:"primary",size:"lg",className:"bg-white text-teal-600 hover:bg-gray-100"},"S'inscrire gratuitement")),s.a.createElement("div",{className:"ml-3 inline-flex rounded-md shadow"},s.a.createElement(w,{to:"/a-propos",variant:"outline",size:"lg",className:"border-white text-white hover:bg-teal-600"},"En savoir plus")))))),C=a(183),k=a(184),D=a(185);var S=()=>s.a.createElement("div",{className:"bg-white"},s.a.createElement("div",{className:"relative bg-teal-700 py-16 sm:py-24"},s.a.createElement("div",{className:"lg:mx-auto lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-2 lg:gap-24 lg:items-start"},s.a.createElement("div",{className:"relative sm:py-16 lg:py-0"},s.a.createElement("div",{className:"relative mx-auto max-w-md px-4 sm:max-w-3xl sm:px-6 lg:px-0 lg:max-w-none"},s.a.createElement("div",{className:"relative rounded-2xl shadow-xl overflow-hidden"},s.a.createElement("img",{className:"absolute inset-0 h-full w-full object-cover",src:"/assets/images/about-hero.jpg",alt:"Equipe Pro-Trans"}),s.a.createElement("div",{className:"absolute inset-0 bg-teal-500 mix-blend-multiply"}),s.a.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-teal-800 via-teal-700 opacity-40"}),s.a.createElement("div",{className:"relative px-8 py-72"},s.a.createElement("div",{className:"absolute bottom-8 left-8"},s.a.createElement("blockquote",{className:"mt-4"},s.a.createElement("div",{className:"relative text-lg font-medium text-white md:flex-grow"},s.a.createElement("p",{className:"relative"},"Notre mission : r\ufffdvolutionner le transport de marchandises en France")))))))),s.a.createElement("div",{className:"relative mx-auto max-w-md px-4 sm:max-w-3xl sm:px-6 lg:px-0"},s.a.createElement("div",{className:"pt-12 sm:pt-16 lg:pt-20"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-white tracking-tight sm:text-4xl"},"A propos de Pro-Trans"),s.a.createElement("div",{className:"mt-6 text-gray-200 space-y-6"},s.a.createElement("p",{className:"text-lg"},"Pro-Trans est n\ufffde en 2022 d'une id\ufffde simple : simplifier et rendre plus accessible le transport de marchandises pour les particuliers et les professionnels."),s.a.createElement("p",{className:"text-lg"},"Notre plateforme met en relation les personnes ayant besoin de transporter des biens avec des transporteurs professionnels ou ind\ufffdpendants, offrant ainsi une solution pratique, \ufffdconomique et respectueuse de l'environnement."),s.a.createElement("p",{className:"text-lg"},"Gr\ufffdce \ufffd notre syst\ufffdme de mise en relation directe, nos utilisateurs \ufffdconomisent en moyenne 40% sur leurs frais de transport, tandis que les transporteurs optimisent leurs trajets et augmentent leur rentabilit\ufffd.")))))),s.a.createElement("div",{className:"bg-white py-16 sm:py-24"},s.a.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Nos valeurs"),s.a.createElement("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto"},"Des principes qui guident chacune de nos actions et d\ufffdcisions.")),s.a.createElement("div",{className:"mt-16"},s.a.createElement("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3"},s.a.createElement("div",{className:"pt-6"},s.a.createElement("div",{className:"flow-root bg-gray-50 rounded-lg px-6 pb-8"},s.a.createElement("div",{className:"-mt-6"},s.a.createElement("div",null,s.a.createElement("span",{className:"inline-flex items-center justify-center p-3 bg-teal-500 rounded-md shadow-lg"},s.a.createElement(N.a,{className:"h-6 w-6 text-white","aria-hidden":"true"}))),s.a.createElement("h3",{className:"mt-8 text-lg font-medium text-gray-900 tracking-tight"},"Confiance et S\ufffdcurit\ufffd"),s.a.createElement("p",{className:"mt-5 text-base text-gray-500"},"Nous v\ufffdrifions rigoureusement l'identit\ufffd et les qualifications de tous nos transporteurs. Notre syst\ufffdme d'\ufffdvaluation et notre garantie de remboursement assurent votre tranquillit\ufffd d'esprit.")))),s.a.createElement("div",{className:"pt-6"},s.a.createElement("div",{className:"flow-root bg-gray-50 rounded-lg px-6 pb-8"},s.a.createElement("div",{className:"-mt-6"},s.a.createElement("div",null,s.a.createElement("span",{className:"inline-flex items-center justify-center p-3 bg-teal-500 rounded-md shadow-lg"},s.a.createElement(C.a,{className:"h-6 w-6 text-white","aria-hidden":"true"}))),s.a.createElement("h3",{className:"mt-8 text-lg font-medium text-gray-900 tracking-tight"},"Responsabilit\ufffd Environnementale"),s.a.createElement("p",{className:"mt-5 text-base text-gray-500"},"En optimisant les trajets et en r\ufffdduisant les d\ufffdplacements \ufffd vide, nous contribuons activement \ufffd la r\ufffdduction de l'empreinte carbone du secteur du transport.")))),s.a.createElement("div",{className:"pt-6"},s.a.createElement("div",{className:"flow-root bg-gray-50 rounded-lg px-6 pb-8"},s.a.createElement("div",{className:"-mt-6"},s.a.createElement("div",null,s.a.createElement("span",{className:"inline-flex items-center justify-center p-3 bg-teal-500 rounded-md shadow-lg"},s.a.createElement(k.a,{className:"h-6 w-6 text-white","aria-hidden":"true"}))),s.a.createElement("h3",{className:"mt-8 text-lg font-medium text-gray-900 tracking-tight"},"Communaut\ufffd et Partage"),s.a.createElement("p",{className:"mt-5 text-base text-gray-500"},"Nous valorisons l'esprit de communaut\ufffd et encourageons le partage d'exp\ufffdriences entre utilisateurs pour am\ufffdliorer constamment notre service.")))))))),s.a.createElement("div",{className:"bg-gray-50 py-16 sm:py-24"},s.a.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Notre \ufffdquipe"),s.a.createElement("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto"},"Des passionn\ufffds qui travaillent chaque jour pour am\ufffdliorer votre exp\ufffdrience.")),s.a.createElement("div",{className:"mt-16 grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3"},s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("div",{className:"text-center"},s.a.createElement("img",{className:"inline-block h-32 w-32 rounded-full object-cover",src:"/assets/images/team-1.jpg",alt:"Thomas Martin"}),s.a.createElement("h3",{className:"mt-6 text-lg font-medium text-gray-900"},"Thomas Martin"),s.a.createElement("p",{className:"text-sm text-gray-500"},"Co-fondateur & CEO"),s.a.createElement("p",{className:"mt-3 text-base text-gray-600"},"Ancien consultant en logistique, Thomas a cr\ufffd\ufffd Pro-Trans pour r\ufffdvolutionner le secteur du transport de marchandises.")))),s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("div",{className:"text-center"},s.a.createElement("img",{className:"inline-block h-32 w-32 rounded-full object-cover",src:"/assets/images/team-2.jpg",alt:"Sophie Dubois"}),s.a.createElement("h3",{className:"mt-6 text-lg font-medium text-gray-900"},"Sophie Dubois"),s.a.createElement("p",{className:"text-sm text-gray-500"},"Co-fondatrice & CTO"),s.a.createElement("p",{className:"mt-3 text-base text-gray-600"},"Ing\ufffdnieure en informatique, Sophie dirige le d\ufffdveloppement technique de la plateforme Pro-Trans.")))),s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("div",{className:"text-center"},s.a.createElement("img",{className:"inline-block h-32 w-32 rounded-full object-cover",src:"/assets/images/team-3.jpg",alt:"Antoine Lef\ufffdvre"}),s.a.createElement("h3",{className:"mt-6 text-lg font-medium text-gray-900"},"Antoine Lef\ufffdvre"),s.a.createElement("p",{className:"text-sm text-gray-500"},"Directeur des Op\ufffdrations"),s.a.createElement("p",{className:"mt-3 text-base text-gray-600"},"Avec 15 ans d'exp\ufffdrience dans le secteur du transport, Antoine s'assure du bon fonctionnement de notre r\ufffdseau."))))))),s.a.createElement("div",{className:"bg-teal-700 py-12 sm:py-16"},s.a.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"mx-auto max-w-4xl text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-white sm:text-4xl"},"Pro-Trans en chiffres")),s.a.createElement("div",{className:"mt-10 grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4"},s.a.createElement("div",{className:"text-center"},s.a.createElement("span",{className:"text-5xl font-extrabold text-white"},"5,000+"),s.a.createElement("p",{className:"mt-2 text-xl font-medium text-teal-100"},"Transporteurs actifs")),s.a.createElement("div",{className:"text-center"},s.a.createElement("span",{className:"text-5xl font-extrabold text-white"},"15,000+"),s.a.createElement("p",{className:"mt-2 text-xl font-medium text-teal-100"},"Clients satisfaits")),s.a.createElement("div",{className:"text-center"},s.a.createElement("span",{className:"text-5xl font-extrabold text-white"},"30,000+"),s.a.createElement("p",{className:"mt-2 text-xl font-medium text-teal-100"},"Livraisons r\ufffdussies")),s.a.createElement("div",{className:"text-center"},s.a.createElement("span",{className:"text-5xl font-extrabold text-white"},"40%"),s.a.createElement("p",{className:"mt-2 text-xl font-medium text-teal-100"},"Economie moyenne"))))),s.a.createElement("div",{className:"bg-white py-16 sm:py-24"},s.a.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Nos investisseurs"),s.a.createElement("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto"},"Ils nous font confiance et soutiennent notre vision.")),s.a.createElement("div",{className:"mt-16 grid grid-cols-2 gap-8 md:grid-cols-4"},s.a.createElement("div",{className:"flex justify-center items-center"},s.a.createElement("img",{className:"h-16 grayscale hover:grayscale-0 transition-all",src:"/assets/images/investor-1.svg",alt:"Investor 1"})),s.a.createElement("div",{className:"flex justify-center items-center"},s.a.createElement("img",{className:"h-16 grayscale hover:grayscale-0 transition-all",src:"/assets/images/investor-2.svg",alt:"Investor 2"})),s.a.createElement("div",{className:"flex justify-center items-center"},s.a.createElement("img",{className:"h-16 grayscale hover:grayscale-0 transition-all",src:"/assets/images/investor-3.svg",alt:"Investor 3"})),s.a.createElement("div",{className:"flex justify-center items-center"},s.a.createElement("img",{className:"h-16 grayscale hover:grayscale-0 transition-all",src:"/assets/images/investor-4.svg",alt:"Investor 4"}))))),s.a.createElement("div",{className:"bg-gray-50 py-16 sm:py-24"},s.a.createElement("div",{className:"relative sm:py-16"},s.a.createElement("div",{"aria-hidden":"true",className:"hidden sm:block"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 w-1/2 bg-teal-700 rounded-r-3xl"}),s.a.createElement("svg",{className:"absolute top-8 left-1/2 -ml-3",width:"404",height:"392",fill:"none",viewBox:"0 0 404 392"},s.a.createElement("defs",null,s.a.createElement("pattern",{id:"8228f071-bcee-4ec8-905a-2a059a2cc4fb",x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse"},s.a.createElement("rect",{x:"0",y:"0",width:"4",height:"4",className:"text-teal-200",fill:"currentColor"}))),s.a.createElement("rect",{width:"404",height:"392",fill:"url(#8228f071-bcee-4ec8-905a-2a059a2cc4fb)"}))),s.a.createElement("div",{className:"mx-auto max-w-md px-4 sm:max-w-3xl sm:px-6 lg:max-w-7xl lg:px-8"},s.a.createElement("div",{className:"relative rounded-2xl px-6 py-10 bg-teal-600 overflow-hidden shadow-xl sm:px-12 sm:py-20"},s.a.createElement("div",{"aria-hidden":"true",className:"absolute inset-0 -mt-72 sm:-mt-32 md:mt-0"},s.a.createElement("svg",{className:"absolute inset-0 h-full w-full",preserveAspectRatio:"xMidYMid slice",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 1463 360"},s.a.createElement("path",{className:"text-teal-500 text-opacity-40",fill:"currentColor",d:"M-82.673 72l1761.849 472.086-134.327 501.315-1761.85-472.086z"}),s.a.createElement("path",{className:"text-teal-700 text-opacity-40",fill:"currentColor",d:"M-217.088 544.086L1544.761 72l134.327 501.316-1761.849 472.086z"}))),s.a.createElement("div",{className:"relative"},s.a.createElement("div",{className:"sm:text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-white tracking-tight sm:text-4xl"},"Besoin d'en savoir plus ?"),s.a.createElement("p",{className:"mt-6 mx-auto max-w-2xl text-lg text-teal-100"},"Notre \ufffdquipe est \ufffd votre disposition pour r\ufffdpondre \ufffd toutes vos questions concernant Pro-Trans ou pour vous aider dans vos d\ufffdmarches.")),s.a.createElement("div",{className:"mt-12 sm:mx-auto sm:max-w-lg sm:flex"},s.a.createElement("div",{className:"mt-4 sm:mt-0 sm:ml-3 w-full"},s.a.createElement(w,{to:"/contact",variant:"primary",className:"w-full bg-white text-teal-600 hover:bg-gray-100",size:"lg"},"Contactez-nous")))))))),s.a.createElement("div",{className:"bg-white py-16 sm:py-24"},s.a.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Rejoignez l'aventure Pro-Trans"),s.a.createElement("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto"},"Que vous soyez client ou transporteur, devenez acteur de la r\ufffdvolution du transport.")),s.a.createElement("div",{className:"mt-16 grid grid-cols-1 gap-8 sm:grid-cols-2"},s.a.createElement("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6 text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-teal-100"},s.a.createElement(D.a,{className:"h-12 w-12 text-teal-600","aria-hidden":"true"})),s.a.createElement("h3",{className:"mt-6 text-2xl font-medium text-gray-900"},"Pour les clients"),s.a.createElement("p",{className:"mt-3 text-lg text-gray-600"},"Economisez jusqu'\ufffd 40% sur vos frais de transport et trouvez le transporteur id\ufffdal en quelques clics."),s.a.createElement("div",{className:"mt-8"},s.a.createElement(w,{to:"/register",variant:"primary",size:"lg"},"S'inscrire comme client")))),s.a.createElement("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6 text-center"},s.a.createElement("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-teal-100"},s.a.createElement(h.a,{className:"h-12 w-12 text-teal-600","aria-hidden":"true"})),s.a.createElement("h3",{className:"mt-6 text-2xl font-medium text-gray-900"},"Pour les transporteurs"),s.a.createElement("p",{className:"mt-3 text-lg text-gray-600"},"Optimisez vos trajets, trouvez de nouveaux clients et augmentez votre chiffre d'affaires."),s.a.createElement("div",{className:"mt-8"},s.a.createElement(w,{to:"/register?role=transporteur",variant:"primary",size:"lg"},"S'inscrire comme transporteur")))))))),A=a(186),O=a(187),L=a(188);var M=()=>{var e;const[t,a]=Object(r.useState)("general"),[l,n]=Object(r.useState)({}),[m,c]=Object(r.useState)(""),o=[{id:"general",name:"Informations g\ufffdn\ufffdrales"},{id:"client",name:"Pour les clients"},{id:"transporteur",name:"Pour les transporteurs"},{id:"payment",name:"Paiements et tarifs"},{id:"security",name:"S\ufffdcurit\ufffd et assurances"}],i={general:[{question:"Qu'est-ce que Pro-Trans ?",answer:"Pro-Trans est une plateforme de mise en relation entre particuliers et professionnels du transport. Nous permettons aux personnes ayant besoin de transporter des marchandises de trouver facilement des transporteurs fiables, et aux transporteurs d'optimiser leurs trajets et de trouver de nouveaux clients."},{question:"Comment fonctionne Pro-Trans ?",answer:"C'est simple ! Les clients publient des annonces d\ufffdtaillant ce qu'ils souhaitent transporter, d'o\ufffd \ufffd o\ufffd, et quand. Les transporteurs consultent ces annonces et envoient des devis. Le client choisit le transporteur qui lui convient le mieux, effectue le paiement via notre plateforme s\ufffdcuris\ufffde, et peut suivre sa livraison en temps r\ufffdel."},{question:"Qui peut utiliser Pro-Trans ?",answer:"Notre plateforme est ouverte \ufffd tous : particuliers souhaitant transporter des biens, professionnels ayant des besoins r\ufffdguliers ou ponctuels de transport, transporteurs ind\ufffdpendants ou soci\ufffdt\ufffds de transport. Tous les utilisateurs doivent s'inscrire et cr\ufffder un compte pour acc\ufffdder \ufffd nos services."},{question:"Quels types de transports peut-on effectuer sur Pro-Trans ?",answer:"Pro-Trans couvre une large gamme de besoins : transport de colis, de meubles, de marchandises diverses, de palettes, d\ufffdm\ufffdnagements, transport de v\ufffdhicules, et bien plus. Que vous ayez besoin de d\ufffdplacer un simple colis ou de r\ufffdaliser un d\ufffdm\ufffdnagement complet, vous trouverez des transporteurs adapt\ufffds \ufffd vos besoins."}],client:[{question:"Comment cr\ufffder une annonce de transport ?",answer:"Pour cr\ufffder une annonce, connectez-vous \ufffd votre compte, cliquez sur 'Publier une annonce' et remplissez le formulaire en d\ufffdtaillant ce que vous souhaitez transporter, l'adresse de d\ufffdpart et d'arriv\ufffde, la date souhait\ufffde et toute information pertinente. Vous pouvez \ufffdgalement ajouter des photos pour aider les transporteurs \ufffd \ufffdvaluer votre demande."},{question:"Comment choisir le meilleur transporteur ?",answer:"Lorsque vous recevez des devis, consultez le profil des transporteurs, leurs \ufffdvaluations et avis laiss\ufffds par d'autres clients. Comparez les prix, les d\ufffdlais propos\ufffds et les services inclus. N'h\ufffdsitez pas \ufffd poser des questions via notre messagerie int\ufffdgr\ufffde avant de faire votre choix."},{question:"Que faire si ma livraison est endommag\ufffde ou perdue ?",answer:"Si votre bien est endommag\ufffd ou perdu, signalez-le imm\ufffddiatement via la plateforme. Notre \ufffdquipe de m\ufffddiation interviendra pour trouver une solution. Tous les transports effectu\ufffds via Pro-Trans b\ufffdn\ufffdficient d'une assurance de base. Pour les objets de valeur, nous recommandons de souscrire \ufffd notre assurance premium."},{question:"Puis-je annuler mon annonce ou un devis accept\ufffd ?",answer:"Vous pouvez annuler votre annonce tant qu'aucun devis n'a \ufffdt\ufffd accept\ufffd. Si vous avez d\ufffdj\ufffd accept\ufffd un devis, une annulation peut entra\ufffdner des frais selon notre politique d'annulation, qui d\ufffdpend du d\ufffdlai restant avant la date de transport pr\ufffdvue."}],transporteur:[{question:"Comment devenir transporteur sur Pro-Trans ?",answer:"Pour devenir transporteur, inscrivez-vous en choisissant le profil 'Transporteur', compl\ufffdtez votre profil avec vos informations professionnelles, et t\ufffdl\ufffdchargez les documents requis (assurance, licence de transport si applicable). Notre \ufffdquipe v\ufffdrifiera vos informations et vous donnera acc\ufffds aux annonces disponibles."},{question:"Comment trouver des annonces adapt\ufffdes \ufffd mon v\ufffdhicule ?",answer:"Utilisez nos filtres de recherche pour trouver des annonces correspondant \ufffd votre v\ufffdhicule et \ufffd vos trajets habituels. Vous pouvez filtrer par lieu, date, type de transport, poids, volume, etc. Vous pouvez \ufffdgalement configurer des alertes pour \ufffdtre notifi\ufffd des nouvelles annonces correspondant \ufffd vos crit\ufffdres."},{question:"Comment sont calcul\ufffds les frais de service pour les transporteurs ?",answer:"Pro-Trans pr\ufffdl\ufffdve une commission sur chaque transport effectu\ufffd via notre plateforme. Cette commission est calcul\ufffde en pourcentage du montant total du devis accept\ufffd. Le pourcentage exact d\ufffdpend de votre statut (transporteur occasionnel ou professionnel) et de votre volume d'activit\ufffd sur la plateforme."},{question:"Quand et comment suis-je pay\ufffd pour mes transports ?",answer:"Le client effectue le paiement sur la plateforme au moment d'accepter votre devis. L'argent est conserv\ufffd en s\ufffdquestre et vous est vers\ufffd 24 heures apr\ufffds la confirmation de livraison par le client. Vous pouvez suivre vos revenus et demander des virements vers votre compte bancaire depuis votre espace transporteur."}],payment:[{question:"Quels moyens de paiement sont accept\ufffds ?",answer:"Pro-Trans accepte les cartes bancaires (Visa, Mastercard), les virements bancaires et PayPal. Tous les paiements sont s\ufffdcuris\ufffds et trait\ufffds par des prestataires de confiance conformes aux normes PCI DSS."},{question:"Comment fonctionne le syst\ufffdme de s\ufffdquestre ?",answer:"Lorsqu'un client accepte un devis, le paiement est imm\ufffddiatement d\ufffdbit\ufffd mais conserv\ufffd en s\ufffdquestre. L'argent n'est vers\ufffd au transporteur que 24 heures apr\ufffds la confirmation de livraison par le client, garantissant ainsi la s\ufffdcurit\ufffd des deux parties."},{question:"Quels sont les frais de service de Pro-Trans ?",answer:"Les frais de service varient selon le montant du transport et le statut de l'utilisateur. Pour les clients, ils repr\ufffdsentent g\ufffdn\ufffdralement entre 5% et 10% du montant du transport. Pour les transporteurs, ils varient entre 8% et 15%. Ces frais couvrent l'utilisation de la plateforme, le service client, le syst\ufffdme de paiement s\ufffdcuris\ufffd et l'assurance de base."},{question:"Comment obtenir une facture pour mes transactions ?",answer:"Toutes les factures sont automatiquement g\ufffdn\ufffdr\ufffdes et disponibles dans votre espace personnel. Vous pouvez les consulter, les t\ufffdl\ufffdcharger au format PDF ou les recevoir par email. Les factures sont conformes \ufffd la l\ufffdgislation fran\ufffdaise et incluent toutes les informations n\ufffdcessaires pour votre comptabilit\ufffd."}],security:[{question:"Comment Pro-Trans garantit-il la s\ufffdcurit\ufffd des transactions ?",answer:"Pro-Trans utilise un syst\ufffdme de paiement s\ufffdcuris\ufffd conforme aux normes PCI DSS. Le syst\ufffdme de s\ufffdquestre prot\ufffdge \ufffd la fois les clients et les transporteurs. Toutes les communications sont crypt\ufffdes et nous ne stockons jamais les donn\ufffdes sensibles de paiement sur nos serveurs."},{question:"Les transports sont-ils assur\ufffds ?",answer:"Oui, tous les transports effectu\ufffds via Pro-Trans b\ufffdn\ufffdficient d'une assurance de base couvrant jusqu'\ufffd 1000\ufffd de dommages. Pour les objets de plus grande valeur, nous proposons une assurance premium optionnelle avec diff\ufffdrents niveaux de couverture. Les transporteurs doivent \ufffdgalement disposer de leur propre assurance professionnelle."},{question:"Comment sont v\ufffdrifi\ufffds les transporteurs ?",answer:"Tous les transporteurs doivent compl\ufffdter un processus de v\ufffdrification qui inclut la validation de leur identit\ufffd, la v\ufffdrification de leurs documents professionnels (assurance, licence de transport si applicable) et la confirmation de leurs coordonn\ufffdes. Nous surveillons \ufffdgalement les \ufffdvaluations et pouvons suspendre les transporteurs ne respectant pas nos standards de qualit\ufffd."},{question:"Que faire en cas de litige avec un transporteur ou un client ?",answer:"En cas de litige, contactez notre service de m\ufffddiation via votre espace personnel ou par email \ufffd mediation@pro-trans.fr. Notre \ufffdquipe analysera la situation et interviendra pour trouver une solution \ufffdquitable. Si n\ufffdcessaire, nous pouvons geler les fonds en s\ufffdquestre le temps de r\ufffdsoudre le conflit."}]},d=e=>{n(t=>({...t,[e]:!t[e]}))},u={};return""!==m.trim()?Object.keys(i).forEach(e=>{const t=i[e].filter(e=>e.question.toLowerCase().includes(m.toLowerCase())||e.answer.toLowerCase().includes(m.toLowerCase()));t.length>0&&(u[e]=t)}):u[t]=i[t],s.a.createElement("div",{className:"bg-white"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h1",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Foire aux questions"),s.a.createElement("p",{className:"mt-4 text-xl text-gray-500 max-w-2xl mx-auto"},"Trouvez rapidement des r\ufffdponses \ufffd vos questions sur Pro-Trans")),s.a.createElement("div",{className:"max-w-xl mx-auto mt-8 mb-12"},s.a.createElement("div",{className:"relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(b.a,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})),s.a.createElement("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:"Rechercher une question...",value:m,onChange:e=>c(e.target.value)}))),s.a.createElement("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8"},!m&&s.a.createElement("div",{className:"hidden lg:block lg:col-span-3"},s.a.createElement("nav",{className:"sticky top-4 space-y-1"},o.map(e=>s.a.createElement("button",{key:e.id,onClick:()=>a(e.id),className:(t===e.id?"bg-teal-50 border-teal-500 text-teal-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:text-gray-900")+" group w-full flex items-center px-3 py-2 text-sm font-medium border-l-4"},e.name)))),!m&&s.a.createElement("div",{className:"lg:hidden mb-8"},s.a.createElement("label",{htmlFor:"category",className:"sr-only"},"Cat\ufffdgorie"),s.a.createElement("select",{id:"category",name:"category",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",value:t,onChange:e=>a(e.target.value)},o.map(e=>s.a.createElement("option",{key:e.id,value:e.id},e.name)))),s.a.createElement("div",{className:""+(m?"lg:col-span-12":"lg:col-span-9")},0===Object.keys(u).length?s.a.createElement("div",{className:"text-center py-12"},s.a.createElement(A.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("h3",{className:"mt-2 text-lg font-medium text-gray-900"},"Aucun r\ufffdsultat trouv\ufffd"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Essayez avec d'autres termes ou contactez notre support."),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{to:"/contact",variant:"primary"},"Contactez-nous"))):s.a.createElement("div",null,!m&&s.a.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-6"},null===(e=o.find(e=>e.id===t))||void 0===e?void 0:e.name),m&&Object.keys(u).length>0&&s.a.createElement("p",{className:"text-sm text-gray-500 mb-6"},Object.values(u).flat().length,' r\ufffdsultat(s) pour "',m,'"'),s.a.createElement("div",{className:"space-y-6"},m?Object.keys(u).map(e=>{var t;return s.a.createElement("div",{key:e,className:"mb-8"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},null===(t=o.find(t=>t.id===e))||void 0===t?void 0:t.name),s.a.createElement("dl",{className:"space-y-6 divide-y divide-gray-200"},u[e].map((t,a)=>{const r=`${e}-${a}`;return s.a.createElement("div",{key:r,className:a>0?"pt-6":""},s.a.createElement("dt",{className:"text-lg"},s.a.createElement("button",{onClick:()=>d(r),className:"text-left w-full flex justify-between items-start text-gray-900"},s.a.createElement("span",{className:"font-medium text-gray-900"},t.question),s.a.createElement("span",{className:"ml-6 h-7 flex items-center"},l[r]?s.a.createElement(O.a,{className:"h-5 w-5 text-teal-500"}):s.a.createElement(L.a,{className:"h-5 w-5 text-teal-500"})))),l[r]&&s.a.createElement("dd",{className:"mt-2 pr-12"},s.a.createElement("p",{className:"text-base text-gray-600"},t.answer)))})))}):s.a.createElement("dl",{className:"space-y-6 divide-y divide-gray-200"},u[t].map((e,a)=>{const r=`${t}-${a}`;return s.a.createElement("div",{key:r,className:a>0?"pt-6":""},s.a.createElement("dt",{className:"text-lg"},s.a.createElement("button",{onClick:()=>d(r),className:"text-left w-full flex justify-between items-start text-gray-900"},s.a.createElement("span",{className:"font-medium text-gray-900"},e.question),s.a.createElement("span",{className:"ml-6 h-7 flex items-center"},l[r]?s.a.createElement(O.a,{className:"h-5 w-5 text-teal-500"}):s.a.createElement(L.a,{className:"h-5 w-5 text-teal-500"})))),l[r]&&s.a.createElement("dd",{className:"mt-2 pr-12"},s.a.createElement("p",{className:"text-base text-gray-600"},e.answer)))})))))),s.a.createElement("div",{className:"mt-16 bg-teal-50 rounded-lg shadow-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-8 sm:p-10 sm:pb-6"},s.a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-center"},s.a.createElement("div",{className:"lg:col-span-2"},s.a.createElement("h3",{className:"text-xl font-semibold text-teal-900"},"Vous n'avez pas trouv\ufffd de r\ufffdponse \ufffd votre question ?"),s.a.createElement("p",{className:"mt-2 text-base text-teal-700"},"Notre \ufffdquipe de support est disponible pour vous aider. Contactez-nous par email, t\ufffdl\ufffdphone ou via le formulaire de contact.")),s.a.createElement("div",{className:"flex justify-center lg:justify-end"},s.a.createElement(w,{to:"/contact",variant:"primary",size:"lg"},"Nous contacter")))),s.a.createElement("div",{className:"px-6 pt-6 pb-8 bg-teal-100 sm:p-10 sm:pt-6"},s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},s.a.createElement("div",null,s.a.createElement("h4",{className:"text-sm font-medium text-teal-900"},"Par email"),s.a.createElement("div",{className:"mt-2 text-base text-teal-800"},s.a.createElement("p",null,"support@pro-trans.fr"),s.a.createElement("p",{className:"mt-1 text-sm text-teal-700"},"R\ufffdponse sous 24h ouvr\ufffdes"))),s.a.createElement("div",null,s.a.createElement("h4",{className:"text-sm font-medium text-teal-900"},"Par t\ufffdl\ufffdphone"),s.a.createElement("div",{className:"mt-2 text-base text-teal-800"},s.a.createElement("p",null,"01 23 45 67 89"),s.a.createElement("p",{className:"mt-1 text-sm text-teal-700"},"Du lundi au vendredi, 9h - 18h"))))))))},T=a(19),P=a(6),z=a(189),q=a(190),B=a(191),V=a(192);var F=Object(r.forwardRef)((e,t)=>{let{id:a,name:r,type:l="text",label:n,placeholder:m,value:c,disabled:o=!1,required:i=!1,onChange:d,onBlur:u,error:p,touched:v,className:x="",helperText:g,icon:E,iconPosition:h="left",...b}=e;const f=`block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm ${p&&v?"border-red-300 focus:border-red-500 focus:ring-red-500":""} ${o?"bg-gray-100 cursor-not-allowed":""} ${E?"left"===h?"pl-10":"pr-10":""} ${x}`;return s.a.createElement("div",{className:"mb-4"},n&&s.a.createElement("label",{htmlFor:a||r,className:"block text-sm font-medium text-gray-700 mb-1"},n,i&&s.a.createElement("span",{className:"text-red-500 ml-1"},"*")),s.a.createElement("div",{className:"relative"},E&&"left"===h&&s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},E),s.a.createElement("input",Object.assign({ref:t,id:a||r,name:r,type:l,placeholder:m,value:c,disabled:o,required:i,onChange:d,onBlur:u,className:f,"aria-invalid":p&&v?"true":"false","aria-describedby":p&&v?r+"-error":g?r+"-helper":void 0},b)),E&&"right"===h&&s.a.createElement("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},E)),p&&v&&s.a.createElement("p",{id:r+"-error",className:"mt-1 text-sm text-red-600"},p),g&&!p&&s.a.createElement("p",{id:r+"-helper",className:"mt-1 text-sm text-gray-500"},g))});var R=()=>{const[e,t]=Object(r.useState)(!1),[a,l]=Object(r.useState)(!1),n=P.d({nom:P.f().required("Votre nom est requis").min(2,"Le nom doit comporter au moins 2 caract\ufffdres").max(50,"Le nom ne doit pas d\ufffdpasser 50 caract\ufffdres"),email:P.f().required("Votre email est requis").email("Format d'email invalide"),sujet:P.f().required("Le sujet est requis").min(5,"Le sujet doit comporter au moins 5 caract\ufffdres").max(100,"Le sujet ne doit pas d\ufffdpasser 100 caract\ufffdres"),message:P.f().required("Votre message est requis").min(20,"Le message doit comporter au moins 20 caract\ufffdres"),telephone:P.f().matches(/^((\+)33|0)[1-9](\d{2}){4}$/,"Format de t\ufffdl\ufffdphone invalide (ex: 0612345678 ou +33612345678)").notRequired(),politique:P.a().oneOf([!0],"Vous devez accepter la politique de confidentialit\ufffd").required("Vous devez accepter la politique de confidentialit\ufffd")}),m=Object(T.a)({initialValues:{nom:"",email:"",telephone:"",sujet:"",message:"",politique:!1},validationSchema:n,onSubmit:async e=>{try{t(!0),await u.post("/contact",e),l(!0),o.toast.success("Votre message a \ufffdt\ufffd envoy\ufffd avec succ\ufffds !"),m.resetForm()}catch(s){var a,r;console.error("Erreur lors de l'envoi du message :",s),o.toast.error((null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Erreur lors de l'envoi du message")}finally{t(!1)}}});return s.a.createElement("div",{className:"bg-white"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h1",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Contactez-nous"),s.a.createElement("p",{className:"mt-4 text-xl text-gray-500 max-w-2xl mx-auto"},"Notre \ufffdquipe est \ufffd votre disposition pour r\ufffdpondre \ufffd toutes vos questions")),s.a.createElement("div",{className:"mt-16 lg:grid lg:grid-cols-3 lg:gap-8"},s.a.createElement("div",null,s.a.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Nos coordonn\ufffdes"),s.a.createElement("p",{className:"mt-3 text-lg text-gray-500"},"N'h\ufffdsitez pas \ufffd nous contacter par t\ufffdl\ufffdphone, email ou en remplissant le formulaire."),s.a.createElement("div",{className:"mt-9"},s.a.createElement("div",{className:"flex"},s.a.createElement("div",{className:"flex-shrink-0"},s.a.createElement(z.a,{className:"h-6 w-6 text-teal-600","aria-hidden":"true"})),s.a.createElement("div",{className:"ml-3 text-base text-gray-500"},s.a.createElement("p",null,"01 23 45 67 89"),s.a.createElement("p",{className:"mt-1"},"Du lundi au vendredi, 9h - 18h"))),s.a.createElement("div",{className:"mt-6 flex"},s.a.createElement("div",{className:"flex-shrink-0"},s.a.createElement(q.a,{className:"h-6 w-6 text-teal-600","aria-hidden":"true"})),s.a.createElement("div",{className:"ml-3 text-base text-gray-500"},s.a.createElement("p",null,"contact@pro-trans.fr"),s.a.createElement("p",{className:"mt-1"},"R\ufffdponse sous 24h ouvr\ufffdes"))),s.a.createElement("div",{className:"mt-6 flex"},s.a.createElement("div",{className:"flex-shrink-0"},s.a.createElement(B.a,{className:"h-6 w-6 text-teal-600","aria-hidden":"true"})),s.a.createElement("div",{className:"ml-3 text-base text-gray-500"},s.a.createElement("p",null,"123 Avenue des Transports"),s.a.createElement("p",null,"75001 Paris, France")))),s.a.createElement("div",{className:"mt-8"},s.a.createElement("h3",{className:"text-sm font-semibold text-gray-400 tracking-wider uppercase"},"Suivez-nous"),s.a.createElement("div",{className:"mt-4 flex space-x-6"},s.a.createElement("a",{href:"#",className:"text-gray-400 hover:text-gray-500"},s.a.createElement("span",{className:"sr-only"},"Facebook"),s.a.createElement("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},s.a.createElement("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"}))),s.a.createElement("a",{href:"#",className:"text-gray-400 hover:text-gray-500"},s.a.createElement("span",{className:"sr-only"},"Instagram"),s.a.createElement("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},s.a.createElement("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"}))),s.a.createElement("a",{href:"#",className:"text-gray-400 hover:text-gray-500"},s.a.createElement("span",{className:"sr-only"},"Twitter"),s.a.createElement("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},s.a.createElement("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"}))),s.a.createElement("a",{href:"#",className:"text-gray-400 hover:text-gray-500"},s.a.createElement("span",{className:"sr-only"},"LinkedIn"),s.a.createElement("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},s.a.createElement("path",{fillRule:"evenodd",d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z",clipRule:"evenodd"})))))),s.a.createElement("div",{className:"mt-12 lg:mt-0 lg:col-span-2"},s.a.createElement("div",{className:"bg-white shadow-lg rounded-lg p-8"},a?s.a.createElement("div",{className:"flex flex-col items-center justify-center h-full text-center py-12"},s.a.createElement(V.a,{className:"h-16 w-16 text-green-500 mb-4"}),s.a.createElement("h2",{className:"text-2xl font-medium text-gray-900 mb-2"},"Message envoy\ufffd !"),s.a.createElement("p",{className:"text-gray-600 mb-6"},"Merci de nous avoir contact\ufffds. Notre \ufffdquipe vous r\ufffdpondra dans les plus brefs d\ufffdlais."),s.a.createElement(w,{variant:"outline",onClick:()=>l(!1)},"Envoyer un autre message")):s.a.createElement("form",{onSubmit:m.handleSubmit,className:"grid grid-cols-1 gap-y-6"},s.a.createElement("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2"},s.a.createElement(F,{id:"nom",name:"nom",type:"text",label:"Nom complet",placeholder:"Votre nom et pr\ufffdnom",value:m.values.nom,onChange:m.handleChange,onBlur:m.handleBlur,error:m.touched.nom&&m.errors.nom,touched:m.touched.nom,required:!0}),s.a.createElement(F,{id:"email",name:"email",type:"email",label:"Email",placeholder:"Votre adresse email",value:m.values.email,onChange:m.handleChange,onBlur:m.handleBlur,error:m.touched.email&&m.errors.email,touched:m.touched.email,required:!0,icon:s.a.createElement(q.a,{className:"h-5 w-5 text-gray-400"})})),s.a.createElement("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2"},s.a.createElement(F,{id:"telephone",name:"telephone",type:"tel",label:"T\ufffdl\ufffdphone",placeholder:"Votre num\ufffdro de t\ufffdl\ufffdphone (facultatif)",value:m.values.telephone,onChange:m.handleChange,onBlur:m.handleBlur,error:m.touched.telephone&&m.errors.telephone,touched:m.touched.telephone,icon:s.a.createElement(z.a,{className:"h-5 w-5 text-gray-400"}),helperText:"Format: 0612345678 ou +33612345678"}),s.a.createElement(F,{id:"sujet",name:"sujet",type:"text",label:"Sujet",placeholder:"Objet de votre message",value:m.values.sujet,onChange:m.handleChange,onBlur:m.handleBlur,error:m.touched.sujet&&m.errors.sujet,touched:m.touched.sujet,required:!0})),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700"},"Message ",s.a.createElement("span",{className:"text-red-500"},"*")),s.a.createElement("div",{className:"mt-1"},s.a.createElement("textarea",{id:"message",name:"message",rows:6,className:"py-3 px-4 block w-full shadow-sm focus:ring-teal-500 focus:border-teal-500 border border-gray-300 rounded-md",placeholder:"D\ufffdtaillez votre demande...",value:m.values.message,onChange:m.handleChange,onBlur:m.handleBlur,required:!0}),m.touched.message&&m.errors.message&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},m.errors.message))),s.a.createElement("div",{className:"flex items-start"},s.a.createElement("div",{className:"flex items-center h-5"},s.a.createElement("input",{id:"politique",name:"politique",type:"checkbox",className:"focus:ring-teal-500 h-4 w-4 text-teal-600 border-gray-300 rounded",checked:m.values.politique,onChange:m.handleChange,onBlur:m.handleBlur,required:!0})),s.a.createElement("div",{className:"ml-3 text-sm"},s.a.createElement("label",{htmlFor:"politique",className:"font-medium text-gray-700"},"J'accepte la politique de confidentialit\ufffd ",s.a.createElement("span",{className:"text-red-500"},"*")),s.a.createElement("p",{className:"text-gray-500"},"En soumettant ce formulaire, j'accepte que mes donn\ufffdes soient trait\ufffdes conform\ufffdment \ufffd la"," ",s.a.createElement("a",{href:"/politique-confidentialite",className:"font-medium text-teal-600 hover:text-teal-500"},"politique de confidentialit\ufffd"),"."),m.touched.politique&&m.errors.politique&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},m.errors.politique))),s.a.createElement("div",null,s.a.createElement(w,{type:"submit",variant:"primary",fullWidth:!0,size:"lg",isLoading:e,disabled:e||!m.isValid},"Envoyer le message")))))),s.a.createElement("div",{className:"mt-16 bg-gray-100 rounded-lg overflow-hidden"},s.a.createElement("div",{className:"h-96 relative"},s.a.createElement("iframe",{title:"Carte de localisation",className:"absolute inset-0 w-full h-full",frameBorder:"0",src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2624.142047033236!2d2.3354330160472316!3d48.87456857928921!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47e66e38f817b573%3A0x48d69c30470e7aeb!2sOp%C3%A9ra%20Garnier!5e0!3m2!1sfr!2sfr!4v1567000795195!5m2!1sfr!2sfr",allowFullScreen:!0}))),s.a.createElement("div",{className:"mt-16 bg-teal-50 rounded-lg shadow-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-8 sm:p-10 sm:pb-6"},s.a.createElement("div",{className:"text-center"},s.a.createElement("h3",{className:"text-xl font-semibold text-teal-900"},"Questions fr\ufffdquentes"),s.a.createElement("p",{className:"mt-2 text-base text-teal-700"},"Consultez notre FAQ pour obtenir des r\ufffdponses rapides \ufffd vos questions"),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{to:"/faq",variant:"primary"},"Voir la FAQ")))))))},I=a(196),_=a(197),$=a(195),U=a(198),J=a(199),W=a(126),G=a(173),H=(a(231),a(127),a(51),a(128),a(232));const Q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return"";try{const r="string"===typeof e?Object(W.default)(e):e;return Object(G.default)(r,t,{locale:H.a,...a})}catch(r){return console.error("Erreur de formatage de date:",r),""}},Y={["colis"]:"Colis",["meuble"]:"Meuble",["marchandise"]:"Marchandise",["palette"]:"Palette",["demenagement"]:"D\xe9m\xe9nagement",["vehicule"]:"V\xe9hicule",["autre"]:"Autre"},Z="disponible",K="en_attente",X="en_cours",ee="termine",te="annule",ae={[Z]:"Disponible",[K]:"En attente",[X]:"En cours",[ee]:"Termin\xe9",[te]:"Annul\xe9"},re={[Z]:"bg-green-100 text-green-800",[K]:"bg-blue-100 text-blue-800",[X]:"bg-yellow-100 text-yellow-800",[ee]:"bg-gray-100 text-gray-800",[te]:"bg-red-100 text-red-800"},se="en_attente",le="accepte",ne="refuse",me="annule",ce="expire",oe="en_cours",ie="termine",de={[se]:"En attente",[le]:"Accept\xe9",[ne]:"Refus\xe9",[me]:"Annul\xe9",[ce]:"Expir\xe9",[oe]:"En cours",[ie]:"Termin\xe9"},ue={[se]:"bg-blue-100 text-blue-800",[le]:"bg-green-100 text-green-800",[ne]:"bg-red-100 text-red-800",[me]:"bg-gray-100 text-gray-800",[ce]:"bg-yellow-100 text-yellow-800",[oe]:"bg-indigo-100 text-indigo-800",[ie]:"bg-teal-100 text-teal-800"};var pe=a(193),ve=a(194),xe=a(49),ge=a.n(xe);a(92);var Ee=e=>{let{onSearch:t,initialFilters:a={}}=e;const l=Object(i.r)(),n=Object(i.p)(),[m,c]=Object(r.useState)(!1),[o,d]=Object(r.useState)({villeDepart:"",villeArrivee:"",typeTransport:"",dateDepartMin:null,dateDepartMax:null,poids:"",volume:"",isUrgent:!1,...a});Object(r.useEffect)(()=>{const e=new URLSearchParams(n.search),t={};e.has("villeDepart")&&(t.villeDepart=e.get("villeDepart")),e.has("villeArrivee")&&(t.villeArrivee=e.get("villeArrivee")),e.has("typeTransport")&&(t.typeTransport=e.get("typeTransport")),e.has("dateDepartMin")&&(t.dateDepartMin=new Date(e.get("dateDepartMin"))),e.has("dateDepartMax")&&(t.dateDepartMax=new Date(e.get("dateDepartMax"))),e.has("poids")&&(t.poids=e.get("poids")),e.has("volume")&&(t.volume=e.get("volume")),e.has("isUrgent")&&(t.isUrgent="true"===e.get("isUrgent")),Object.keys(t).some(e=>!["villeDepart","villeArrivee","typeTransport"].includes(e)&&null!==t[e]&&""!==t[e])&&c(!0),Object.keys(t).length>0&&d(e=>({...e,...t}))},[n.search]);const u=e=>{const{name:t,value:a,type:r,checked:s}=e.target;d({...o,[t]:"checkbox"===r?s:a})},p=(e,t)=>{d({...o,[t]:e})};return s.a.createElement("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden"},s.a.createElement("div",{className:"p-4"},s.a.createElement("form",{onSubmit:e=>{e.preventDefault();const a=new URLSearchParams;o.villeDepart&&a.append("villeDepart",o.villeDepart),o.villeArrivee&&a.append("villeArrivee",o.villeArrivee),o.typeTransport&&a.append("typeTransport",o.typeTransport),o.dateDepartMin&&a.append("dateDepartMin",o.dateDepartMin.toISOString()),o.dateDepartMax&&a.append("dateDepartMax",o.dateDepartMax.toISOString()),o.poids&&a.append("poids",o.poids),o.volume&&a.append("volume",o.volume),o.isUrgent&&a.append("isUrgent",o.isUrgent),l({pathname:"/annonces",search:a.toString()}),t&&t(o)}},s.a.createElement("div",{className:"flex flex-col md:flex-row gap-4"},s.a.createElement("div",{className:"flex-1 relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(B.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement("input",{type:"text",name:"villeDepart",value:o.villeDepart,onChange:u,placeholder:"Ville de d\xe9part",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})),s.a.createElement("div",{className:"flex-1 relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(B.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement("input",{type:"text",name:"villeArrivee",value:o.villeArrivee,onChange:u,placeholder:"Ville d'arriv\xe9e",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})),s.a.createElement("div",{className:"flex-1 relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(h.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement("select",{name:"typeTransport",value:o.typeTransport,onChange:u,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"},s.a.createElement("option",{value:""},"Type de transport"),s.a.createElement("option",{value:"colis"},"Colis"),s.a.createElement("option",{value:"meuble"},"Meuble"),s.a.createElement("option",{value:"marchandise"},"Marchandise"),s.a.createElement("option",{value:"palette"},"Palette"),s.a.createElement("option",{value:"demenagement"},"D\xe9m\xe9nagement"),s.a.createElement("option",{value:"vehicule"},"V\xe9hicule"),s.a.createElement("option",{value:"autre"},"Autre"))),s.a.createElement("div",{className:"md:w-auto"},s.a.createElement(w,{type:"submit",variant:"primary",className:"w-full md:w-auto"},s.a.createElement(b.a,{className:"h-5 w-5 mr-1"}),"Rechercher"))),s.a.createElement("div",{className:"mt-4 flex justify-between items-center"},s.a.createElement("button",{type:"button",className:"text-teal-600 hover:text-teal-700 text-sm font-medium flex items-center",onClick:()=>{c(!m)}},s.a.createElement(pe.a,{className:"h-5 w-5 mr-1"}),m?"Masquer les filtres avanc\xe9s":"Afficher les filtres avanc\xe9s"),(o.dateDepartMin||o.dateDepartMax||o.poids||o.volume||o.isUrgent)&&s.a.createElement("button",{type:"button",className:"text-gray-500 hover:text-gray-700 text-sm font-medium",onClick:()=>{d({villeDepart:"",villeArrivee:"",typeTransport:"",dateDepartMin:null,dateDepartMax:null,poids:"",volume:"",isUrgent:!1}),l("/annonces"),t&&t({})}},s.a.createElement(ve.a,{className:"h-5 w-5 mr-1 inline-block"}),"Effacer les filtres")),m&&s.a.createElement("div",{className:"mt-4 p-4 bg-gray-50 rounded-md grid grid-cols-1 md:grid-cols-2 gap-4"},s.a.createElement("div",null,s.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Date de d\xe9part (entre)"),s.a.createElement("div",{className:"flex items-center space-x-2"},s.a.createElement("div",{className:"relative flex-1"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement($.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement(ge.a,{selected:o.dateDepartMin,onChange:e=>p(e,"dateDepartMin"),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",placeholderText:"Date min",dateFormat:"dd/MM/yyyy",isClearable:!0})),s.a.createElement("span",{className:"text-gray-500"},"et"),s.a.createElement("div",{className:"relative flex-1"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement($.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement(ge.a,{selected:o.dateDepartMax,onChange:e=>p(e,"dateDepartMax"),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500",placeholderText:"Date max",dateFormat:"dd/MM/yyyy",isClearable:!0,minDate:o.dateDepartMin||null})))),s.a.createElement("div",{className:"grid grid-cols-2 gap-4"},s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"poids",className:"block text-sm font-medium text-gray-700 mb-1"},"Poids max (kg)"),s.a.createElement("input",{type:"number",id:"poids",name:"poids",value:o.poids,onChange:u,placeholder:"Ex: 100",min:"0",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"volume",className:"block text-sm font-medium text-gray-700 mb-1"},"Volume max (m\xb3)"),s.a.createElement("input",{type:"number",id:"volume",name:"volume",value:o.volume,onChange:u,placeholder:"Ex: 2",min:"0",step:"0.1",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"}))),s.a.createElement("div",{className:"md:col-span-2"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{type:"checkbox",id:"isUrgent",name:"isUrgent",checked:o.isUrgent,onChange:u,className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),s.a.createElement("label",{htmlFor:"isUrgent",className:"ml-2 block text-sm text-gray-700"},"Urgences uniquement")))))))};var he=()=>{const[e,t]=Object(r.useState)([]),[a,l]=Object(r.useState)(!0),[n,c]=Object(r.useState)(null),[d,p]=Object(r.useState)(0),[v,x]=Object(r.useState)(1),[g,b]=Object(r.useState)(1),[f,y]=Object(r.useState)("date_desc"),N=Object(i.p)(),j=Object(i.r)(),{isAuthenticated:C,user:k}=E(),D=new URLSearchParams(N.search),S={villeDepart:D.get("villeDepart")||"",villeArrivee:D.get("villeArrivee")||"",typeTransport:D.get("typeTransport")||"",dateDepartMin:D.get("dateDepartMin")?new Date(D.get("dateDepartMin")):null,dateDepartMax:D.get("dateDepartMax")?new Date(D.get("dateDepartMax")):null,poids:D.get("poids")||"",volume:D.get("volume")||"",isUrgent:"true"===D.get("isUrgent")},A=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;try{l(!0);const s={page:a,limit:10,sort:r,...e};Object.keys(s).forEach(e=>{null!==s[e]&&""!==s[e]||delete s[e],"dateDepartMin"===e&&s[e]&&(s[e]=s[e].toISOString()),"dateDepartMax"===e&&s[e]&&(s[e]=s[e].toISOString())});const n=await u.get("/annonces",{params:s});t(n.data.data),p(n.data.totalResults),b(n.data.totalPages),x(n.data.currentPage),c(null)}catch(s){console.error("Erreur lors du chargement des annonces:",s),c("Erreur lors du chargement des annonces. Veuillez r\ufffdessayer."),o.toast.error("Erreur lors du chargement des annonces")}finally{l(!1)}};Object(r.useEffect)(()=>{A(S)},[N.search]);const O=e=>{e>=1&&e<=g&&(x(e),A(S,e,f),window.scrollTo(0,0))};return s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},s.a.createElement("h1",{className:"text-3xl font-extrabold text-gray-900 mb-6"},"Annonces de transport"),s.a.createElement("div",{className:"mb-8"},s.a.createElement(Ee,{onSearch:e=>{A(e,1,f)},initialFilters:S})),s.a.createElement("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},s.a.createElement("div",{className:"mb-4 sm:mb-0"},s.a.createElement("p",{className:"text-sm text-gray-700"},d>0?`${d} annonce${d>1?"s":""} trouv\ufffde${d>1?"s":""}`:"Aucune annonce trouv\ufffde")),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("label",{htmlFor:"sortBy",className:"mr-2 text-sm text-gray-700"},"Trier par:"),s.a.createElement("select",{id:"sortBy",name:"sortBy",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm",value:f,onChange:e=>{const t=e.target.value;y(t),A(S,v,t)}},s.a.createElement("option",{value:"date_desc"},"Date (plus r\ufffdcente)"),s.a.createElement("option",{value:"date_asc"},"Date (plus ancienne)"),s.a.createElement("option",{value:"depart_asc"},"Date de d\ufffdpart (plus proche)"),s.a.createElement("option",{value:"prix_asc"},"Prix max (croissant)"),s.a.createElement("option",{value:"prix_desc"},"Prix max (d\ufffdcroissant)")))),C&&"client"===(null===k||void 0===k?void 0:k.role)&&s.a.createElement("div",{className:"mb-6"},s.a.createElement(w,{to:"/dashboard/annonces/create",variant:"primary"},s.a.createElement(I.a,{className:"h-5 w-5 mr-2"}),"Cr\ufffder une nouvelle annonce")),a&&0===e.length?s.a.createElement("div",{className:"flex items-center justify-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})):n?s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-500 mr-2"}),s.a.createElement("div",null,s.a.createElement("p",{className:"text-red-700"},n),s.a.createElement(w,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>A(S)},"R\ufffdessayer")))):0===e.length?s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-md p-6 text-center"},s.a.createElement(h.a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Aucune annonce disponible"),s.a.createElement("p",{className:"mt-2 text-gray-500"},"Aucune annonce ne correspond \ufffd vos crit\ufffdres de recherche."),s.a.createElement("div",{className:"mt-4"},s.a.createElement(w,{variant:"outline",onClick:()=>{j("/annonces"),A({})}},"Effacer les filtres"))):s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-md"},s.a.createElement("ul",{className:"divide-y divide-gray-200"},e.map(e=>{return s.a.createElement("li",{key:e._id},s.a.createElement(m.b,{to:"/annonces/"+e._id,className:"block hover:bg-gray-50"},s.a.createElement("div",{className:"px-4 py-4 sm:px-6"},s.a.createElement("div",{className:"flex items-center justify-between"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("p",{className:"text-sm font-medium text-teal-600 truncate"},e.titre),s.a.createElement("p",{className:"flex items-center mt-2 text-sm text-gray-500"},s.a.createElement(B.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.a.createElement("span",{className:"truncate"},e.villeDepart," ? ",e.villeArrivee))),s.a.createElement("div",{className:"ml-4 flex flex-col flex-shrink-0 items-end space-y-1"},s.a.createElement("p",{className:"text-sm text-gray-900"},e.prixMax?e.prixMax+"\ufffd max":"Prix \ufffd d\ufffdfinir"),s.a.createElement("p",{className:"flex-shrink-0"},s.a.createElement("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+re[e.statut]},"disponible"===e.statut?"Disponible":"en_attente"===e.statut?"En attente":"en_cours"===e.statut?"En cours":"termine"===e.statut?"Termin\ufffd":"Annul\ufffd")))),s.a.createElement("div",{className:"mt-4 sm:flex sm:justify-between"},s.a.createElement("div",{className:"sm:flex"},s.a.createElement("p",{className:"flex items-center text-sm text-gray-500"},s.a.createElement(h.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),Y[e.typeTransport]||e.typeTransport),s.a.createElement("p",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0 sm:ml-6"},s.a.createElement($.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),(t=e.dateDepart,Q(t,"dd MMMM yyyy")))),s.a.createElement("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0"},e.isUrgent&&s.a.createElement("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full"},"Urgent"))))));var t}))),g>1&&s.a.createElement("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 mt-4 rounded-md shadow"},s.a.createElement("div",{className:"flex flex-1 justify-between sm:hidden"},s.a.createElement(w,{variant:"outline",onClick:()=>O(v-1),disabled:1===v},"Pr\ufffdc\ufffddent"),s.a.createElement(w,{variant:"outline",onClick:()=>O(v+1),disabled:v===g},"Suivant")),s.a.createElement("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},s.a.createElement("div",null,s.a.createElement("p",{className:"text-sm text-gray-700"},"Affichage de la page ",s.a.createElement("span",{className:"font-medium"},v)," sur ",s.a.createElement("span",{className:"font-medium"},g))),s.a.createElement("div",null,s.a.createElement("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},s.a.createElement("button",{onClick:()=>O(v-1),disabled:1===v,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"},s.a.createElement("span",{className:"sr-only"},"Pr\ufffdc\ufffddent"),s.a.createElement(U.a,{className:"h-5 w-5","aria-hidden":"true"})),Array.from({length:g}).map((e,t)=>{const a=t+1,r=a===v;return 1===a||a===g||a>=v-1&&a<=v+1?s.a.createElement("button",{key:a,onClick:()=>O(a),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${r?"bg-teal-600 text-white":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50"} focus:z-20 focus:outline-offset-0`},a):2===a&&v>3||a===g-1&&v<g-2?s.a.createElement("span",{key:a,className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300"},"..."):null}),s.a.createElement("button",{onClick:()=>O(v+1),disabled:v===g,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"},s.a.createElement("span",{className:"sr-only"},"Suivant"),s.a.createElement(J.a,{className:"h-5 w-5","aria-hidden":"true"})))))))},be=a(200),fe=a(201),ye=a(202),Ne=a(203),we=a(205),je=a(204);var Ce=()=>{const{id:e}=Object(i.t)(),{isAuthenticated:t,user:a}=E(),l=Object(i.r)(),[n,c]=Object(r.useState)(null),[d,p]=Object(r.useState)(!0),[v,x]=Object(r.useState)(null),[g,b]=Object(r.useState)(""),[j,C]=Object(r.useState)(!1),[k,D]=Object(r.useState)(!1),[S,A]=Object(r.useState)({montant:"",message:"",delaiLivraison:new Date(Date.now()+6048e5)}),[O,L]=Object(r.useState)(!1);Object(r.useEffect)(()=>{(async()=>{try{p(!0);const t=await u.get("/annonces/"+e);c(t.data.data),x(null)}catch(t){console.error("Erreur lors du chargement de l'annonce:",t),x("Erreur lors du chargement de l'annonce. Veuillez r\ufffdessayer."),o.toast.error("Erreur lors du chargement de l'annonce")}finally{p(!1)}})()},[e]);if(d)return s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},s.a.createElement("div",{className:"flex items-center justify-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})));if(v||!n)return s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-500 mr-2"}),s.a.createElement("div",null,s.a.createElement("p",{className:"text-red-700"},v||"Annonce non trouv\ufffde"),s.a.createElement(w,{to:"/annonces",variant:"outline",size:"sm",className:"mt-2"},"Retour aux annonces")))));const M=e=>Object(G.default)(new Date(e),"dd MMMM yyyy",{locale:H.a}),T=t&&a.id===n.utilisateur._id,P=t&&"transporteur"===a.role&&!T&&"disponible"===n.statut;return s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},s.a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},s.a.createElement(w,{to:"/annonces",variant:"outline",className:"mb-4 sm:mb-0"},s.a.createElement(be.a,{className:"h-5 w-5 mr-2"}),"Retour aux annonces"),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("span",{className:"px-3 py-1 text-sm font-medium rounded-full "+re[n.statut]},"disponible"===n.statut?"Disponible":"en_attente"===n.statut?"En attente":"en_cours"===n.statut?"En cours":"termine"===n.statut?"Termin\ufffd":"Annul\ufffd"),n.isUrgent&&s.a.createElement("span",{className:"ml-2 px-3 py-1 text-sm font-medium bg-red-100 text-red-800 rounded-full"},"Urgent"))),T&&s.a.createElement("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6"},s.a.createElement("div",{className:"flex"},s.a.createElement("div",{className:"flex-shrink-0"},s.a.createElement(InformationCircleIcon,{className:"h-5 w-5 text-blue-400","aria-hidden":"true"})),s.a.createElement("div",{className:"ml-3"},s.a.createElement("p",{className:"text-sm text-blue-700"},"Vous \ufffdtes le propri\ufffdtaire de cette annonce.",s.a.createElement(m.b,{to:"/dashboard/annonces/"+n._id,className:"font-medium text-blue-700 underline ml-1"},"G\ufffdrer cette annonce"))))),s.a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},s.a.createElement("div",{className:"lg:col-span-2"},s.a.createElement("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},n.titre),s.a.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center text-sm text-gray-500 mt-2"},s.a.createElement("div",{className:"flex items-center mr-6 mb-2 sm:mb-0"},s.a.createElement(h.a,{className:"h-5 w-5 text-gray-400 mr-1"}),s.a.createElement("span",null,Y[n.typeTransport]||n.typeTransport)),s.a.createElement("div",{className:"flex items-center mr-6 mb-2 sm:mb-0"},s.a.createElement($.a,{className:"h-5 w-5 text-gray-400 mr-1"}),s.a.createElement("span",null,M(n.dateDepart))),s.a.createElement("div",{className:"flex items-center"},s.a.createElement(B.a,{className:"h-5 w-5 text-gray-400 mr-1"}),s.a.createElement("span",null,n.villeDepart," ? ",n.villeArrivee)))),s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900 mb-3"},"Description"),s.a.createElement("p",{className:"text-gray-700 whitespace-pre-line"},n.description)),n.images&&n.images.length>0&&s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900 mb-3"},"Photos"),s.a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4"},n.images.map((e,t)=>s.a.createElement("div",{key:t,className:"relative h-40 bg-gray-100 rounded-lg overflow-hidden shadow-sm"},s.a.createElement("img",{src:e,alt:"Photo "+(t+1),className:"absolute inset-0 h-full w-full object-cover"}))))),s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900 mb-3"},"D\ufffdtails du transport"),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},s.a.createElement("div",null,s.a.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Adresse de d\ufffdpart"),s.a.createElement("p",{className:"mt-1 text-gray-900 whitespace-pre-line"},n.adresseDepart)),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Adresse d'arriv\ufffde"),s.a.createElement("p",{className:"mt-1 text-gray-900 whitespace-pre-line"},n.adresseArrivee)))),s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900 mb-3"},"Caract\ufffdristiques"),s.a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},n.poids&&s.a.createElement("div",{className:"flex items-center"},s.a.createElement(fe.a,{className:"h-5 w-5 text-gray-400 mr-2"}),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Poids"),s.a.createElement("p",{className:"text-gray-900"},n.poids," kg"))),n.volume&&s.a.createElement("div",{className:"flex items-center"},s.a.createElement(ye.a,{className:"h-5 w-5 text-gray-400 mr-2"}),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Volume"),s.a.createElement("p",{className:"text-gray-900"},n.volume," m\ufffd"))),(n.longueur||n.largeur||n.hauteur)&&s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"h-5 w-5 flex items-center justify-center text-gray-400 mr-2"},s.a.createElement("span",{className:"text-sm font-semibold"},"3D")),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Dimensions"),s.a.createElement("p",{className:"text-gray-900"},n.longueur?`L: ${n.longueur} cm`:"",n.largeur?` l: ${n.largeur} cm`:"",n.hauteur?` H: ${n.hauteur} cm`:""))),n.prixMax&&s.a.createElement("div",{className:"flex items-center"},s.a.createElement(y.a,{className:"h-5 w-5 text-gray-400 mr-2"}),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Prix maximum"),s.a.createElement("p",{className:"text-gray-900"},n.prixMax," \ufffd"))),s.a.createElement("div",{className:"flex items-center"},s.a.createElement(f.a,{className:"h-5 w-5 text-gray-400 mr-2"}),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Date de cr\ufffdation"),s.a.createElement("p",{className:"text-gray-900"},M(n.createdAt))))),n.instructions&&s.a.createElement("div",{className:"mt-4"},s.a.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Instructions particuli\ufffdres"),s.a.createElement("p",{className:"mt-1 text-gray-900 whitespace-pre-line"},n.instructions))),P&&s.a.createElement("div",{className:"px-6 py-4"},k?s.a.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Proposer un devis"),s.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),t&&"transporteur"===a.role)if(S.montant&&S.message&&S.delaiLivraison)try{L(!0),await u.post("/devis",{annonce:n._id,montant:parseFloat(S.montant),message:S.message,delaiLivraison:S.delaiLivraison}),o.toast.success("Devis envoy\ufffd avec succ\ufffds"),D(!1),A({montant:"",message:"",delaiLivraison:new Date(Date.now()+6048e5)}),l("/dashboard/devis")}catch(m){var r,s;console.error("Erreur lors de l'envoi du devis:",m),o.toast.error((null===(r=m.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'envoi du devis")}finally{L(!1)}else o.toast.error("Veuillez remplir tous les champs du devis");else o.toast.error("Vous devez \ufffdtre connect\ufffd en tant que transporteur pour envoyer un devis")},className:"space-y-4"},s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"montant",className:"block text-sm font-medium text-gray-700 mb-1"},"Montant (\ufffd) ",s.a.createElement("span",{className:"text-red-500"},"*")),s.a.createElement("div",{className:"relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(y.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement("input",{type:"number",name:"montant",id:"montant",step:"0.01",min:"0",required:!0,className:"block w-full pl-10 pr-12 sm:text-sm border-gray-300 rounded-md focus:ring-teal-500 focus:border-teal-500",placeholder:"0.00",value:S.montant,onChange:e=>A({...S,montant:e.target.value})}),s.a.createElement("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},s.a.createElement("span",{className:"text-gray-500 sm:text-sm"},"EUR")))),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"delaiLivraison",className:"block text-sm font-medium text-gray-700 mb-1"},"Date de livraison estim\ufffde ",s.a.createElement("span",{className:"text-red-500"},"*")),s.a.createElement("div",{className:"relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement($.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement("input",{type:"date",name:"delaiLivraison",id:"delaiLivraison",required:!0,className:"block w-full pl-10 sm:text-sm border-gray-300 rounded-md focus:ring-teal-500 focus:border-teal-500",value:S.delaiLivraison?Object(G.default)(new Date(S.delaiLivraison),"yyyy-MM-dd"):"",onChange:e=>A({...S,delaiLivraison:new Date(e.target.value)}),min:Object(G.default)(new Date,"yyyy-MM-dd")}))),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1"},"Message ",s.a.createElement("span",{className:"text-red-500"},"*")),s.a.createElement("textarea",{id:"message",name:"message",rows:4,required:!0,className:"block w-full sm:text-sm border-gray-300 rounded-md focus:ring-teal-500 focus:border-teal-500",placeholder:"Pr\ufffdsentez votre offre en d\ufffdtail...",value:S.message,onChange:e=>A({...S,message:e.target.value})})),s.a.createElement("div",{className:"flex justify-end space-x-3"},s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>D(!1),disabled:O},"Annuler"),s.a.createElement(w,{type:"submit",variant:"primary",isLoading:O,disabled:O},"Envoyer le devis")))):s.a.createElement(w,{variant:"primary",onClick:()=>D(!0),fullWidth:!0},s.a.createElement(h.a,{className:"h-5 w-5 mr-2"}),"Proposer un devis")))),s.a.createElement("div",null,s.a.createElement("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden mb-6"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"A propos du client")),s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0"},n.utilisateur.photo?s.a.createElement("img",{src:n.utilisateur.photo,alt:`${n.utilisateur.prenom} ${n.utilisateur.nom}`,className:"h-12 w-12 rounded-full object-cover"}):s.a.createElement("div",{className:"h-12 w-12 rounded-full bg-teal-500 flex items-center justify-center"},s.a.createElement(Ne.a,{className:"h-6 w-6 text-white"}))),s.a.createElement("div",{className:"ml-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},n.utilisateur.prenom," ",n.utilisateur.nom),s.a.createElement("p",{className:"text-sm text-gray-500"},"Membre depuis ",Object(G.default)(new Date(n.utilisateur.createdAt),"MMMM yyyy",{locale:H.a})))),n.utilisateur.noteMoyenne&&s.a.createElement("div",{className:"mt-4 flex items-center"},s.a.createElement("div",{className:"flex"},[1,2,3,4,5].map(e=>s.a.createElement(je.a,{key:e,className:"h-5 w-5 "+(e<=Math.round(n.utilisateur.noteMoyenne)?"text-yellow-400":"text-gray-300")}))),s.a.createElement("p",{className:"ml-2 text-sm text-gray-700"},n.utilisateur.noteMoyenne.toFixed(1)," (",n.utilisateur.nbAvis||0," avis)")),s.a.createElement("div",{className:"mt-4"},s.a.createElement("div",{className:"flex items-center text-sm text-gray-500"},s.a.createElement(N.a,{className:"h-5 w-5 text-green-500 mr-1"}),s.a.createElement("span",null,"Identit\ufffd v\ufffdrifi\ufffde")),s.a.createElement("div",{className:"flex items-center text-sm text-gray-500 mt-1"},s.a.createElement(N.a,{className:"h-5 w-5 text-green-500 mr-1"}),s.a.createElement("span",null,"Email v\ufffdrifi\ufffd")),s.a.createElement("div",{className:"flex items-center text-sm text-gray-500 mt-1"},s.a.createElement(N.a,{className:"h-5 w-5 text-green-500 mr-1"}),s.a.createElement("span",null,"T\ufffdl\ufffdphone v\ufffdrifi\ufffd"))),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{to:"/transporteurs/"+n.utilisateur._id,variant:"outline",fullWidth:!0},"Voir le profil")))),!T&&s.a.createElement("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Contacter le client")),s.a.createElement("div",{className:"px-6 py-4"},t?s.a.createElement("form",{onSubmit:async a=>{if(a.preventDefault(),!t)return o.toast.error("Vous devez \ufffdtre connect\ufffd pour envoyer un message"),void l("/login",{state:{from:"/annonces/"+e}});if(g.trim())try{C(!0),await u.post("/messages",{contenu:g,destinataire:n.utilisateur._id,annonce:n._id}),o.toast.success("Message envoy\ufffd avec succ\ufffds"),b(""),l(`/dashboard/messages/${n._id}_${n.utilisateur._id}`)}catch(r){console.error("Erreur lors de l'envoi du message:",r),o.toast.error("Erreur lors de l'envoi du message")}finally{C(!1)}else o.toast.error("Veuillez entrer un message")},className:"space-y-4"},s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"contact-message",className:"block text-sm font-medium text-gray-700 mb-1"},"Message ",s.a.createElement("span",{className:"text-red-500"},"*")),s.a.createElement("textarea",{id:"contact-message",name:"contact-message",rows:4,required:!0,className:"block w-full sm:text-sm border-gray-300 rounded-md focus:ring-teal-500 focus:border-teal-500",placeholder:"Posez vos questions au client...",value:g,onChange:e=>b(e.target.value)})),s.a.createElement(w,{type:"submit",variant:"primary",fullWidth:!0,isLoading:j,disabled:j||!g.trim()},s.a.createElement(we.a,{className:"h-5 w-5 mr-2"}),"Envoyer un message")):s.a.createElement("div",{className:"text-center py-4"},s.a.createElement(we.a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.a.createElement("p",{className:"text-gray-500 mb-4"},"Connectez-vous pour contacter le client"),s.a.createElement(w,{to:"/login?redirect=/annonces/"+n._id,variant:"primary"},"Se connecter")),s.a.createElement("div",{className:"mt-4 p-3 bg-blue-50 rounded-md"},s.a.createElement("p",{className:"text-xs text-blue-700"},"En contactant le client, vous acceptez de respecter les r\ufffdgles de notre plateforme. Les n\ufffdgociations et paiements doivent \ufffdtre effectu\ufffds via Pro-Trans pour votre s\ufffdcurit\ufffd.")))))))},ke=a(206),De=a(207);var Se=()=>{const[e,t]=Object(r.useState)([]),[a,l]=Object(r.useState)(!0),[n,m]=Object(r.useState)(null),[c,o]=Object(r.useState)(!1),[i,d]=Object(r.useState)({specialite:"",localisation:"",noteMin:"",typeVehicule:""}),[p,v]=Object(r.useState)(1),[x,g]=Object(r.useState)(1),[E,f]=Object(r.useState)("");Object(r.useEffect)(()=>{(async()=>{try{l(!0);const e={page:p,limit:10,search:E,...i};Object.keys(e).forEach(t=>(""===e[t]||null===e[t])&&delete e[t]);const a=await u.get("/users/transporteurs",{params:e});t(a.data.data),g(a.data.pages||1),m(null)}catch(e){console.error("Erreur lors du chargement des transporteurs:",e),m("Impossible de charger la liste des transporteurs")}finally{l(!1)}})()},[p,E,i]);const y=e=>{const{name:t,value:a}=e.target;d(e=>({...e,[t]:a})),v(1)},N=()=>{d({specialite:"",localisation:"",noteMin:"",typeVehicule:""}),f(""),v(1)};return s.a.createElement("div",{className:"bg-gray-50 min-h-screen"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},s.a.createElement("div",{className:"text-center mb-10"},s.a.createElement("h1",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl"},"Trouvez un transporteur professionnel"),s.a.createElement("p",{className:"mt-3 max-w-2xl mx-auto text-xl text-gray-500 sm:mt-4"},"Des centaines de transporteurs v\ufffdrifi\ufffds pr\ufffdts \ufffd livrer vos marchandises")),s.a.createElement("div",{className:"bg-white shadow rounded-lg mb-8"},s.a.createElement("div",{className:"p-4"},s.a.createElement("form",{onSubmit:e=>{e.preventDefault(),v(1)}},s.a.createElement("div",{className:"flex flex-col md:flex-row gap-4"},s.a.createElement("div",{className:"flex-1 relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(b.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement("input",{type:"text",value:E,onChange:e=>f(e.target.value),placeholder:"Rechercher un transporteur...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})),s.a.createElement("div",null,s.a.createElement(w,{type:"submit",variant:"primary"},"Rechercher")),s.a.createElement("div",null,s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>o(!c)},s.a.createElement(ke.a,{className:"h-5 w-5 mr-1"}),"Filtres"))),c&&s.a.createElement("div",{className:"mt-4 p-4 bg-gray-50 rounded-md"},s.a.createElement("div",{className:"flex justify-between items-center mb-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Filtres avanc\ufffds"),s.a.createElement("button",{type:"button",onClick:N,className:"text-sm text-teal-600 hover:text-teal-500 flex items-center"},s.a.createElement(ve.a,{className:"h-4 w-4 mr-1"}),"R\ufffdinitialiser")),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"specialite",className:"block text-sm font-medium text-gray-700 mb-1"},"Sp\ufffdcialit\ufffd"),s.a.createElement("select",{id:"specialite",name:"specialite",value:i.specialite,onChange:y,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},s.a.createElement("option",{value:""},"Toutes les sp\ufffdcialit\ufffds"),["Colis","Meubles","D\ufffdm\ufffdnagement","Marchandises","V\ufffdhicules","Palette","International"].map(e=>s.a.createElement("option",{key:e,value:e.toLowerCase()},e)))),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"localisation",className:"block text-sm font-medium text-gray-700 mb-1"},"Localisation"),s.a.createElement("input",{type:"text",id:"localisation",name:"localisation",value:i.localisation,onChange:y,placeholder:"Ville ou d\ufffdpartement",className:"block w-full pl-3 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"})),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"noteMin",className:"block text-sm font-medium text-gray-700 mb-1"},"Note minimum"),s.a.createElement("select",{id:"noteMin",name:"noteMin",value:i.noteMin,onChange:y,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},s.a.createElement("option",{value:""},"Toutes les notes"),s.a.createElement("option",{value:"3"},"3 \ufffdtoiles et plus"),s.a.createElement("option",{value:"4"},"4 \ufffdtoiles et plus"),s.a.createElement("option",{value:"4.5"},"4.5 \ufffdtoiles et plus"))),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"typeVehicule",className:"block text-sm font-medium text-gray-700 mb-1"},"Type de v\ufffdhicule"),s.a.createElement("select",{id:"typeVehicule",name:"typeVehicule",value:i.typeVehicule,onChange:y,className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},s.a.createElement("option",{value:""},"Tous les v\ufffdhicules"),["Utilitaire","Camion","Camionnette","Poids lourd","Fourgon","Porte-voiture"].map(e=>s.a.createElement("option",{key:e,value:e.toLowerCase()},e))))))))),a?s.a.createElement("div",{className:"flex justify-center items-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})):n?s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement("div",{className:"flex-shrink-0"},s.a.createElement(ve.a,{className:"h-5 w-5 text-red-400"})),s.a.createElement("div",{className:"ml-3"},s.a.createElement("p",{className:"text-sm text-red-700"},n)))):0===e.length?s.a.createElement("div",{className:"bg-white shadow rounded-lg p-6 text-center"},s.a.createElement(h.a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"Aucun transporteur trouv\ufffd"),s.a.createElement("p",{className:"text-gray-500 mb-4"},"Aucun transporteur ne correspond \ufffd vos crit\ufffdres de recherche."),s.a.createElement(w,{onClick:N,variant:"outline"},"R\ufffdinitialiser les filtres")):s.a.createElement("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3"},e.map(e=>s.a.createElement("div",{key:e._id,className:"bg-white shadow rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("div",{className:"flex items-center mb-4"},s.a.createElement("div",{className:"h-16 w-16 rounded-full overflow-hidden bg-gray-200 flex-shrink-0"},e.photo?s.a.createElement("img",{src:e.photo,alt:`${e.prenom} ${e.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(h.a,{className:"h-8 w-8 text-gray-400 m-4"})),s.a.createElement("div",{className:"ml-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},e.prenom," ",e.nom),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex items-center"},[...Array(5)].map((t,a)=>s.a.createElement(De.a,{key:a,className:"h-4 w-4 "+((e.rating||0)>a?"text-yellow-400":"text-gray-300")}))),s.a.createElement("span",{className:"ml-1 text-sm text-gray-500"},"(",e.nbAvis||0," avis)")))),s.a.createElement("div",{className:"space-y-2 mb-4"},e.specialites&&e.specialites.length>0&&s.a.createElement("div",{className:"flex flex-wrap gap-2"},e.specialites.slice(0,3).map((e,t)=>s.a.createElement("span",{key:t,className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800"},e)),e.specialites.length>3&&s.a.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},"+",e.specialites.length-3)),e.adresse&&e.adresse.ville&&s.a.createElement("div",{className:"flex items-center text-sm text-gray-500"},s.a.createElement(B.a,{className:"h-4 w-4 text-gray-400 mr-1"}),e.adresse.ville,", ",e.adresse.pays||"France"),s.a.createElement("div",{className:"flex items-center text-sm text-gray-500"},s.a.createElement(h.a,{className:"h-4 w-4 text-gray-400 mr-1"}),e.nbLivraisons||0," livraisons effectu\ufffdes")),e.aboutMe&&s.a.createElement("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2"},e.aboutMe),s.a.createElement("div",{className:"mt-4"},s.a.createElement(w,{to:"/transporteurs/"+e._id,variant:"outline",fullWidth:!0},"Voir le profil")))))),!a&&!n&&e.length>0&&x>1&&s.a.createElement("div",{className:"flex justify-center mt-8"},s.a.createElement("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},s.a.createElement("button",{onClick:()=>v(e=>Math.max(e-1,1)),disabled:1===p,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium "+(1===p?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50")},s.a.createElement("span",{className:"sr-only"},"Pr\ufffdc\ufffddent"),s.a.createElement("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},s.a.createElement("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}))),[...Array(x)].map((e,t)=>{const a=t+1;return 1===a||a===x||a>=p-1&&a<=p+1?s.a.createElement("button",{key:a,onClick:()=>v(a),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium "+(p===a?"z-10 bg-teal-50 border-teal-500 text-teal-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50")},a):2===a&&p>3||a===x-1&&p<x-2?s.a.createElement("span",{key:a,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},"..."):null}),s.a.createElement("button",{onClick:()=>v(e=>Math.min(e+1,x)),disabled:p===x,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium "+(p===x?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50")},s.a.createElement("span",{className:"sr-only"},"Suivant"),s.a.createElement("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},s.a.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))))),s.a.createElement("div",{className:"mt-16 bg-teal-700 rounded-lg shadow-xl overflow-hidden"},s.a.createElement("div",{className:"px-4 py-12 sm:px-6 lg:px-8 lg:py-16 flex flex-col md:flex-row md:items-center md:justify-between"},s.a.createElement("div",{className:"max-w-2xl"},s.a.createElement("h2",{className:"text-2xl font-extrabold tracking-tight text-white sm:text-3xl"},"Vous \ufffdtes transporteur ?"),s.a.createElement("p",{className:"mt-3 text-lg text-teal-100"},"Rejoignez notre r\ufffdseau de transporteurs et d\ufffdveloppez votre activit\ufffd avec de nouveaux clients chaque jour.")),s.a.createElement("div",{className:"mt-8 md:mt-0"},s.a.createElement(w,{to:"/register?role=transporteur",variant:"primary",size:"lg",className:"bg-white text-teal-700 hover:bg-gray-100"},"Devenir transporteur"))))))},Ae=a(208);const Oe=e=>{let{rating:t,size:a="md"}=e;const r={sm:"h-3 w-3",md:"h-5 w-5",lg:"h-6 w-6"},l=r[a]||r.md;if(null===t||void 0===t)return s.a.createElement("div",{className:"flex items-center"},[...Array(5)].map((e,t)=>s.a.createElement(je.a,{key:t,className:l+" text-gray-300"})),s.a.createElement("span",{className:"ml-1 text-sm text-gray-500"},"Non \xe9valu\xe9"));const n=Math.floor(t),m=t%1>=.5,c=5-n-(m?1:0);return s.a.createElement("div",{className:"flex items-center"},[...Array(n)].map((e,t)=>s.a.createElement(je.a,{key:"filled-"+t,className:l+" text-yellow-400"})),m&&s.a.createElement("div",{className:"relative"},s.a.createElement(je.a,{className:l+" text-gray-300"}),s.a.createElement("div",{className:"absolute top-0 left-0 w-1/2 overflow-hidden"},s.a.createElement(je.a,{className:l+" text-yellow-400"}))),[...Array(c)].map((e,t)=>s.a.createElement(je.a,{key:"empty-"+t,className:l+" text-gray-300"})),s.a.createElement("span",{className:"ml-1 text-sm text-gray-700"},t.toFixed(1)))},Le=e=>{let{destinataireId:t,annonceId:a,onReviewSubmitted:l}=e;const[n,m]=Object(r.useState)(0),[c,i]=Object(r.useState)(0),[d,p]=Object(r.useState)(""),[v,x]=Object(r.useState)(!1),{user:g}=E(),h=()=>{i(0)};return s.a.createElement("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Laisser un avis"),s.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),0!==n)if(d.trim().length<10)o.toast.error("Veuillez laisser un commentaire d'au moins 10 caract\xe8res");else try{x(!0);const e=await u.post("/avis",{note:n,commentaire:d,destinataireId:t,annonceId:a});o.toast.success("Avis envoy\xe9 avec succ\xe8s"),m(0),p(""),l&&l(e.data.data)}catch(c){var r,s;console.error("Error submitting review:",c),o.toast.error((null===(r=c.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'envoi de l'avis")}finally{x(!1)}else o.toast.error("Veuillez s\xe9lectionner une note")}},s.a.createElement("div",{className:"mb-4"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Note"),s.a.createElement("div",{className:"flex"},[1,2,3,4,5].map(e=>s.a.createElement("button",{key:e,type:"button",className:"focus:outline-none p-1",onClick:()=>(e=>{m(e)})(e),onMouseEnter:()=>(e=>{i(e)})(e),onMouseLeave:h},s.a.createElement(je.a,{className:"h-8 w-8 "+((c||n)>=e?"text-yellow-400":"text-gray-300")}))))),s.a.createElement("div",{className:"mb-4"},s.a.createElement("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2"},"Commentaire"),s.a.createElement("textarea",{id:"comment",name:"comment",rows:"4",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",placeholder:"Partagez votre exp\xe9rience...",value:d,onChange:e=>{p(e.target.value)},required:!0,minLength:10}),s.a.createElement("div",{className:"mt-1 text-xs text-gray-500"},"Minimum 10 caract\xe8res")),s.a.createElement(w,{type:"submit",variant:"primary",isLoading:v,disabled:v||0===n||d.trim().length<10,className:"w-full sm:w-auto"},"Envoyer mon avis")))};var Me=e=>{let{userId:t,showSubmitForm:a=!1,annonceId:l=null}=e;const[n,m]=Object(r.useState)([]),[c,o]=Object(r.useState)(!0),[i,d]=Object(r.useState)(null),[p,v]=Object(r.useState)("recent"),[x,g]=Object(r.useState)(5),[h,b]=Object(r.useState)(null),{user:f}=E();Object(r.useEffect)(()=>{(async()=>{if(t)try{o(!0);const e=await u.get("/avis/utilisateur/"+t);m(e.data.data);const a=e.data.data.length,r=e.data.data.reduce((e,t)=>e+t.note,0),s=a>0?r/a:0,l=[0,0,0,0,0];e.data.data.forEach(e=>{l[e.note-1]++}),b({totalReviews:a,averageRating:s,ratingCounts:l})}catch(e){console.error("Error fetching reviews:",e),d("Erreur lors du chargement des avis")}finally{o(!1)}})()},[t]);if(c)return s.a.createElement("div",{className:"flex items-center justify-center py-8"},s.a.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-teal-500"}));if(i)return s.a.createElement("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert"},s.a.createElement("strong",{className:"font-bold"},"Erreur!"),s.a.createElement("span",{className:"block sm:inline"}," ",i));const y=n.slice(0,x);return s.a.createElement("div",{className:"space-y-6"},a&&f&&f.id!==t&&s.a.createElement(Le,{destinataireId:t,annonceId:l,onReviewSubmitted:e=>{m(t=>{const a=[e,...t];return"recent"===p?a.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)):"highest"===p?a.sort((e,t)=>t.note-e.note):"lowest"===p?a.sort((e,t)=>e.note-t.note):a}),b(t=>{if(!t)return null;const a=t.totalReviews+1,r=(t.totalReviews*t.averageRating+e.note)/a,s=[...t.ratingCounts];return s[e.note-1]++,{totalReviews:a,averageRating:r,ratingCounts:s}})}}),h&&s.a.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200"},s.a.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between"},s.a.createElement("div",{className:"mb-4 md:mb-0"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Note globale"),s.a.createElement("div",{className:"flex items-center mt-1"},s.a.createElement(Oe,{rating:h.averageRating,size:"lg"}),s.a.createElement("span",{className:"ml-2 text-sm text-gray-500"},"(",h.totalReviews," avis)"))),s.a.createElement("div",{className:"space-y-2 flex-1 max-w-xs"},[5,4,3,2,1].map(e=>{const t=h.ratingCounts[e-1],a=h.totalReviews>0?t/h.totalReviews*100:0;return s.a.createElement("div",{key:e,className:"flex items-center text-sm"},s.a.createElement("div",{className:"w-6 text-right mr-2"},e),s.a.createElement(je.a,{className:"h-4 w-4 text-yellow-400 mr-2"}),s.a.createElement("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden"},s.a.createElement("div",{className:"h-full bg-yellow-400 rounded-full",style:{width:a+"%"}})),s.a.createElement("div",{className:"w-8 text-right ml-2 text-xs text-gray-500"},t))})))),s.a.createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("div",{className:"flex justify-between items-center"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Avis (",n.length,")"),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("span",{className:"text-sm text-gray-500 mr-2"},"Trier par:"),s.a.createElement("select",{className:"text-sm border-gray-300 rounded-md shadow-sm focus:border-teal-500 focus:ring-teal-500",value:p,onChange:e=>(e=>{v(e);const t=[...n];"recent"===e?t.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)):"highest"===e?t.sort((e,t)=>t.note-e.note):"lowest"===e&&t.sort((e,t)=>e.note-t.note),m(t)})(e.target.value)},s.a.createElement("option",{value:"recent"},"Plus r\xe9cents"),s.a.createElement("option",{value:"highest"},"Meilleures notes"),s.a.createElement("option",{value:"lowest"},"Moins bonnes notes"))))),0===n.length?s.a.createElement("div",{className:"px-6 py-8 text-center text-gray-500"},"Aucun avis pour le moment"):s.a.createElement(s.a.Fragment,null,s.a.createElement("ul",{className:"divide-y divide-gray-200"},y.map(e=>s.a.createElement("li",{key:e._id,className:"px-6 py-4"},s.a.createElement("div",{className:"flex items-start"},s.a.createElement("div",{className:"flex-shrink-0"},e.auteur.photo?s.a.createElement("img",{src:e.auteur.photo,alt:`${e.auteur.prenom} ${e.auteur.nom}`,className:"h-10 w-10 rounded-full object-cover"}):s.a.createElement(Ae.a,{className:"h-10 w-10 text-gray-400"})),s.a.createElement("div",{className:"ml-3 flex-1"},s.a.createElement("div",{className:"flex justify-between items-start"},s.a.createElement("div",null,s.a.createElement("h4",{className:"text-sm font-medium text-gray-900"},e.auteur.prenom," ",e.auteur.nom),s.a.createElement("div",{className:"mt-1"},s.a.createElement(Oe,{rating:e.note,size:"sm"}))),s.a.createElement("div",{className:"text-sm text-gray-500"},Object(G.default)(new Date(e.createdAt),"d MMM yyyy",{locale:H.a}))),s.a.createElement("div",{className:"mt-2 text-sm text-gray-600"},e.commentaire),e.annonce&&s.a.createElement("div",{className:"mt-2 text-xs text-gray-500"},"Transport: ",e.annonce.titre)))))),x<n.length&&s.a.createElement("div",{className:"px-6 py-4 border-t border-gray-200 text-center"},s.a.createElement("button",{type:"button",className:"text-teal-600 hover:text-teal-700 font-medium",onClick:()=>{g(e=>e+5)}},"Afficher plus d'avis")))))};var Te=()=>{var e,t;const{id:a}=Object(i.t)(),{isAuthenticated:l,user:n}=E(),[m,c]=Object(r.useState)(null),[d,p]=Object(r.useState)(!0),[v,x]=Object(r.useState)(null),[g,b]=Object(r.useState)([]);return Object(r.useEffect)(()=>{a&&(async()=>{try{p(!0);const e=await u.get("/users/profile/"+a);c(e.data.data),e.data.data.recentDeliveries&&b(e.data.data.recentDeliveries),x(null)}catch(e){console.error("Erreur lors du chargement du profil transporteur:",e),x("Impossible de charger les informations du transporteur"),o.toast.error("Erreur lors du chargement du profil transporteur")}finally{p(!1)}})()},[a]),d?s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},s.a.createElement("div",{className:"flex items-center justify-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}))):v||!m?s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement("div",{className:"flex-shrink-0"},s.a.createElement("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},s.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),s.a.createElement("div",{className:"ml-3"},s.a.createElement("p",{className:"text-sm text-red-700"},v||"Ce transporteur n'existe pas ou a \ufffdt\ufffd supprim\ufffd.")))),s.a.createElement("div",{className:"mt-6 text-center"},s.a.createElement(w,{to:"/transporteurs",variant:"primary"},"Retour \ufffd la liste des transporteurs"))):s.a.createElement("div",{className:"bg-gray-50 min-h-screen"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-8"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"h-20 w-20 rounded-full overflow-hidden bg-gray-200 flex-shrink-0"},m.photo?s.a.createElement("img",{src:m.photo,alt:`${m.prenom} ${m.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(Ne.a,{className:"h-12 w-12 text-gray-400 m-4"})),s.a.createElement("div",{className:"ml-6"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},m.prenom," ",m.nom),s.a.createElement("p",{className:"text-sm text-gray-500"},"Membre depuis ",new Date(m.createdAt).toLocaleDateString("fr-FR",{year:"numeric",month:"long"})))),l&&(null===n||void 0===n?void 0:n.id)!==a&&s.a.createElement(w,{to:"/messages/nouveau/"+a,variant:"outline"},s.a.createElement(we.a,{className:"h-5 w-5 mr-2"}),"Contacter")),s.a.createElement("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6"},s.a.createElement("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(h.a,{className:"h-5 w-5 mr-1 text-gray-400"}),"Type de transporteur"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},m.typeTransporteur||"Ind\ufffdpendant")),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(B.a,{className:"h-5 w-5 mr-1 text-gray-400"}),"Localisation"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},(null===(e=m.adresse)||void 0===e?void 0:e.ville)||"Non sp\ufffdcifi\ufffd",", ",(null===(t=m.adresse)||void 0===t?void 0:t.pays)||"France")),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement($.a,{className:"h-5 w-5 mr-1 text-gray-400"}),"Disponibilit\ufffd"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},m.disponibilite||"Flexible")),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Transports effectu\ufffds"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},m.nbLivraisons||"0")),m.specialites&&m.specialites.length>0&&s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Sp\ufffdcialit\ufffds"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},s.a.createElement("div",{className:"flex flex-wrap gap-2"},m.specialites.map((e,t)=>s.a.createElement("span",{key:t,className:"inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-teal-100 text-teal-800"},e))))),m.aboutMe&&s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"A propos"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},m.aboutMe))))),m.vehicules&&m.vehicules.length>0&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-8"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"V\ufffdhicules"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Liste des v\ufffdhicules utilis\ufffds pour le transport")),s.a.createElement("div",{className:"border-t border-gray-200"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("ul",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},m.vehicules.map((e,t)=>s.a.createElement("li",{key:t,className:"border border-gray-200 rounded-lg p-4"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 h-10 w-10 bg-teal-100 rounded-full flex items-center justify-center"},s.a.createElement(h.a,{className:"h-6 w-6 text-teal-600"})),s.a.createElement("div",{className:"ml-4"},s.a.createElement("h3",{className:"text-base font-medium text-gray-900"},e.type||"V\ufffdhicule"," - ",e.marque," ",e.modele),s.a.createElement("p",{className:"text-sm text-gray-500"},e.annee||"",e.capacite&&" - Capacit\ufffd: "+e.capacite))))))))),g&&g.length>0&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-8"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Livraisons r\ufffdcentes"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Aper\ufffdu des derni\ufffdres livraisons effectu\ufffdes")),s.a.createElement("div",{className:"border-t border-gray-200"},s.a.createElement("ul",{className:"divide-y divide-gray-200"},g.map(e=>s.a.createElement("li",{key:e._id,className:"px-4 py-4"},s.a.createElement("div",{className:"flex justify-between items-center"},s.a.createElement("div",null,s.a.createElement("p",{className:"text-sm font-medium text-gray-900"},e.villeDepart," ? ",e.villeArrivee),s.a.createElement("p",{className:"text-sm text-gray-500"},e.typeTransport," - ",new Date(e.dateDepart).toLocaleDateString("fr-FR"))),s.a.createElement("div",null,e.rating&&s.a.createElement("div",{className:"flex items-center"},s.a.createElement("span",{className:"text-yellow-400 mr-1"},"?"),s.a.createElement("span",{className:"text-sm text-gray-600"},e.rating,"/5"))))))))),s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Avis et \ufffdvaluations"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Ce que disent les clients de ",m.prenom)),s.a.createElement("div",{className:"border-t border-gray-200"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement(Me,{userId:a,showSubmitForm:l&&(null===n||void 0===n?void 0:n.id)!==a}))))))},Pe=a(209);var ze=()=>{var e;const{login:t}=E(),a=Object(i.r)(),l=Object(i.p)(),[n,c]=Object(r.useState)(!1),d=(null===(e=l.state)||void 0===e?void 0:e.from)||"/dashboard",u=P.d({email:P.f().email("Adresse email invalide").required("L'email est obligatoire"),password:P.f().required("Le mot de passe est obligatoire")}),p=Object(T.a)({initialValues:{email:"",password:""},validationSchema:u,onSubmit:async e=>{try{c(!0),await t(e),o.toast.success("Connexion r\xe9ussie"),a(d,{replace:!0})}catch(r){o.toast.error(r.message||"\xc9chec de la connexion"),console.error("Erreur de connexion:",r)}finally{c(!1)}}});return s.a.createElement("div",null,s.a.createElement("h2",{className:"text-center text-3xl font-extrabold text-gray-900"},"Connexion \xe0 votre compte"),s.a.createElement("p",{className:"mt-2 text-center text-sm text-gray-600"},"Ou"," ",s.a.createElement(m.b,{to:"/register",className:"font-medium text-teal-600 hover:text-teal-500"},"cr\xe9ez un compte gratuitement")),s.a.createElement("form",{className:"mt-8 space-y-6",onSubmit:p.handleSubmit},s.a.createElement("div",{className:"space-y-4"},s.a.createElement(F,{id:"email",name:"email",type:"email",label:"Adresse email",placeholder:"Votre adresse email",value:p.values.email,onChange:p.handleChange,onBlur:p.handleBlur,error:p.touched.email&&p.errors.email,touched:p.touched.email,required:!0,icon:s.a.createElement(q.a,{className:"h-5 w-5 text-gray-400"})}),s.a.createElement(F,{id:"password",name:"password",type:"password",label:"Mot de passe",placeholder:"Votre mot de passe",value:p.values.password,onChange:p.handleChange,onBlur:p.handleBlur,error:p.touched.password&&p.errors.password,touched:p.touched.password,required:!0,icon:s.a.createElement(Pe.a,{className:"h-5 w-5 text-gray-400"})})),s.a.createElement("div",{className:"flex items-center justify-between"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"}),s.a.createElement("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900"},"Se souvenir de moi")),s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/forgot-password",className:"font-medium text-teal-600 hover:text-teal-500"},"Mot de passe oubli\xe9?"))),s.a.createElement("div",null,s.a.createElement(w,{type:"submit",variant:"primary",fullWidth:!0,isLoading:n,disabled:n},"Se connecter"))))};var qe=()=>{const{register:e}=E(),t=Object(i.r)(),[a,l]=Object(r.useState)(!1),n=P.d({nom:P.f().required("Le nom est obligatoire").min(2,"Le nom doit comporter au moins 2 caract\ufffdres").max(50,"Le nom ne doit pas d\ufffdpasser 50 caract\ufffdres"),prenom:P.f().required("Le pr\ufffdnom est obligatoire").min(2,"Le pr\ufffdnom doit comporter au moins 2 caract\ufffdres").max(50,"Le pr\ufffdnom ne doit pas d\ufffdpasser 50 caract\ufffdres"),email:P.f().required("L'email est obligatoire").email("Format d'email invalide"),telephone:P.f().required("Le num\ufffdro de t\ufffdl\ufffdphone est obligatoire").matches(/^(\+33|0)[1-9](\d{2}){4}$/,"Format de t\ufffdl\ufffdphone invalide (ex: 0612345678 ou +33612345678)"),password:P.f().required("Le mot de passe est obligatoire").min(8,"Le mot de passe doit comporter au moins 8 caract\ufffdres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Le mot de passe doit contenir au moins une majuscule, une minuscule et un chiffre"),passwordConfirm:P.f().required("La confirmation du mot de passe est obligatoire").oneOf([P.e("password"),null],"Les mots de passe ne correspondent pas"),role:P.f().required("Le r\ufffdle est obligatoire").oneOf(["client","transporteur"],"R\ufffdle invalide"),acceptTerms:P.a().required("Vous devez accepter les conditions g\ufffdn\ufffdrales").oneOf([!0],"Vous devez accepter les conditions g\ufffdn\ufffdrales")}),c=Object(T.a)({initialValues:{nom:"",prenom:"",email:"",telephone:"",password:"",passwordConfirm:"",role:"client",acceptTerms:!1},validationSchema:n,onSubmit:async a=>{try{l(!0),await e(a),o.toast.success("Inscription r\ufffdussie ! Bienvenue sur Pro-Trans"),t("/dashboard")}catch(r){o.toast.error(r.message||"Echec de l'inscription"),console.error("Erreur d'inscription:",r)}finally{l(!1)}}});return s.a.createElement("div",null,s.a.createElement("h2",{className:"text-center text-3xl font-extrabold text-gray-900"},"Cr\ufffder votre compte"),s.a.createElement("p",{className:"mt-2 text-center text-sm text-gray-600"},"Ou"," ",s.a.createElement(m.b,{to:"/login",className:"font-medium text-teal-600 hover:text-teal-500"},"connectez-vous \ufffd votre compte existant")),s.a.createElement("form",{className:"mt-8 space-y-6",onSubmit:c.handleSubmit},s.a.createElement("div",{className:"space-y-4"},s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},s.a.createElement(F,{id:"prenom",name:"prenom",type:"text",label:"Pr\ufffdnom",placeholder:"Votre pr\ufffdnom",value:c.values.prenom,onChange:c.handleChange,onBlur:c.handleBlur,error:c.touched.prenom&&c.errors.prenom,touched:c.touched.prenom,required:!0,icon:s.a.createElement(Ne.a,{className:"h-5 w-5 text-gray-400"})}),s.a.createElement(F,{id:"nom",name:"nom",type:"text",label:"Nom",placeholder:"Votre nom",value:c.values.nom,onChange:c.handleChange,onBlur:c.handleBlur,error:c.touched.nom&&c.errors.nom,touched:c.touched.nom,required:!0,icon:s.a.createElement(Ne.a,{className:"h-5 w-5 text-gray-400"})})),s.a.createElement(F,{id:"email",name:"email",type:"email",label:"Adresse email",placeholder:"Votre adresse email",value:c.values.email,onChange:c.handleChange,onBlur:c.handleBlur,error:c.touched.email&&c.errors.email,touched:c.touched.email,required:!0,icon:s.a.createElement(q.a,{className:"h-5 w-5 text-gray-400"})}),s.a.createElement(F,{id:"telephone",name:"telephone",type:"tel",label:"T\ufffdl\ufffdphone",placeholder:"Votre num\ufffdro de t\ufffdl\ufffdphone",value:c.values.telephone,onChange:c.handleChange,onBlur:c.handleBlur,error:c.touched.telephone&&c.errors.telephone,touched:c.touched.telephone,required:!0,icon:s.a.createElement(z.a,{className:"h-5 w-5 text-gray-400"}),helperText:"Format: 0612345678 ou +33612345678"}),s.a.createElement(F,{id:"password",name:"password",type:"password",label:"Mot de passe",placeholder:"Votre mot de passe",value:c.values.password,onChange:c.handleChange,onBlur:c.handleBlur,error:c.touched.password&&c.errors.password,touched:c.touched.password,required:!0,icon:s.a.createElement(Pe.a,{className:"h-5 w-5 text-gray-400"}),helperText:"Min. 8 caract\ufffdres avec au moins 1 majuscule, 1 minuscule et 1 chiffre"}),s.a.createElement(F,{id:"passwordConfirm",name:"passwordConfirm",type:"password",label:"Confirmer le mot de passe",placeholder:"Confirmez votre mot de passe",value:c.values.passwordConfirm,onChange:c.handleChange,onBlur:c.handleBlur,error:c.touched.passwordConfirm&&c.errors.passwordConfirm,touched:c.touched.passwordConfirm,required:!0,icon:s.a.createElement(Pe.a,{className:"h-5 w-5 text-gray-400"})}),s.a.createElement("div",{className:"mt-4"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Je m'inscris en tant que",s.a.createElement("span",{className:"text-red-500 ml-1"},"*")),s.a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},s.a.createElement("div",{className:"border rounded-lg p-4 cursor-pointer transition-colors "+("client"===c.values.role?"border-teal-500 bg-teal-50 text-teal-700":"border-gray-200 hover:border-gray-300"),onClick:()=>c.setFieldValue("role","client")},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{type:"radio",name:"role",id:"role-client",value:"client",checked:"client"===c.values.role,onChange:c.handleChange,className:"h-4 w-4 text-teal-600 border-gray-300 focus:ring-teal-500"}),s.a.createElement("label",{htmlFor:"role-client",className:"ml-3 block font-medium cursor-pointer"},"Client")),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500 ml-7"},"Je souhaite faire transporter des marchandises")),s.a.createElement("div",{className:"border rounded-lg p-4 cursor-pointer transition-colors "+("transporteur"===c.values.role?"border-teal-500 bg-teal-50 text-teal-700":"border-gray-200 hover:border-gray-300"),onClick:()=>c.setFieldValue("role","transporteur")},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{type:"radio",name:"role",id:"role-transporteur",value:"transporteur",checked:"transporteur"===c.values.role,onChange:c.handleChange,className:"h-4 w-4 text-teal-600 border-gray-300 focus:ring-teal-500"}),s.a.createElement("label",{htmlFor:"role-transporteur",className:"ml-3 block font-medium cursor-pointer"},"Transporteur")),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500 ml-7"},"Je propose des services de transport"))),c.touched.role&&c.errors.role&&s.a.createElement("p",{className:"mt-1 text-sm text-red-600"},c.errors.role)),s.a.createElement("div",{className:"flex items-center mt-4"},s.a.createElement("input",{id:"acceptTerms",name:"acceptTerms",type:"checkbox",checked:c.values.acceptTerms,onChange:c.handleChange,onBlur:c.handleBlur,className:"h-4 w-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500"}),s.a.createElement("label",{htmlFor:"acceptTerms",className:"ml-2 block text-sm text-gray-900"},"J'accepte les"," ",s.a.createElement(m.b,{to:"/cgu",className:"font-medium text-teal-600 hover:text-teal-500"},"conditions g\ufffdn\ufffdrales d'utilisation")," ","et la"," ",s.a.createElement(m.b,{to:"/politique-confidentialite",className:"font-medium text-teal-600 hover:text-teal-500"},"politique de confidentialit\ufffd"),s.a.createElement("span",{className:"text-red-500 ml-1"},"*"))),c.touched.acceptTerms&&c.errors.acceptTerms&&s.a.createElement("p",{className:"mt-1 text-sm text-red-600"},c.errors.acceptTerms)),s.a.createElement("div",null,s.a.createElement(w,{type:"submit",variant:"primary",fullWidth:!0,isLoading:a,disabled:a},"Cr\ufffder mon compte"))))};var Be=()=>s.a.createElement("div",null,s.a.createElement("h1",null,"ForgotPasswordPage"),s.a.createElement("p",null,"Cette page est en cours de d\ufffdveloppement."));var Ve=()=>s.a.createElement("div",null,s.a.createElement("h1",null,"ResetPasswordPage"),s.a.createElement("p",null,"Cette page est en cours de d\ufffdveloppement."));var Fe=()=>s.a.createElement("div",null,s.a.createElement("h1",null,"VerifyEmailPage"),s.a.createElement("p",null,"Cette page est en cours de d\ufffdveloppement.")),Re=a(210),Ie=a(211);var _e=()=>{const{user:e}=E(),[t,a]=Object(r.useState)(null),[l,n]=Object(r.useState)({annonces:[],devis:[],messages:[]}),[c,i]=Object(r.useState)(!0),[d,p]=Object(r.useState)(null);if(Object(r.useEffect)(()=>{(async()=>{try{i(!0);const t="transporteur"===e.role?"/dashboard/transporteur":"/dashboard/client",r=await u.get(t);a(r.data.data.stats),n({annonces:r.data.data.recentAnnonces||[],devis:r.data.data.recentDevis||[],messages:r.data.data.recentMessages||[]}),p(null)}catch(t){console.error("Erreur lors du chargement du tableau de bord:",t),p("Erreur lors du chargement des donn\ufffdes. Veuillez r\ufffdessayer."),o.toast.error("Erreur lors du chargement des donn\ufffdes")}finally{i(!1)}})()},[e.role]),c)return s.a.createElement("div",{className:"flex justify-center items-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}));if(d)return s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-500 mr-2"}),s.a.createElement("div",null,s.a.createElement("p",{className:"text-red-700"},d),s.a.createElement(w,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>window.location.reload()},"R\ufffdessayer"))));const v=()=>{var e,a,r,n,c;return s.a.createElement("div",{className:"space-y-6"},s.a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"p-5"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 bg-teal-500 rounded-md p-3"},s.a.createElement(Re.a,{className:"h-6 w-6 text-white"})),s.a.createElement("div",{className:"ml-5 w-0 flex-1"},s.a.createElement("dl",null,s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},"Annonces Actives"),s.a.createElement("dd",{className:"flex items-baseline"},s.a.createElement("div",{className:"text-2xl font-semibold text-gray-900"},(null===t||void 0===t||null===(e=t.annonces)||void 0===e?void 0:e.actives)||0)))))),s.a.createElement("div",{className:"bg-gray-50 px-5 py-3"},s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/dashboard/annonces",className:"font-medium text-teal-700 hover:text-teal-900 flex items-center"},"Voir toutes mes annonces",s.a.createElement(Ie.a,{className:"ml-1 h-4 w-4"}))))),s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"p-5"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3"},s.a.createElement(h.a,{className:"h-6 w-6 text-white"})),s.a.createElement("div",{className:"ml-5 w-0 flex-1"},s.a.createElement("dl",null,s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},"Devis en Attente"),s.a.createElement("dd",{className:"flex items-baseline"},s.a.createElement("div",{className:"text-2xl font-semibold text-gray-900"},(null===t||void 0===t||null===(a=t.devis)||void 0===a?void 0:a.enAttente)||0)))))),s.a.createElement("div",{className:"bg-gray-50 px-5 py-3"},s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/dashboard/devis",className:"font-medium text-teal-700 hover:text-teal-900 flex items-center"},"Voir tous mes devis",s.a.createElement(Ie.a,{className:"ml-1 h-4 w-4"}))))),s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"p-5"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 bg-indigo-500 rounded-md p-3"},s.a.createElement(we.a,{className:"h-6 w-6 text-white"})),s.a.createElement("div",{className:"ml-5 w-0 flex-1"},s.a.createElement("dl",null,s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},"Messages non lus"),s.a.createElement("dd",{className:"flex items-baseline"},s.a.createElement("div",{className:"text-2xl font-semibold text-gray-900"},(null===t||void 0===t||null===(r=t.messages)||void 0===r?void 0:r.nonLus)||0)))))),s.a.createElement("div",{className:"bg-gray-50 px-5 py-3"},s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/dashboard/messages",className:"font-medium text-teal-700 hover:text-teal-900 flex items-center"},"Voir tous mes messages",s.a.createElement(Ie.a,{className:"ml-1 h-4 w-4"}))))),s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"p-5"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 bg-yellow-500 rounded-md p-3"},s.a.createElement(De.a,{className:"h-6 w-6 text-white"})),s.a.createElement("div",{className:"ml-5 w-0 flex-1"},s.a.createElement("dl",null,s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},"Avis Re\ufffdus"),s.a.createElement("dd",{className:"flex items-baseline"},s.a.createElement("div",{className:"text-2xl font-semibold text-gray-900"},(null===t||void 0===t||null===(n=t.avis)||void 0===n?void 0:n.total)||0),(null===t||void 0===t||null===(c=t.avis)||void 0===c?void 0:c.note)&&s.a.createElement("div",{className:"ml-2 flex items-baseline text-sm font-semibold text-green-600"},t.avis.note.toFixed(1)," / 5")))))),s.a.createElement("div",{className:"bg-gray-50 px-5 py-3"},s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/dashboard/avis",className:"font-medium text-teal-700 hover:text-teal-900 flex items-center"},"Voir tous mes avis",s.a.createElement(Ie.a,{className:"ml-1 h-4 w-4"})))))),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Actions rapides")),s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},s.a.createElement(w,{to:"/dashboard/annonces/create",variant:"primary"},s.a.createElement(Re.a,{className:"h-5 w-5 mr-2"}),"Cr\ufffder une nouvelle annonce"),s.a.createElement(w,{to:"/transporteurs",variant:"outline"},s.a.createElement(h.a,{className:"h-5 w-5 mr-2"}),"Rechercher un transporteur")))),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Mes derni\ufffdres annonces")),s.a.createElement("div",{className:"divide-y divide-gray-200"},0===l.annonces.length?s.a.createElement("div",{className:"px-6 py-8 text-center text-gray-500"},s.a.createElement(Re.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("p",{className:"mt-2 text-sm"},"Vous n'avez pas encore cr\ufffd\ufffd d'annonce."),s.a.createElement(w,{to:"/dashboard/annonces/create",variant:"primary",className:"mt-3"},"Cr\ufffder ma premi\ufffdre annonce")):l.annonces.map(e=>s.a.createElement("div",{key:e._id,className:"px-6 py-4 hover:bg-gray-50"},s.a.createElement("div",{className:"flex justify-between items-start"},s.a.createElement("div",null,s.a.createElement(m.b,{to:"/dashboard/annonces/"+e._id,className:"text-lg font-medium text-gray-900 hover:text-teal-600"},e.titre),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},e.villeDepart," ? ",e.villeArrivee)),s.a.createElement("div",{className:"flex flex-col items-end"},s.a.createElement("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("disponible"===e.statut?"bg-green-100 text-green-800":"en_cours"===e.statut?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800")},"disponible"===e.statut?"Disponible":"en_cours"===e.statut?"En cours":"Termin\ufffde"),s.a.createElement("span",{className:"mt-1 text-xs text-gray-500"},Object(G.default)(new Date(e.dateDepart),"dd MMMM yyyy",{locale:H.a}))))))),l.annonces.length>0&&s.a.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200"},s.a.createElement(m.b,{to:"/dashboard/annonces",className:"text-sm font-medium text-teal-600 hover:text-teal-500"},"Voir toutes mes annonces"))),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Mes derniers devis")),s.a.createElement("div",{className:"divide-y divide-gray-200"},0===l.devis.length?s.a.createElement("div",{className:"px-6 py-8 text-center text-gray-500"},s.a.createElement(h.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("p",{className:"mt-2 text-sm"},"Vous n'avez pas encore re\ufffdu de devis."),s.a.createElement(w,{to:"/dashboard/annonces/create",variant:"primary",className:"mt-3"},"Cr\ufffder une annonce pour recevoir des devis")):l.devis.map(e=>s.a.createElement("div",{key:e._id,className:"px-6 py-4 hover:bg-gray-50"},s.a.createElement("div",{className:"flex justify-between items-start"},s.a.createElement("div",null,s.a.createElement(m.b,{to:"/dashboard/devis/"+e._id,className:"text-lg font-medium text-gray-900 hover:text-teal-600"},"Devis pour: ",e.annonce.titre),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Par: ",e.transporteur.prenom," ",e.transporteur.nom)),s.a.createElement("div",{className:"flex flex-col items-end"},s.a.createElement("span",{className:"text-lg font-bold text-gray-900"},e.montant.toFixed(2)," \ufffd"),s.a.createElement("span",{className:"mt-1 px-2 py-1 text-xs font-medium rounded-full "+("en_attente"===e.statut?"bg-yellow-100 text-yellow-800":"accepte"===e.statut?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},"en_attente"===e.statut?"En attente":"accepte"===e.statut?"Accept\ufffd":"Refus\ufffd")))))),l.devis.length>0&&s.a.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200"},s.a.createElement(m.b,{to:"/dashboard/devis",className:"text-sm font-medium text-teal-600 hover:text-teal-500"},"Voir tous mes devis"))))},x=()=>{var e,a,r,n,c;return s.a.createElement("div",{className:"space-y-6"},s.a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"p-5"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3"},s.a.createElement(h.a,{className:"h-6 w-6 text-white"})),s.a.createElement("div",{className:"ml-5 w-0 flex-1"},s.a.createElement("dl",null,s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},"Devis Envoy\ufffds"),s.a.createElement("dd",{className:"flex items-baseline"},s.a.createElement("div",{className:"text-2xl font-semibold text-gray-900"},(null===t||void 0===t||null===(e=t.devis)||void 0===e?void 0:e.envoyes)||0)))))),s.a.createElement("div",{className:"bg-gray-50 px-5 py-3"},s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/dashboard/devis",className:"font-medium text-teal-700 hover:text-teal-900 flex items-center"},"Voir tous mes devis",s.a.createElement(Ie.a,{className:"ml-1 h-4 w-4"}))))),s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"p-5"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 bg-indigo-500 rounded-md p-3"},s.a.createElement(f.a,{className:"h-6 w-6 text-white"})),s.a.createElement("div",{className:"ml-5 w-0 flex-1"},s.a.createElement("dl",null,s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},"Transports en cours"),s.a.createElement("dd",{className:"flex items-baseline"},s.a.createElement("div",{className:"text-2xl font-semibold text-gray-900"},(null===t||void 0===t||null===(a=t.transports)||void 0===a?void 0:a.enCours)||0)))))),s.a.createElement("div",{className:"bg-gray-50 px-5 py-3"},s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/dashboard/devis?statut=en_cours",className:"font-medium text-teal-700 hover:text-teal-900 flex items-center"},"Voir les transports en cours",s.a.createElement(Ie.a,{className:"ml-1 h-4 w-4"}))))),s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"p-5"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 bg-purple-500 rounded-md p-3"},s.a.createElement(we.a,{className:"h-6 w-6 text-white"})),s.a.createElement("div",{className:"ml-5 w-0 flex-1"},s.a.createElement("dl",null,s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},"Messages non lus"),s.a.createElement("dd",{className:"flex items-baseline"},s.a.createElement("div",{className:"text-2xl font-semibold text-gray-900"},(null===t||void 0===t||null===(r=t.messages)||void 0===r?void 0:r.nonLus)||0)))))),s.a.createElement("div",{className:"bg-gray-50 px-5 py-3"},s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/dashboard/messages",className:"font-medium text-teal-700 hover:text-teal-900 flex items-center"},"Voir tous mes messages",s.a.createElement(Ie.a,{className:"ml-1 h-4 w-4"}))))),s.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},s.a.createElement("div",{className:"p-5"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 bg-yellow-500 rounded-md p-3"},s.a.createElement(De.a,{className:"h-6 w-6 text-white"})),s.a.createElement("div",{className:"ml-5 w-0 flex-1"},s.a.createElement("dl",null,s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},"Avis Re\ufffdus"),s.a.createElement("dd",{className:"flex items-baseline"},s.a.createElement("div",{className:"text-2xl font-semibold text-gray-900"},(null===t||void 0===t||null===(n=t.avis)||void 0===n?void 0:n.total)||0),(null===t||void 0===t||null===(c=t.avis)||void 0===c?void 0:c.note)&&s.a.createElement("div",{className:"ml-2 flex items-baseline text-sm font-semibold text-green-600"},t.avis.note.toFixed(1)," / 5")))))),s.a.createElement("div",{className:"bg-gray-50 px-5 py-3"},s.a.createElement("div",{className:"text-sm"},s.a.createElement(m.b,{to:"/dashboard/avis",className:"font-medium text-teal-700 hover:text-teal-900 flex items-center"},"Voir tous mes avis",s.a.createElement(Ie.a,{className:"ml-1 h-4 w-4"})))))),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Actions rapides")),s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},s.a.createElement(w,{to:"/annonces",variant:"primary"},s.a.createElement(Re.a,{className:"h-5 w-5 mr-2"}),"Rechercher des annonces"),s.a.createElement(w,{to:"/dashboard/profile",variant:"outline"},s.a.createElement(h.a,{className:"h-5 w-5 mr-2"}),"Mettre \ufffd jour mon profil")))),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Derni\ufffdres annonces disponibles")),s.a.createElement("div",{className:"divide-y divide-gray-200"},0===l.annonces.length?s.a.createElement("div",{className:"px-6 py-8 text-center text-gray-500"},s.a.createElement(Re.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("p",{className:"mt-2 text-sm"},"Aucune annonce disponible pour le moment."),s.a.createElement(w,{to:"/annonces",variant:"primary",className:"mt-3"},"Rechercher des annonces")):l.annonces.map(e=>s.a.createElement("div",{key:e._id,className:"px-6 py-4 hover:bg-gray-50"},s.a.createElement("div",{className:"flex justify-between items-start"},s.a.createElement("div",null,s.a.createElement(m.b,{to:"/annonces/"+e._id,className:"text-lg font-medium text-gray-900 hover:text-teal-600"},e.titre),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},e.villeDepart," ? ",e.villeArrivee)),s.a.createElement("div",{className:"flex flex-col items-end"},s.a.createElement("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800"},"Disponible"),s.a.createElement("span",{className:"mt-1 text-xs text-gray-500"},Object(G.default)(new Date(e.dateDepart),"dd MMMM yyyy",{locale:H.a}))))))),l.annonces.length>0&&s.a.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200"},s.a.createElement(m.b,{to:"/annonces",className:"text-sm font-medium text-teal-600 hover:text-teal-500"},"Voir toutes les annonces"))),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Mes derniers devis")),s.a.createElement("div",{className:"divide-y divide-gray-200"},0===l.devis.length?s.a.createElement("div",{className:"px-6 py-8 text-center text-gray-500"},s.a.createElement(h.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("p",{className:"mt-2 text-sm"},"Vous n'avez pas encore envoy\ufffd de devis."),s.a.createElement(w,{to:"/annonces",variant:"primary",className:"mt-3"},"Rechercher des annonces pour proposer vos services")):l.devis.map(e=>s.a.createElement("div",{key:e._id,className:"px-6 py-4 hover:bg-gray-50"},s.a.createElement("div",{className:"flex justify-between items-start"},s.a.createElement("div",null,s.a.createElement(m.b,{to:"/dashboard/devis/"+e._id,className:"text-lg font-medium text-gray-900 hover:text-teal-600"},"Devis pour: ",e.annonce.titre),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Client: ",e.client.prenom," ",e.client.nom)),s.a.createElement("div",{className:"flex flex-col items-end"},s.a.createElement("span",{className:"text-lg font-bold text-gray-900"},e.montant.toFixed(2)," \ufffd"),s.a.createElement("span",{className:"mt-1 px-2 py-1 text-xs font-medium rounded-full "+("en_attente"===e.statut?"bg-yellow-100 text-yellow-800":"accepte"===e.statut?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},"en_attente"===e.statut?"En attente":"accepte"===e.statut?"Accept\ufffd":"Refus\ufffd")))))),l.devis.length>0&&s.a.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200"},s.a.createElement(m.b,{to:"/dashboard/devis",className:"text-sm font-medium text-teal-600 hover:text-teal-500"},"Voir tous mes devis"))))};return s.a.createElement("div",null,s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-6"},"Tableau de bord"),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden mb-6"},s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("h2",{className:"text-xl font-medium text-gray-900"},"Bienvenue, ",e.prenom," !"),s.a.createElement("p",{className:"mt-1 text-gray-600"},"client"===e.role?"Voici un aper\ufffdu de vos activit\ufffds et des outils pour g\ufffdrer vos transports.":"Voici un aper\ufffdu de vos activit\ufffds et des opportunit\ufffds de transport disponibles."))),"client"===e.role?s.a.createElement(v,null):s.a.createElement(x,null))},$e=a(212),Ue=a(213);var Je=()=>{const{user:e}=E(),[t,a]=Object(r.useState)(null),[l,n]=Object(r.useState)(!0),[m,c]=Object(r.useState)(null);if(Object(r.useEffect)(()=>{(async()=>{try{n(!0);const e=await u.get("/users/profile");a(e.data.data),c(null)}catch(e){console.error("Erreur lors du chargement du profil:",e),c("Erreur lors du chargement du profil"),o.toast.error("Erreur lors du chargement du profil")}finally{n(!1)}})()},[]),l)return s.a.createElement("div",{className:"flex justify-center items-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}));if(m)return s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement("div",{className:"flex-shrink-0"},s.a.createElement("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},s.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),s.a.createElement("div",{className:"ml-3"},s.a.createElement("p",{className:"text-sm text-red-700"},m))));if(!t)return s.a.createElement("div",{className:"text-center py-12"},s.a.createElement("p",{className:"text-gray-500"},"Aucune information de profil disponible"));const i=()=>{var a,r,l,n,m,c,o,i;return"transporteur"!==e.role?null:s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center"},s.a.createElement("div",null,s.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"Information transporteur"),s.a.createElement("p",{className:"mt-1 max-w-2xl text-sm text-gray-500"},"D\ufffdtails de votre activit\ufffd de transport"))),s.a.createElement("div",{className:"border-t border-gray-200"},s.a.createElement("dl",null,s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Type de v\ufffdhicule"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},(null===(a=t.transporteur)||void 0===a?void 0:a.typeVehicule)||"Non sp\ufffdcifi\ufffd")),s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Capacit\ufffd (poids)"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},(null===(r=t.transporteur)||void 0===r?void 0:r.capacitePoids)?t.transporteur.capacitePoids+" kg":"Non sp\ufffdcifi\ufffd")),s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Capacit\ufffd (volume)"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},(null===(l=t.transporteur)||void 0===l?void 0:l.capaciteVolume)?t.transporteur.capaciteVolume+" m\ufffd":"Non sp\ufffdcifi\ufffd")),s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Zones desservies"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},(null===(n=t.transporteur)||void 0===n||null===(m=n.zonesDesservies)||void 0===m?void 0:m.join(", "))||"Non sp\ufffdcifi\ufffd")),s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Assurance"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},(null===(c=t.transporteur)||void 0===c?void 0:c.assurance)?"V\ufffdrifi\ufffd":"Non v\ufffdrifi\ufffd")),s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Statut de v\ufffdrification"),s.a.createElement("dd",{className:"mt-1 text-sm sm:mt-0 sm:col-span-2"},s.a.createElement("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+((null===(o=t.transporteur)||void 0===o?void 0:o.verifie)?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800")},(null===(i=t.transporteur)||void 0===i?void 0:i.verifie)?"V\ufffdrifi\ufffd":"En attente de v\ufffdrification"))))))};return s.a.createElement("div",{className:"space-y-6"},s.a.createElement("div",{className:"flex justify-between items-center"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Mon profil"),s.a.createElement(w,{to:"/profile/edit",variant:"primary"},s.a.createElement($e.a,{className:"h-5 w-5 mr-2"}),"Modifier mon profil")),s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6 flex items-start"},s.a.createElement("div",{className:"flex-shrink-0 h-20 w-20 rounded-full overflow-hidden bg-gray-200 mr-4"},t.photo?s.a.createElement("img",{src:t.photo,alt:`${t.prenom} ${t.nom}`,className:"h-full w-full object-cover"}):s.a.createElement("div",{className:"h-full w-full flex items-center justify-center bg-teal-500 text-white"},s.a.createElement(Ne.a,{className:"h-10 w-10"}))),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-xl font-bold text-gray-900"},t.prenom," ",t.nom),s.a.createElement("p",{className:"mt-1 max-w-2xl text-sm text-gray-500 flex items-center"},s.a.createElement("span",{className:"mr-2 px-2 py-1 text-xs font-medium rounded-full "+("transporteur"===t.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800")},"transporteur"===t.role?"Transporteur":"Client"),s.a.createElement("span",null,"Membre depuis ",Q(t.createdAt,"MMMM yyyy"))))),s.a.createElement("div",{className:"border-t border-gray-200"},s.a.createElement("dl",null,s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(q.a,{className:"h-5 w-5 mr-2 text-gray-400"}),"Email"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},t.email)),s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(z.a,{className:"h-5 w-5 mr-2 text-gray-400"}),"T\ufffdl\ufffdphone"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},t.telephone)),s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(B.a,{className:"h-5 w-5 mr-2 text-gray-400"}),"Adresse"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},t.adresse?s.a.createElement(s.a.Fragment,null,t.adresse.rue,s.a.createElement("br",null),t.adresse.codePostal," ",t.adresse.ville,s.a.createElement("br",null),t.adresse.pays):"Non sp\ufffdcifi\ufffde")),s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(Ue.a,{className:"h-5 w-5 mr-2 text-gray-400"}),"SIRET (si professionnel)"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},t.siret||"Non sp\ufffdcifi\ufffd")),s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Description"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 whitespace-pre-line"},t.description||"Aucune description"))))),s.a.createElement(i,null),s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg p-6"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center"},s.a.createElement(De.a,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Avis et \ufffdvaluations"),s.a.createElement(Me,{userId:e.id})))},We=a(42);var Ge={getTransporteurs:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await u.get("/users/transporteurs",{params:e})).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration des transporteurs"}}},getUserProfile:async e=>{try{return(await u.get("/users/profile/"+e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration du profil utilisateur"}}},getMyProfile:async()=>{try{return(await u.get("/users/profile")).data}catch(t){var e;throw(null===(e=t.response)||void 0===e?void 0:e.data)||{message:"Erreur lors de la r\xe9cup\xe9ration de votre profil"}}},updateProfile:async e=>{try{return(await u.put("/users/profile",e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la mise \xe0 jour du profil"}}},uploadProfilePhoto:async e=>{try{return(await u.post("/users/profile/upload-photo",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors du t\xe9l\xe9chargement de la photo"}}},uploadDocuments:async e=>{try{return(await u.post("/users/profile/upload-documents",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors du t\xe9l\xe9chargement des documents"}}},updatePassword:async e=>{try{return(await u.put("/users/profile/update-password",e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la mise \xe0 jour du mot de passe"}}}};var He=()=>{var e,t,a,l,n,m,c,d,u,p,v,x,g,h,b,f,y;const{user:N,updateUserProfile:j}=E(),C=Object(i.r)(),[k,D]=Object(r.useState)(!1),[S,A]=Object(r.useState)(null),[O,L]=Object(r.useState)([]),[M,V]=Object(r.useState)(!1),[R,_]=Object(r.useState)(!1),[$,U]=Object(r.useState)("profile"),[J,W]=Object(r.useState)([]),[G,H]=Object(r.useState)(""),Q=P.d({prenom:P.f().required("Le pr\ufffdnom est obligatoire").min(2,"Le pr\ufffdnom doit comporter au moins 2 caract\ufffdres").max(50,"Le pr\ufffdnom ne doit pas d\ufffdpasser 50 caract\ufffdres"),nom:P.f().required("Le nom est obligatoire").min(2,"Le nom doit comporter au moins 2 caract\ufffdres").max(50,"Le nom ne doit pas d\ufffdpasser 50 caract\ufffdres"),telephone:P.f().required("Le num\ufffdro de t\ufffdl\ufffdphone est obligatoire").matches(/^((\+)33|0)[1-9](\d{2}){4}$/,"Le format du num\ufffdro de t\ufffdl\ufffdphone est invalide (ex: 0612345678 ou +33612345678)"),"adresse.rue":P.f().required("L'adresse est obligatoire"),"adresse.codePostal":P.f().required("Le code postal est obligatoire").matches(/^\d{5}$/,"Le code postal doit contenir 5 chiffres"),"adresse.ville":P.f().required("La ville est obligatoire"),"adresse.pays":P.f().required("Le pays est obligatoire"),aboutMe:P.f().max(500,"La description ne doit pas d\ufffdpasser 500 caract\ufffdres")}),Y=P.d({currentPassword:P.f().required("Le mot de passe actuel est obligatoire"),newPassword:P.f().required("Le nouveau mot de passe est obligatoire").min(8,"Le mot de passe doit contenir au moins 8 caract\ufffdres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Le mot de passe doit contenir au moins une majuscule, une minuscule et un chiffre"),confirmPassword:P.f().required("La confirmation du mot de passe est obligatoire").oneOf([P.e("newPassword"),null],"Les mots de passe ne correspondent pas")}),Z=Object(T.a)({initialValues:{prenom:(null===N||void 0===N?void 0:N.prenom)||"",nom:(null===N||void 0===N?void 0:N.nom)||"",email:(null===N||void 0===N?void 0:N.email)||"",telephone:(null===N||void 0===N?void 0:N.telephone)||"",adresse:{rue:(null===N||void 0===N||null===(e=N.adresse)||void 0===e?void 0:e.rue)||"",codePostal:(null===N||void 0===N||null===(t=N.adresse)||void 0===t?void 0:t.codePostal)||"",ville:(null===N||void 0===N||null===(a=N.adresse)||void 0===a?void 0:a.ville)||"",pays:(null===N||void 0===N||null===(l=N.adresse)||void 0===l?void 0:l.pays)||"France"},aboutMe:(null===N||void 0===N?void 0:N.aboutMe)||"",disponibilite:(null===N||void 0===N?void 0:N.disponibilite)||"",typeTransporteur:(null===N||void 0===N?void 0:N.typeTransporteur)||""},validationSchema:Q,onSubmit:async e=>{try{D(!0);const t=await Ge.updateProfile(e);j(t.data.data),o.toast.success("Profil mis \ufffd jour avec succ\ufffds"),C("/profile")}catch(t){console.error("Erreur lors de la mise \ufffd jour du profil:",t),o.toast.error(t.message||"Erreur lors de la mise \ufffd jour du profil")}finally{D(!1)}}}),K=Object(T.a)({initialValues:{currentPassword:"",newPassword:"",confirmPassword:""},validationSchema:Y,onSubmit:async e=>{try{D(!0),await Ge.updatePassword({passwordCurrent:e.currentPassword,password:e.newPassword,passwordConfirm:e.confirmPassword}),o.toast.success("Mot de passe mis \ufffd jour avec succ\ufffds"),K.resetForm()}catch(t){console.error("Erreur lors de la mise \ufffd jour du mot de passe:",t),o.toast.error(t.message||"Erreur lors de la mise \ufffd jour du mot de passe")}finally{D(!1)}}});Object(r.useEffect)(()=>{N&&N.specialites&&W(N.specialites)},[N]);const{getRootProps:X,getInputProps:ee}=Object(We.a)({accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxSize:5242880,maxFiles:1,onDrop:async e=>{if(e.length>0){const t=e[0];A(t);const a=URL.createObjectURL(t);Z.setFieldValue("photoPreview",a),await re(t)}},onDropRejected:e=>{if(e.length>0){const{errors:t}=e[0];t.some(e=>"file-too-large"===e.code)?o.toast.error("L'image est trop volumineuse. Taille maximale: 5MB"):o.toast.error("Format de fichier non accept\ufffd. Utilisez JPG, PNG ou GIF")}}}),{getRootProps:te,getInputProps:ae}=Object(We.a)({accept:{"application/pdf":[".pdf"],"image/*":[".jpeg",".jpg",".png"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxSize:10485760,onDrop:e=>{const t=[...O,...e.map(e=>({file:e,preview:e.type.startsWith("image/")?URL.createObjectURL(e):null,name:e.name,uploading:!1,uploaded:!1,error:null}))];L(t)},onDropRejected:e=>{if(e.length>0){const{errors:t}=e[0];t.some(e=>"file-too-large"===e.code)?o.toast.error("Le document est trop volumineux. Taille maximale: 10MB"):o.toast.error("Format de fichier non accept\ufffd. Utilisez PDF, JPG, PNG, DOC ou DOCX")}}}),re=async e=>{try{V(!0);const t=new FormData;t.append("photo",e);const a=await Ge.uploadProfilePhoto(t);j({...N,photo:a.data.photo}),o.toast.success("Photo de profil mise \ufffd jour avec succ\ufffds")}catch(t){console.error("Erreur lors du t\ufffdl\ufffdchargement de la photo:",t),o.toast.error(t.message||"Erreur lors du t\ufffdl\ufffdchargement de la photo")}finally{V(!1)}};return Object(r.useEffect)(()=>()=>{O.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),Z.values.photoPreview&&URL.revokeObjectURL(Z.values.photoPreview)},[O,Z.values.photoPreview]),s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"md:flex md:items-center md:justify-between mb-6"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("h1",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"},"Modifier mon profil")),s.a.createElement("div",{className:"mt-4 flex md:mt-0 md:ml-4"},s.a.createElement(w,{to:"/profile",variant:"outline"},"Annuler"))),s.a.createElement("div",{className:"border-b border-gray-200 mb-6"},s.a.createElement("nav",{className:"flex -mb-px"},s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("profile"===$?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>U("profile")},"Informations personnelles"),s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("password"===$?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>U("password")},"Changer le mot de passe"),"transporteur"===(null===N||void 0===N?void 0:N.role)&&s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("documents"===$?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>U("documents")},"Documents et v\ufffdrification"))),"profile"===$&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("form",{onSubmit:Z.handleSubmit},s.a.createElement("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6"},s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Photo de profil"),s.a.createElement("div",{className:"mt-2 flex items-center"},s.a.createElement("div",{className:"h-20 w-20 rounded-full overflow-hidden bg-gray-100"},Z.values.photoPreview?s.a.createElement("img",{src:Z.values.photoPreview,alt:"Pr\ufffdvisualisation",className:"h-full w-full object-cover"}):(null===N||void 0===N?void 0:N.photo)?s.a.createElement("img",{src:N.photo,alt:`${N.prenom} ${N.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(Ne.a,{className:"h-full w-full text-gray-300 p-4"})),s.a.createElement("div",Object.assign({},X(),{className:"ml-5"}),s.a.createElement("input",ee()),s.a.createElement(w,{type:"button",variant:"outline",disabled:M},M?"T\ufffdl\ufffdchargement...":"Changer"))),s.a.createElement("p",{className:"mt-2 text-xs text-gray-500"},"JPG, PNG ou GIF. 5 MB maximum.")),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"prenom",name:"prenom",type:"text",label:"Pr\ufffdnom",value:Z.values.prenom,onChange:Z.handleChange,onBlur:Z.handleBlur,error:Z.touched.prenom&&Z.errors.prenom,touched:Z.touched.prenom,icon:s.a.createElement(Ne.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"nom",name:"nom",type:"text",label:"Nom",value:Z.values.nom,onChange:Z.handleChange,onBlur:Z.handleBlur,error:Z.touched.nom&&Z.errors.nom,touched:Z.touched.nom,icon:s.a.createElement(Ne.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"email",name:"email",type:"email",label:"Adresse email",value:Z.values.email,onChange:Z.handleChange,onBlur:Z.handleBlur,disabled:!0,icon:s.a.createElement(q.a,{className:"h-5 w-5 text-gray-400"}),helperText:"Vous ne pouvez pas modifier votre adresse email"})),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"telephone",name:"telephone",type:"tel",label:"Num\ufffdro de t\ufffdl\ufffdphone",value:Z.values.telephone,onChange:Z.handleChange,onBlur:Z.handleBlur,error:Z.touched.telephone&&Z.errors.telephone,touched:Z.touched.telephone,icon:s.a.createElement(z.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-3"},"Adresse")),s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement(F,{id:"adresse.rue",name:"adresse.rue",type:"text",label:"Adresse",value:Z.values.adresse.rue,onChange:Z.handleChange,onBlur:Z.handleBlur,error:(null===(n=Z.touched.adresse)||void 0===n?void 0:n.rue)&&(null===(m=Z.errors.adresse)||void 0===m?void 0:m.rue),touched:null===(c=Z.touched.adresse)||void 0===c?void 0:c.rue,icon:s.a.createElement(B.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement(F,{id:"adresse.codePostal",name:"adresse.codePostal",type:"text",label:"Code postal",value:Z.values.adresse.codePostal,onChange:Z.handleChange,onBlur:Z.handleBlur,error:(null===(d=Z.touched.adresse)||void 0===d?void 0:d.codePostal)&&(null===(u=Z.errors.adresse)||void 0===u?void 0:u.codePostal),touched:null===(p=Z.touched.adresse)||void 0===p?void 0:p.codePostal,required:!0})),s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement(F,{id:"adresse.ville",name:"adresse.ville",type:"text",label:"Ville",value:Z.values.adresse.ville,onChange:Z.handleChange,onBlur:Z.handleBlur,error:(null===(v=Z.touched.adresse)||void 0===v?void 0:v.ville)&&(null===(x=Z.errors.adresse)||void 0===x?void 0:x.ville),touched:null===(g=Z.touched.adresse)||void 0===g?void 0:g.ville,required:!0})),s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement(F,{id:"adresse.pays",name:"adresse.pays",type:"text",label:"Pays",value:Z.values.adresse.pays,onChange:Z.handleChange,onBlur:Z.handleBlur,error:(null===(h=Z.touched.adresse)||void 0===h?void 0:h.pays)&&(null===(b=Z.errors.adresse)||void 0===b?void 0:b.pays),touched:null===(f=Z.touched.adresse)||void 0===f?void 0:f.pays,required:!0})),s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("label",{htmlFor:"aboutMe",className:"block text-sm font-medium text-gray-700"},"A propos de moi"),s.a.createElement("div",{className:"mt-1"},s.a.createElement("textarea",{id:"aboutMe",name:"aboutMe",rows:"3",className:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border-gray-300 rounded-md",value:Z.values.aboutMe,onChange:Z.handleChange,onBlur:Z.handleBlur})),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Une br\ufffdve description de vous-m\ufffdme. ",(null===(y=Z.values.aboutMe)||void 0===y?void 0:y.length)||0,"/500 caract\ufffdres."),Z.touched.aboutMe&&Z.errors.aboutMe&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},Z.errors.aboutMe)),"transporteur"===(null===N||void 0===N?void 0:N.role)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-3"},"Informations professionnelles")),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement("label",{htmlFor:"typeTransporteur",className:"block text-sm font-medium text-gray-700"},"Type de transporteur"),s.a.createElement("select",{id:"typeTransporteur",name:"typeTransporteur",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",value:Z.values.typeTransporteur,onChange:Z.handleChange,onBlur:Z.handleBlur},s.a.createElement("option",{value:""},"S\ufffdlectionnez un type"),s.a.createElement("option",{value:"independant"},"Ind\ufffdpendant"),s.a.createElement("option",{value:"entreprise"},"Entreprise"),s.a.createElement("option",{value:"autoentrepreneur"},"Auto-entrepreneur"))),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement("label",{htmlFor:"disponibilite",className:"block text-sm font-medium text-gray-700"},"Disponibilit\ufffd"),s.a.createElement("select",{id:"disponibilite",name:"disponibilite",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md",value:Z.values.disponibilite,onChange:Z.handleChange,onBlur:Z.handleBlur},s.a.createElement("option",{value:""},"S\ufffdlectionnez une disponibilit\ufffd"),s.a.createElement("option",{value:"temps_plein"},"Temps plein"),s.a.createElement("option",{value:"temps_partiel"},"Temps partiel"),s.a.createElement("option",{value:"weekends"},"Weekends uniquement"),s.a.createElement("option",{value:"sur_demande"},"Sur demande"))),s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Sp\ufffdcialit\ufffds"),s.a.createElement("div",{className:"mt-2"},s.a.createElement("div",{className:"flex flex-wrap gap-2 mb-3"},J.map((e,t)=>s.a.createElement("div",{key:t,className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-teal-100 text-teal-800"},e,s.a.createElement("button",{type:"button",onClick:()=>(e=>{const t=[...J];t.splice(e,1),W(t),Z.setFieldValue("specialites",t)})(t),className:"ml-1.5 h-5 w-5 inline-flex items-center justify-center rounded-full text-teal-500 hover:bg-teal-200 hover:text-teal-600 focus:outline-none"},s.a.createElement(ve.a,{className:"h-4 w-4"}))))),s.a.createElement("div",{className:"flex"},s.a.createElement("input",{type:"text",value:G,onChange:e=>H(e.target.value),placeholder:"Ajouter une sp\ufffdcialit\ufffd",className:"block w-full rounded-l-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm"}),s.a.createElement("button",{type:"button",onClick:()=>{""!==G.trim()&&(J.includes(G)||(W([...J,G]),Z.setFieldValue("specialites",[...J,G])),H(""))},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-r-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},s.a.createElement(I.a,{className:"h-5 w-5"})))),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Indiquez vos domaines d'expertise (ex: d\ufffdm\ufffdnagement, transport de meuble, international...)")))),s.a.createElement("div",{className:"pt-5"},s.a.createElement("div",{className:"flex justify-end"},s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>C("/profile"),className:"mr-3"},"Annuler"),s.a.createElement(w,{type:"submit",variant:"primary",isLoading:k,disabled:k},"Enregistrer")))))),"password"===$&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("form",{onSubmit:K.handleSubmit},s.a.createElement("div",{className:"space-y-6"},s.a.createElement("div",null,s.a.createElement("h3",{className:"text-lg font-medium leading-6 text-gray-900"},"Changer le mot de passe"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Assurez-vous d'utiliser un mot de passe fort et unique que vous n'utilisez pas pour d'autres sites.")),s.a.createElement("div",{className:"space-y-4"},s.a.createElement(F,{id:"currentPassword",name:"currentPassword",type:"password",label:"Mot de passe actuel",value:K.values.currentPassword,onChange:K.handleChange,onBlur:K.handleBlur,error:K.touched.currentPassword&&K.errors.currentPassword,touched:K.touched.currentPassword,icon:s.a.createElement(Pe.a,{className:"h-5 w-5 text-gray-400"}),required:!0}),s.a.createElement(F,{id:"newPassword",name:"newPassword",type:"password",label:"Nouveau mot de passe",value:K.values.newPassword,onChange:K.handleChange,onBlur:K.handleBlur,error:K.touched.newPassword&&K.errors.newPassword,touched:K.touched.newPassword,icon:s.a.createElement(Pe.a,{className:"h-5 w-5 text-gray-400"}),required:!0,helperText:"Au moins 8 caract\ufffdres, incluant une majuscule, une minuscule et un chiffre."}),s.a.createElement(F,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirmer le mot de passe",value:K.values.confirmPassword,onChange:K.handleChange,onBlur:K.handleBlur,error:K.touched.confirmPassword&&K.errors.confirmPassword,touched:K.touched.confirmPassword,icon:s.a.createElement(Pe.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",{className:"pt-5"},s.a.createElement("div",{className:"flex justify-end"},s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>K.resetForm(),className:"mr-3"},"Annuler"),s.a.createElement(w,{type:"submit",variant:"primary",isLoading:k,disabled:k},"Mettre \ufffd jour le mot de passe"))))))),"documents"===$&&"transporteur"===(null===N||void 0===N?void 0:N.role)&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("div",null,s.a.createElement("h3",{className:"text-lg font-medium leading-6 text-gray-900"},"Documents et v\ufffdrification"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"T\ufffdl\ufffdchargez vos documents professionnels pour la v\ufffdrification de votre compte. Cela augmentera votre visibilit\ufffd et la confiance des clients.")),s.a.createElement("div",{className:"mt-6"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"T\ufffdl\ufffdcharger des documents"),s.a.createElement("div",{className:"mt-2"},s.a.createElement("div",Object.assign({},te(),{className:"flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"}),s.a.createElement("div",{className:"space-y-1 text-center"},s.a.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},s.a.createElement("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),s.a.createElement("div",{className:"flex text-sm text-gray-600"},s.a.createElement("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-teal-600 hover:text-teal-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-teal-500"},s.a.createElement("span",null,"T\ufffdl\ufffdcharger un fichier"),s.a.createElement("input",ae())),s.a.createElement("p",{className:"pl-1"},"ou glisser-d\ufffdposer")),s.a.createElement("p",{className:"text-xs text-gray-500"},"PDF, PNG, JPG, DOC jusqu'\ufffd 10MB"))))),O.length>0&&s.a.createElement("div",{className:"mt-6"},s.a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Documents \ufffd t\ufffdl\ufffdcharger"),s.a.createElement("ul",{className:"mt-3 divide-y divide-gray-200"},O.map((e,t)=>s.a.createElement("li",{key:t,className:"py-3 flex items-center justify-between"},s.a.createElement("div",{className:"flex items-center"},e.preview?s.a.createElement("img",{src:e.preview,alt:e.name,className:"h-10 w-10 object-cover rounded"}):s.a.createElement("div",{className:"h-10 w-10 flex items-center justify-center bg-gray-100 rounded"},s.a.createElement("svg",{className:"h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"}))),s.a.createElement("div",{className:"ml-3"},s.a.createElement("p",{className:"text-sm font-medium text-gray-900 truncate",style:{maxWidth:"200px"}},e.name),s.a.createElement("p",{className:"text-xs text-gray-500"},e.uploading?"T\ufffdl\ufffdchargement en cours...":e.uploaded?"T\ufffdl\ufffdcharg\ufffd avec succ\ufffds":e.error?e.error:"En attente de t\ufffdl\ufffdchargement"))),s.a.createElement("div",{className:"ml-4 flex-shrink-0"},e.uploading?s.a.createElement("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-teal-500"}):e.uploaded?s.a.createElement(CheckCircleIcon,{className:"h-5 w-5 text-green-500"}):s.a.createElement("button",{type:"button",onClick:()=>(e=>{const t=O[e];t.preview&&URL.revokeObjectURL(t.preview),L(t=>t.filter((t,a)=>a!==e))})(t),className:"text-red-500 hover:text-red-700"},s.a.createElement(ve.a,{className:"h-5 w-5"})))))),O.some(e=>!e.uploaded&&!e.uploading)&&s.a.createElement("div",{className:"mt-4"},s.a.createElement(w,{type:"button",variant:"primary",onClick:async()=>{if(0!==O.length)try{_(!0);const e=new FormData;O.forEach((t,a)=>{t.uploaded||t.uploading||(e.append("documents",t.file),L(e=>e.map((e,t)=>t===a?{...e,uploading:!0}:e)))});const t=await Ge.uploadDocuments(e);L(e=>e.map(e=>{const a=t.data.documents.find(t=>t.originalname===e.name);return a?{...e,uploading:!1,uploaded:!0,url:a.path}:e})),o.toast.success("Documents t\ufffdl\ufffdcharg\ufffds avec succ\ufffds")}catch(e){console.error("Erreur lors du t\ufffdl\ufffdchargement des documents:",e),o.toast.error(e.message||"Erreur lors du t\ufffdl\ufffdchargement des documents"),L(e=>e.map(e=>e.uploading?{...e,uploading:!1,error:"Echec du t\ufffdl\ufffdchargement"}:e))}finally{_(!1)}else o.toast.error("Aucun document \ufffd t\ufffdl\ufffdcharger")},isLoading:R,disabled:R},"T\ufffdl\ufffdcharger les documents"))),(null===N||void 0===N?void 0:N.documents)&&N.documents.length>0&&s.a.createElement("div",{className:"mt-8"},s.a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Documents t\ufffdl\ufffdcharg\ufffds"),s.a.createElement("ul",{className:"mt-3 divide-y divide-gray-200"},N.documents.map((e,t)=>s.a.createElement("li",{key:t,className:"py-3 flex items-center justify-between"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"h-10 w-10 flex items-center justify-center bg-gray-100 rounded"},s.a.createElement("svg",{className:"h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"}))),s.a.createElement("div",{className:"ml-3"},s.a.createElement("p",{className:"text-sm font-medium text-gray-900"},e.name||"Document "+(t+1)),s.a.createElement("p",{className:"text-xs text-gray-500"},new Date(e.uploadedAt).toLocaleDateString("fr-FR"),e.verified&&" - V\ufffdrifi\ufffd"))),s.a.createElement("div",{className:"ml-4 flex-shrink-0"},e.verified?s.a.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"V\ufffdrifi\ufffd"):s.a.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},"En attente")))))))))},Qe=a(214),Ye=a(215),Ze=a(216),Ke=a(217);var Xe={getAnnonces:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await u.get("/annonces",{params:e})).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration des annonces"}}},getAnnonceById:async e=>{try{return(await u.get("/annonces/"+e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration de l'annonce"}}},createAnnonce:async e=>{try{return(await u.post("/annonces",e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la cr\xe9ation de l'annonce"}}},updateAnnonce:async(e,t)=>{try{return(await u.put("/annonces/"+e,t)).data}catch(r){var a;throw(null===(a=r.response)||void 0===a?void 0:a.data)||{message:"Erreur lors de la mise \xe0 jour de l'annonce"}}},deleteAnnonce:async e=>{try{return(await u.delete("/annonces/"+e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la suppression de l'annonce"}}},getMesAnnonces:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await u.get("/annonces/user/mes-annonces",{params:e})).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration de vos annonces"}}},uploadImages:async(e,t)=>{try{return(await u.post(`/annonces/${e}/upload`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){var a;throw(null===(a=r.response)||void 0===a?void 0:a.data)||{message:"Erreur lors du t\xe9l\xe9chargement des images"}}}};const et=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy";if(!e)return"";try{const a="string"===typeof e?Object(W.default)(e):e;return Object(G.default)(a,t,{locale:H.a})}catch(a){return console.error("Erreur de formatage de date:",a),""}};var tt=()=>{const[e,t]=Object(r.useState)([]),[a,l]=Object(r.useState)(!0),[n,c]=Object(r.useState)(null),[i,d]=Object(r.useState)(!1),[u,p]=Object(r.useState)(null),[v,x]=Object(r.useState)(!1),[g,E]=Object(r.useState)(1),[h,b]=Object(r.useState)(1),[f,y]=Object(r.useState)("all");Object(r.useEffect)(()=>{(async()=>{try{l(!0);const e={page:g};"all"!==f&&(e.statut=f);const a=await Xe.getMesAnnonces(e);t(a.data.data),b(a.data.pages),c(null)}catch(e){console.error("Erreur lors du chargement des annonces:",e),c("Impossible de charger vos annonces"),o.toast.error("Erreur lors du chargement des annonces")}finally{l(!1)}})()},[g,f]);const N=e=>{y(e),E(1)};return s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"md:flex md:items-center md:justify-between mb-6"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl"},"Mes annonces"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"G\ufffdrez vos demandes de transport")),s.a.createElement("div",{className:"mt-4 flex md:mt-0 md:ml-4"},s.a.createElement(w,{variant:"outline",onClick:()=>{E(1);(async()=>{try{l(!0);const e={page:1};"all"!==f&&(e.statut=f);const a=await Xe.getMesAnnonces(e);t(a.data.data),b(a.data.pages),c(null),o.toast.success("Annonces actualis\ufffdes")}catch(e){console.error("Erreur lors du chargement des annonces:",e),c("Impossible de charger vos annonces"),o.toast.error("Erreur lors du chargement des annonces")}finally{l(!1)}})()},className:"mr-3"},s.a.createElement(Qe.a,{className:"h-5 w-5 mr-1"}),"Actualiser"),s.a.createElement(w,{to:"/dashboard/annonces/create",variant:"primary"},s.a.createElement(I.a,{className:"h-5 w-5 mr-1"}),"Nouvelle annonce"))),s.a.createElement("div",{className:"bg-white shadow rounded-lg p-4 mb-6"},s.a.createElement("div",{className:"flex flex-wrap gap-2"},s.a.createElement("button",{className:"px-3 py-1 rounded-md text-sm font-medium "+("all"===f?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>N("all")},"Toutes"),s.a.createElement("button",{className:"px-3 py-1 rounded-md text-sm font-medium "+("disponible"===f?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>N("disponible")},"Disponibles"),s.a.createElement("button",{className:"px-3 py-1 rounded-md text-sm font-medium "+("en_attente"===f?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>N("en_attente")},"En attente"),s.a.createElement("button",{className:"px-3 py-1 rounded-md text-sm font-medium "+("en_cours"===f?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>N("en_cours")},"En cours"),s.a.createElement("button",{className:"px-3 py-1 rounded-md text-sm font-medium "+("termine"===f?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>N("termine")},"Termin\ufffdes"),s.a.createElement("button",{className:"px-3 py-1 rounded-md text-sm font-medium "+("annule"===f?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>N("annule")},"Annul\ufffdes"))),s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},a?s.a.createElement("div",{className:"px-4 py-12 text-center"},s.a.createElement("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-teal-500"}),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Chargement des annonces...")):n?s.a.createElement("div",{className:"px-4 py-6 text-center"},s.a.createElement(_.a,{className:"mx-auto h-12 w-12 text-red-500"}),s.a.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"Erreur"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},n),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>{E(1);(async()=>{try{l(!0);const e={page:1};"all"!==f&&(e.statut=f);const a=await Xe.getMesAnnonces(e);t(a.data.data),b(a.data.pages),c(null)}catch(e){console.error("Erreur lors du chargement des annonces:",e),c("Impossible de charger vos annonces"),o.toast.error("Erreur lors du chargement des annonces")}finally{l(!1)}})()}},"R\ufffdessayer"))):0===e.length?s.a.createElement("div",{className:"px-4 py-12 text-center"},s.a.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},s.a.createElement("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})),s.a.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"Aucune annonce"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Commencez par cr\ufffder une nouvelle annonce."),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{to:"/dashboard/annonces/create",variant:"primary"},s.a.createElement(I.a,{className:"h-5 w-5 mr-1"}),"Nouvelle annonce"))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"overflow-x-auto"},s.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},s.a.createElement("thead",{className:"bg-gray-50"},s.a.createElement("tr",null,s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Annonce"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Trajet"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Devis"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions"))),s.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},e.map(e=>{var t;return s.a.createElement("tr",{key:e._id},s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-100 rounded-lg flex items-center justify-center"},s.a.createElement("span",{className:"text-sm font-medium text-gray-700 uppercase"},(null===(t=e.typeTransport)||void 0===t?void 0:t.charAt(0))||"A")),s.a.createElement("div",{className:"ml-4"},s.a.createElement("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs"},e.titre),s.a.createElement("div",{className:"text-sm text-gray-500 capitalize"},e.typeTransport)))),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.a.createElement("div",{className:"text-sm text-gray-900"},e.villeDepart),s.a.createElement("div",{className:"text-sm text-gray-500"},e.villeArrivee)),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.a.createElement("div",{className:"text-sm text-gray-900"},et(e.dateDepart))),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},(e=>{const t=re[e]||"bg-gray-100 text-gray-800";return s.a.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+t},ae[e]||e)})(e.statut)),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.nbDevis?s.a.createElement("span",{className:"font-medium text-teal-600"},e.nbDevis):s.a.createElement("span",null,"Aucun")),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},s.a.createElement("div",{className:"flex justify-end space-x-2"},s.a.createElement(m.b,{to:"/dashboard/annonces/"+e._id,className:"text-gray-600 hover:text-gray-900",title:"Voir les d\ufffdtails"},s.a.createElement(Ye.a,{className:"h-5 w-5"})),"disponible"===e.statut&&s.a.createElement(s.a.Fragment,null,s.a.createElement(m.b,{to:`/dashboard/annonces/${e._id}/edit`,className:"text-teal-600 hover:text-teal-900",title:"Modifier l'annonce"},s.a.createElement(Ze.a,{className:"h-5 w-5"})),s.a.createElement("button",{type:"button",className:"text-red-600 hover:text-red-900",title:"Supprimer l'annonce",onClick:()=>{p(e._id),x(!0)}},s.a.createElement(Ke.a,{className:"h-5 w-5"}))))))})))),h>1&&s.a.createElement("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},s.a.createElement("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},s.a.createElement("div",null,s.a.createElement("p",{className:"text-sm text-gray-700"},"Affichage de la page ",s.a.createElement("span",{className:"font-medium"},g)," sur"," ",s.a.createElement("span",{className:"font-medium"},h))),s.a.createElement("div",null,s.a.createElement("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},s.a.createElement("button",{onClick:()=>E(e=>Math.max(e-1,1)),disabled:1===g,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium "+(1===g?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50")},s.a.createElement("span",{className:"sr-only"},"Pr\ufffdc\ufffddent"),s.a.createElement(U.a,{className:"h-5 w-5","aria-hidden":"true"})),[...Array(h)].map((e,t)=>{const a=t+1;return 1===a||a===h||a>=g-1&&a<=g+1?s.a.createElement("button",{key:a,onClick:()=>E(a),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium "+(g===a?"z-10 bg-teal-50 border-teal-500 text-teal-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50")},a):2===a&&g>3||a===h-1&&g<h-2?s.a.createElement("span",{key:a,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},"..."):null}),s.a.createElement("button",{onClick:()=>E(e=>Math.min(e+1,h)),disabled:g===h,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium "+(g===h?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50")},s.a.createElement("span",{className:"sr-only"},"Suivant"),s.a.createElement(J.a,{className:"h-5 w-5","aria-hidden":"true"})))))))),v&&s.a.createElement("div",{className:"fixed z-10 inset-0 overflow-y-auto"},s.a.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},s.a.createElement("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true"},s.a.createElement("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})),s.a.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200b"),s.a.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},s.a.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},s.a.createElement("div",{className:"sm:flex sm:items-start"},s.a.createElement("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})),s.a.createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},s.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"Supprimer l'annonce"),s.a.createElement("div",{className:"mt-2"},s.a.createElement("p",{className:"text-sm text-gray-500"},"Etes-vous s\ufffdr de vouloir supprimer cette annonce ? Cette action est irr\ufffdversible."))))),s.a.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},s.a.createElement(w,{type:"button",variant:"danger",onClick:async()=>{if(u)try{d(!0),await Xe.deleteAnnonce(u),t(e.filter(e=>e._id!==u)),o.toast.success("Annonce supprim\ufffde avec succ\ufffds"),x(!1),p(null)}catch(a){console.error("Erreur lors de la suppression de l'annonce:",a),o.toast.error(a.message||"Erreur lors de la suppression de l'annonce")}finally{d(!1)}},isLoading:i,disabled:i,className:"sm:ml-3"},"Supprimer"),s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>{x(!1),p(null)},disabled:i,className:"mt-3 sm:mt-0"},"Annuler"))))))},at=a(218);var rt=()=>{var e,t,a,l,n,m,c,d,u,p,v,x,g,E,h,b,f,y,N,j,C,k,D,S,A,O,L,M,z,q,B,V,R;const I=Object(i.r)(),[_,$]=Object(r.useState)(!1),[U,J]=Object(r.useState)(1),[W,G]=Object(r.useState)([]),[H,Q]=Object(r.useState)([]),[Y,Z]=Object(r.useState)(!1),{getRootProps:K,getInputProps:X}=Object(We.a)({accept:{"image/*":[".jpeg",".jpg",".png"]},maxSize:5242880,maxFiles:5,onDrop:e=>{G([...W,...e]);const t=e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)}));Q([...H,...t])}}),ee=P.d({titre:P.f().required("Le titre est obligatoire").max(100,"Maximum 100 caract\ufffdres"),description:P.f().required("La description est obligatoire").min(20,"Minimum 20 caract\ufffdres"),typeTransport:P.f().required("Le type de transport est obligatoire").oneOf(["colis","meuble","marchandise","palette","demenagement","vehicule","autre"],"Type invalide"),villeDepart:P.f().required("La ville de d\ufffdpart est obligatoire"),"adresseDepart.rue":P.f().required("L'adresse de d\ufffdpart est obligatoire"),"adresseDepart.codePostal":P.f().required("Le code postal de d\ufffdpart est obligatoire").matches(/^[0-9]{5}$/,"Le code postal doit contenir 5 chiffres"),"adresseDepart.ville":P.f().required("La ville de d\ufffdpart est obligatoire"),villeArrivee:P.f().required("La ville d'arriv\ufffde est obligatoire"),"adresseArrivee.rue":P.f().required("L'adresse d'arriv\ufffde est obligatoire"),"adresseArrivee.codePostal":P.f().required("Le code postal d'arriv\ufffde est obligatoire").matches(/^[0-9]{5}$/,"Le code postal doit contenir 5 chiffres"),"adresseArrivee.ville":P.f().required("La ville d'arriv\ufffde est obligatoire"),dateDepart:P.b().required("La date de d\ufffdpart est obligatoire").min(new Date,"La date doit \ufffdtre dans le futur"),flexibiliteDate:P.a(),poids:P.c().positive("Le poids doit \ufffdtre positif"),unite_poids:P.f().oneOf(["kg","tonnes"],"Unit\ufffd de poids invalide"),volume:P.c().positive("Le volume doit \ufffdtre positif"),"dimensions.longueur":P.c().when("typeTransport",{is:e=>["colis","meuble","marchandise","palette"].includes(e),then:P.c().required("La longueur est obligatoire").positive()}),"dimensions.largeur":P.c().when("typeTransport",{is:e=>["colis","meuble","marchandise","palette"].includes(e),then:P.c().required("La largeur est obligatoire").positive()}),"dimensions.hauteur":P.c().when("typeTransport",{is:e=>["colis","meuble","marchandise","palette"].includes(e),then:P.c().required("La hauteur est obligatoire").positive()}),"dimensions.unite":P.f().oneOf(["cm","m"],"Unit\ufffd de dimension invalide"),nombreColis:P.c().when("typeTransport",{is:"colis",then:P.c().required("Le nombre de colis est obligatoire").positive().integer()}),budget:P.c().positive("Le budget doit \ufffdtre positif"),valeurDeclaree:P.c().positive("La valeur d\ufffdclar\ufffde doit \ufffdtre positive"),isUrgent:P.a(),"optionsTransport.chargement":P.a(),"optionsTransport.dechargement":P.a(),"optionsTransport.montage":P.a(),"optionsTransport.demontage":P.a(),"optionsTransport.emballage":P.a(),"optionsTransport.assurance":P.a(),commentairesTransporteur:P.f()}),te=Object(T.a)({initialValues:{titre:"",description:"",typeTransport:"",villeDepart:"",adresseDepart:{rue:"",codePostal:"",ville:"",pays:"France"},villeArrivee:"",adresseArrivee:{rue:"",codePostal:"",ville:"",pays:"France"},dateDepart:new Date(Date.now()+864e5),dateArrivee:null,flexibiliteDate:!1,poids:"",unite_poids:"kg",volume:"",dimensions:{longueur:"",largeur:"",hauteur:"",unite:"cm"},nombreColis:1,contenuColis:[],valeurDeclaree:0,budget:"",optionsTransport:{chargement:!1,dechargement:!1,montage:!1,demontage:!1,emballage:!1,assurance:!1},commentairesTransporteur:"",isUrgent:!1},validationSchema:ee,onSubmit:async e=>{try{$(!0);const t=(await Xe.createAnnonce(e)).data._id;if(W.length>0){const e=new FormData;W.forEach(t=>{e.append("photos",t)}),await Xe.uploadImages(t,e)}o.toast.success("Annonce cr\ufffd\ufffde avec succ\ufffds"),I("/dashboard/annonces/"+t)}catch(t){o.toast.error(t.message||"Erreur lors de la cr\ufffdation de l'annonce"),console.error("Erreur de cr\ufffdation d'annonce:",t)}finally{$(!1)}}});return s.a.useEffect(()=>()=>{H.forEach(e=>URL.revokeObjectURL(e.preview))},[H]),s.a.createElement("div",{className:"max-w-3xl mx-auto"},s.a.createElement("div",{className:"mb-8"},s.a.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Publier une annonce"),s.a.createElement("p",{className:"mt-2 text-gray-600"},"D\ufffdcrivez votre besoin de transport en d\ufffdtail pour recevoir les meilleurs devis.")),s.a.createElement("div",{className:"mb-8"},s.a.createElement("div",{className:"flex items-center justify-between"},s.a.createElement("div",{className:"flex-1 "+(U>=1?"text-teal-600":"text-gray-400")},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center border-2 "+(U>=1?"border-teal-600 bg-teal-100":"border-gray-300")},"1"),s.a.createElement("span",{className:"ml-2 text-sm font-medium"},"Informations g\ufffdn\ufffdrales"))),s.a.createElement("div",{className:"h-1 flex-1 mx-2 "+(U>=2?"bg-teal-600":"bg-gray-300")}),s.a.createElement("div",{className:"flex-1 "+(U>=2?"text-teal-600":"text-gray-400")},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center border-2 "+(U>=2?"border-teal-600 bg-teal-100":"border-gray-300")},"2"),s.a.createElement("span",{className:"ml-2 text-sm font-medium"},"Adresses"))),s.a.createElement("div",{className:"h-1 flex-1 mx-2 "+(U>=3?"bg-teal-600":"bg-gray-300")}),s.a.createElement("div",{className:"flex-1 "+(U>=3?"text-teal-600":"text-gray-400")},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center border-2 "+(U>=3?"border-teal-600 bg-teal-100":"border-gray-300")},"3"),s.a.createElement("span",{className:"ml-2 text-sm font-medium"},"D\ufffdtails et options"))),s.a.createElement("div",{className:"h-1 flex-1 mx-2 "+(U>=4?"bg-teal-600":"bg-gray-300")}),s.a.createElement("div",{className:"flex-1 "+(U>=4?"text-teal-600":"text-gray-400")},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center border-2 "+(U>=4?"border-teal-600 bg-teal-100":"border-gray-300")},"4"),s.a.createElement("span",{className:"ml-2 text-sm font-medium"},"Photos"))))),s.a.createElement("form",{onSubmit:te.handleSubmit,className:"card shadow-md rounded-lg"},s.a.createElement("div",{className:"card-body"},1===U&&s.a.createElement("div",null,s.a.createElement("h2",{className:"text-xl font-semibold mb-4"},"Informations g\ufffdn\ufffdrales"),s.a.createElement("div",{className:"space-y-4"},s.a.createElement(F,{id:"titre",name:"titre",label:"Titre de l'annonce",placeholder:"Ex: Transport d'un canap\ufffd de Paris \ufffd Lyon",value:te.values.titre,onChange:te.handleChange,onBlur:te.handleBlur,error:te.touched.titre&&te.errors.titre,touched:te.touched.titre,required:!0}),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"description",className:"form-label"},"Description d\ufffdtaill\ufffde",s.a.createElement("span",{className:"text-red-500 ml-1"},"*")),s.a.createElement("textarea",{id:"description",name:"description",rows:"5",placeholder:"D\ufffdcrivez en d\ufffdtail ce que vous souhaitez transporter, avec toutes les informations utiles pour le transporteur.",className:"form-control "+(te.touched.description&&te.errors.description?"border-red-300":""),value:te.values.description,onChange:te.handleChange,onBlur:te.handleBlur}),te.touched.description&&te.errors.description&&s.a.createElement("p",{className:"form-error"},te.errors.description)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"typeTransport",className:"form-label"},"Type de transport",s.a.createElement("span",{className:"text-red-500 ml-1"},"*")),s.a.createElement("select",{id:"typeTransport",name:"typeTransport",className:"form-control "+(te.touched.typeTransport&&te.errors.typeTransport?"border-red-300":""),value:te.values.typeTransport,onChange:te.handleChange,onBlur:te.handleBlur},s.a.createElement("option",{value:""},"S\ufffdlectionnez un type"),s.a.createElement("option",{value:"colis"},"Colis"),s.a.createElement("option",{value:"meuble"},"Meuble"),s.a.createElement("option",{value:"marchandise"},"Marchandise"),s.a.createElement("option",{value:"palette"},"Palette"),s.a.createElement("option",{value:"demenagement"},"D\ufffdm\ufffdnagement"),s.a.createElement("option",{value:"vehicule"},"V\ufffdhicule"),s.a.createElement("option",{value:"autre"},"Autre")),te.touched.typeTransport&&te.errors.typeTransport&&s.a.createElement("p",{className:"form-error"},te.errors.typeTransport)))),2===U&&s.a.createElement("div",null,s.a.createElement("h2",{className:"text-xl font-semibold mb-4"},"Adresses de d\ufffdpart et d'arriv\ufffde"),s.a.createElement("div",{className:"mb-6"},s.a.createElement("h3",{className:"text-lg font-medium mb-3"},"Adresse de d\ufffdpart"),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},s.a.createElement(F,{id:"adresseDepart.rue",name:"adresseDepart.rue",label:"Adresse",placeholder:"Rue et num\ufffdro",value:te.values.adresseDepart.rue,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(e=te.touched.adresseDepart)||void 0===e?void 0:e.rue)&&(null===(t=te.errors.adresseDepart)||void 0===t?void 0:t.rue),touched:null===(a=te.touched.adresseDepart)||void 0===a?void 0:a.rue,required:!0}),s.a.createElement(F,{id:"adresseDepart.codePostal",name:"adresseDepart.codePostal",label:"Code postal",placeholder:"Ex: 75001",value:te.values.adresseDepart.codePostal,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(l=te.touched.adresseDepart)||void 0===l?void 0:l.codePostal)&&(null===(n=te.errors.adresseDepart)||void 0===n?void 0:n.codePostal),touched:null===(m=te.touched.adresseDepart)||void 0===m?void 0:m.codePostal,required:!0})),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},s.a.createElement(F,{id:"adresseDepart.ville",name:"adresseDepart.ville",label:"Ville",placeholder:"Ex: Paris",value:te.values.adresseDepart.ville,onChange:e=>{te.handleChange(e),te.setFieldValue("villeDepart",e.target.value)},onBlur:te.handleBlur,error:(null===(c=te.touched.adresseDepart)||void 0===c?void 0:c.ville)&&(null===(d=te.errors.adresseDepart)||void 0===d?void 0:d.ville),touched:null===(u=te.touched.adresseDepart)||void 0===u?void 0:u.ville,required:!0}),s.a.createElement(F,{id:"adresseDepart.pays",name:"adresseDepart.pays",label:"Pays",placeholder:"Ex: France",value:te.values.adresseDepart.pays,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(p=te.touched.adresseDepart)||void 0===p?void 0:p.pays)&&(null===(v=te.errors.adresseDepart)||void 0===v?void 0:v.pays),touched:null===(x=te.touched.adresseDepart)||void 0===x?void 0:x.pays}))),s.a.createElement("div",{className:"mt-8"},s.a.createElement("h3",{className:"text-lg font-medium mb-3"},"Adresse d'arriv\ufffde"),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},s.a.createElement(F,{id:"adresseArrivee.rue",name:"adresseArrivee.rue",label:"Adresse",placeholder:"Rue et num\ufffdro",value:te.values.adresseArrivee.rue,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(g=te.touched.adresseArrivee)||void 0===g?void 0:g.rue)&&(null===(E=te.errors.adresseArrivee)||void 0===E?void 0:E.rue),touched:null===(h=te.touched.adresseArrivee)||void 0===h?void 0:h.rue,required:!0}),s.a.createElement(F,{id:"adresseArrivee.codePostal",name:"adresseArrivee.codePostal",label:"Code postal",placeholder:"Ex: 69001",value:te.values.adresseArrivee.codePostal,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(b=te.touched.adresseArrivee)||void 0===b?void 0:b.codePostal)&&(null===(f=te.errors.adresseArrivee)||void 0===f?void 0:f.codePostal),touched:null===(y=te.touched.adresseArrivee)||void 0===y?void 0:y.codePostal,required:!0})),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},s.a.createElement(F,{id:"adresseArrivee.ville",name:"adresseArrivee.ville",label:"Ville",placeholder:"Ex: Lyon",value:te.values.adresseArrivee.ville,onChange:e=>{te.handleChange(e),te.setFieldValue("villeArrivee",e.target.value)},onBlur:te.handleBlur,error:(null===(N=te.touched.adresseArrivee)||void 0===N?void 0:N.ville)&&(null===(j=te.errors.adresseArrivee)||void 0===j?void 0:j.ville),touched:null===(C=te.touched.adresseArrivee)||void 0===C?void 0:C.ville,required:!0}),s.a.createElement(F,{id:"adresseArrivee.pays",name:"adresseArrivee.pays",label:"Pays",placeholder:"Ex: France",value:te.values.adresseArrivee.pays,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(k=te.touched.adresseArrivee)||void 0===k?void 0:k.pays)&&(null===(D=te.errors.adresseArrivee)||void 0===D?void 0:D.pays),touched:null===(S=te.touched.adresseArrivee)||void 0===S?void 0:S.pays})))),3===U&&s.a.createElement("div",null,s.a.createElement("h2",{className:"text-xl font-semibold mb-4"},"D\ufffdtails du transport"),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label"},"Date de d\ufffdpart souhait\ufffde",s.a.createElement("span",{className:"text-red-500 ml-1"},"*")),s.a.createElement(ge.a,{selected:te.values.dateDepart,onChange:e=>{te.setFieldValue("dateDepart",e)},className:"form-control",dateFormat:"dd/MM/yyyy",minDate:new Date,placeholderText:"S\ufffdlectionnez une date"}),te.touched.dateDepart&&te.errors.dateDepart&&s.a.createElement("p",{className:"form-error"},te.errors.dateDepart)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label"},"Date d'arriv\ufffde souhait\ufffde"),s.a.createElement(ge.a,{selected:te.values.dateArrivee,onChange:e=>{te.setFieldValue("dateArrivee",e)},className:"form-control",dateFormat:"dd/MM/yyyy",minDate:te.values.dateDepart||new Date,placeholderText:"S\ufffdlectionnez une date"}))),s.a.createElement("div",{className:"mt-4"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"flexibiliteDate",name:"flexibiliteDate",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded",checked:te.values.flexibiliteDate,onChange:te.handleChange}),s.a.createElement("label",{htmlFor:"flexibiliteDate",className:"ml-2 block text-sm text-gray-900"},"Je suis flexible sur les dates (\ufffd 2 jours)"))),s.a.createElement("hr",{className:"my-6"}),s.a.createElement("h3",{className:"text-lg font-medium mb-4"},"Caract\ufffdristiques de l'envoi"),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},s.a.createElement(F,{id:"poids",name:"poids",type:"number",label:"Poids",placeholder:"Ex: 20",value:te.values.poids,onChange:te.handleChange,onBlur:te.handleBlur,error:te.touched.poids&&te.errors.poids,touched:te.touched.poids}),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"unite_poids",className:"form-label"},"Unit\ufffd de poids"),s.a.createElement("select",{id:"unite_poids",name:"unite_poids",className:"form-control",value:te.values.unite_poids,onChange:te.handleChange},s.a.createElement("option",{value:"kg"},"Kilogrammes (kg)"),s.a.createElement("option",{value:"tonnes"},"Tonnes (t)"))),s.a.createElement(F,{id:"volume",name:"volume",type:"number",label:"Volume (m\ufffd)",placeholder:"Ex: 1.5",value:te.values.volume,onChange:te.handleChange,onBlur:te.handleBlur,error:te.touched.volume&&te.errors.volume,touched:te.touched.volume})),["colis","meuble","marchandise","palette"].includes(te.values.typeTransport)&&s.a.createElement("div",{className:"mt-4"},s.a.createElement("h4",{className:"text-md font-medium mb-2"},"Dimensions"),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},s.a.createElement(F,{id:"dimensions.longueur",name:"dimensions.longueur",type:"number",label:"Longueur",placeholder:"Ex: 100",value:te.values.dimensions.longueur,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(A=te.touched.dimensions)||void 0===A?void 0:A.longueur)&&(null===(O=te.errors.dimensions)||void 0===O?void 0:O.longueur),touched:null===(L=te.touched.dimensions)||void 0===L?void 0:L.longueur}),s.a.createElement(F,{id:"dimensions.largeur",name:"dimensions.largeur",type:"number",label:"Largeur",placeholder:"Ex: 80",value:te.values.dimensions.largeur,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(M=te.touched.dimensions)||void 0===M?void 0:M.largeur)&&(null===(z=te.errors.dimensions)||void 0===z?void 0:z.largeur),touched:null===(q=te.touched.dimensions)||void 0===q?void 0:q.largeur}),s.a.createElement(F,{id:"dimensions.hauteur",name:"dimensions.hauteur",type:"number",label:"Hauteur",placeholder:"Ex: 50",value:te.values.dimensions.hauteur,onChange:te.handleChange,onBlur:te.handleBlur,error:(null===(B=te.touched.dimensions)||void 0===B?void 0:B.hauteur)&&(null===(V=te.errors.dimensions)||void 0===V?void 0:V.hauteur),touched:null===(R=te.touched.dimensions)||void 0===R?void 0:R.hauteur}),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"dimensions.unite",className:"form-label"},"Unit\ufffd"),s.a.createElement("select",{id:"dimensions.unite",name:"dimensions.unite",className:"form-control",value:te.values.dimensions.unite,onChange:te.handleChange},s.a.createElement("option",{value:"cm"},"Centim\ufffdtres (cm)"),s.a.createElement("option",{value:"m"},"M\ufffdtres (m)"))))),"colis"===te.values.typeTransport&&s.a.createElement("div",{className:"mt-4"},s.a.createElement(F,{id:"nombreColis",name:"nombreColis",type:"number",label:"Nombre de colis",placeholder:"Ex: 3",value:te.values.nombreColis,onChange:te.handleChange,onBlur:te.handleBlur,error:te.touched.nombreColis&&te.errors.nombreColis,touched:te.touched.nombreColis})),s.a.createElement("div",{className:"mt-4"},s.a.createElement(F,{id:"valeurDeclaree",name:"valeurDeclaree",type:"number",label:"Valeur d\ufffdclar\ufffde (\ufffd)",placeholder:"Ex: 200",helperText:"Renseignez la valeur de vos biens pour l'assurance.",value:te.values.valeurDeclaree,onChange:te.handleChange,onBlur:te.handleBlur,error:te.touched.valeurDeclaree&&te.errors.valeurDeclaree,touched:te.touched.valeurDeclaree})),s.a.createElement("div",{className:"mt-4"},s.a.createElement(F,{id:"budget",name:"budget",type:"number",label:"Budget estim\ufffd (\ufffd)",placeholder:"Ex: 150",helperText:"Facultatif. Indiquez votre budget pour recevoir des devis adapt\ufffds.",value:te.values.budget,onChange:te.handleChange,onBlur:te.handleBlur,error:te.touched.budget&&te.errors.budget,touched:te.touched.budget})),s.a.createElement("hr",{className:"my-6"}),s.a.createElement("div",{className:"mt-4"},s.a.createElement("button",{type:"button",className:"text-teal-600 font-medium",onClick:()=>Z(!Y)},Y?"- Masquer les options suppl\ufffdmentaires":"+ Afficher les options suppl\ufffdmentaires"),Y&&s.a.createElement("div",{className:"mt-4 bg-gray-50 p-4 rounded-md"},s.a.createElement("h3",{className:"text-lg font-medium mb-3"},"Options suppl\ufffdmentaires"),s.a.createElement("div",{className:"space-y-3"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"optionsTransport.chargement",name:"optionsTransport.chargement",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded",checked:te.values.optionsTransport.chargement,onChange:te.handleChange}),s.a.createElement("label",{htmlFor:"optionsTransport.chargement",className:"ml-2 block text-sm text-gray-900"},"Aide au chargement")),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"optionsTransport.dechargement",name:"optionsTransport.dechargement",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded",checked:te.values.optionsTransport.dechargement,onChange:te.handleChange}),s.a.createElement("label",{htmlFor:"optionsTransport.dechargement",className:"ml-2 block text-sm text-gray-900"},"Aide au d\ufffdchargement")),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"optionsTransport.montage",name:"optionsTransport.montage",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded",checked:te.values.optionsTransport.montage,onChange:te.handleChange}),s.a.createElement("label",{htmlFor:"optionsTransport.montage",className:"ml-2 block text-sm text-gray-900"},"Montage des meubles")),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"optionsTransport.demontage",name:"optionsTransport.demontage",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded",checked:te.values.optionsTransport.demontage,onChange:te.handleChange}),s.a.createElement("label",{htmlFor:"optionsTransport.demontage",className:"ml-2 block text-sm text-gray-900"},"D\ufffdmontage des meubles")),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"optionsTransport.emballage",name:"optionsTransport.emballage",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded",checked:te.values.optionsTransport.emballage,onChange:te.handleChange}),s.a.createElement("label",{htmlFor:"optionsTransport.emballage",className:"ml-2 block text-sm text-gray-900"},"Emballage des objets")),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"optionsTransport.assurance",name:"optionsTransport.assurance",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded",checked:te.values.optionsTransport.assurance,onChange:te.handleChange}),s.a.createElement("label",{htmlFor:"optionsTransport.assurance",className:"ml-2 block text-sm text-gray-900"},"Assurance compl\ufffdmentaire")),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("input",{id:"isUrgent",name:"isUrgent",type:"checkbox",className:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded",checked:te.values.isUrgent,onChange:te.handleChange}),s.a.createElement("label",{htmlFor:"isUrgent",className:"ml-2 block text-sm text-gray-900"},"Transport urgent"))),s.a.createElement("div",{className:"mt-4"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"commentairesTransporteur",className:"form-label"},"Instructions pour le transporteur"),s.a.createElement("textarea",{id:"commentairesTransporteur",name:"commentairesTransporteur",rows:"3",placeholder:"Ex: Code immeuble, \ufffdtage, pr\ufffdsence d'ascenseur, acc\ufffds difficile, etc.",className:"form-control",value:te.values.commentairesTransporteur,onChange:te.handleChange,onBlur:te.handleBlur})))))),4===U&&s.a.createElement("div",null,s.a.createElement("h2",{className:"text-xl font-semibold mb-4"},"Photos"),s.a.createElement("p",{className:"text-gray-600 mb-4"},"Ajoutez des photos pour aider les transporteurs \ufffd mieux \ufffdvaluer votre demande. (Max 5 photos, 5MB par photo)"),s.a.createElement("div",K({className:"border-2 border-dashed border-gray-300 rounded-md p-6 text-center cursor-pointer hover:border-teal-500"}),s.a.createElement("input",X()),s.a.createElement("div",{className:"space-y-1 text-center"},s.a.createElement(at.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("div",{className:"flex text-sm text-gray-600"},s.a.createElement("p",{className:"pl-1"},"Glissez-d\ufffdposez des photos ici, ou cliquez pour s\ufffdlectionner des photos")),s.a.createElement("p",{className:"text-xs text-gray-500"},"PNG, JPG, JPEG jusqu'\ufffd 5MB"))),H.length>0&&s.a.createElement("div",{className:"mt-4"},s.a.createElement("h3",{className:"text-md font-medium mb-2"},"Photos s\ufffdlectionn\ufffdes"),s.a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-2"},H.map((e,t)=>s.a.createElement("div",{key:t,className:"relative"},s.a.createElement("img",{src:e.preview,alt:"Photo "+(t+1),className:"h-32 w-full object-cover rounded-md"}),s.a.createElement("button",{type:"button",className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",onClick:()=>(e=>{const t=[...W],a=[...H];URL.revokeObjectURL(H[e].preview),t.splice(e,1),a.splice(e,1),G(t),Q(a)})(t)},s.a.createElement(ve.a,{className:"h-4 w-4"})))))),s.a.createElement("div",{className:"mt-8 bg-gray-50 p-4 rounded-md"},s.a.createElement("h3",{className:"text-lg font-medium mb-2"},"R\ufffdcapitulatif"),s.a.createElement("p",{className:"text-gray-600 mb-4"},"V\ufffdrifiez les informations de votre annonce avant de la publier."),s.a.createElement("div",{className:"space-y-4"},s.a.createElement("div",null,s.a.createElement("h4",{className:"text-sm font-bold text-gray-700"},"Type de transport"),s.a.createElement("p",null,"colis"===te.values.typeTransport?"Colis":"meuble"===te.values.typeTransport?"Meuble":"marchandise"===te.values.typeTransport?"Marchandise":"palette"===te.values.typeTransport?"Palette":"demenagement"===te.values.typeTransport?"D\ufffdm\ufffdnagement":"vehicule"===te.values.typeTransport?"V\ufffdhicule":"Autre")),s.a.createElement("div",null,s.a.createElement("h4",{className:"text-sm font-bold text-gray-700"},"Trajet"),s.a.createElement("p",null,te.values.adresseDepart.ville," ? ",te.values.adresseArrivee.ville)),s.a.createElement("div",null,s.a.createElement("h4",{className:"text-sm font-bold text-gray-700"},"Date de d\ufffdpart"),s.a.createElement("p",null,te.values.dateDepart?te.values.dateDepart.toLocaleDateString("fr-FR"):"-")),te.values.budget&&s.a.createElement("div",null,s.a.createElement("h4",{className:"text-sm font-bold text-gray-700"},"Budget"),s.a.createElement("p",null,te.values.budget," \ufffd"))))),s.a.createElement("div",{className:"mt-8 flex justify-between"},U>1?s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>{J(U-1)}},"Pr\ufffdc\ufffddent"):s.a.createElement("div",null),U<4?s.a.createElement(w,{type:"button",variant:"primary",onClick:()=>{(()=>{let e={};return 1===U?(te.values.titre||(e.titre="Le titre est obligatoire"),te.values.description||(e.description="La description est obligatoire"),te.values.typeTransport||(e.typeTransport="Le type de transport est obligatoire")):2===U&&(te.values.villeDepart||(e.villeDepart="La ville de d\ufffdpart est obligatoire"),te.values.adresseDepart.rue||(e["adresseDepart.rue"]="L'adresse de d\ufffdpart est obligatoire"),te.values.adresseDepart.codePostal||(e["adresseDepart.codePostal"]="Le code postal de d\ufffdpart est obligatoire"),te.values.adresseDepart.ville||(e["adresseDepart.ville"]="La ville de d\ufffdpart est obligatoire"),te.values.villeArrivee||(e.villeArrivee="La ville d'arriv\ufffde est obligatoire"),te.values.adresseArrivee.rue||(e["adresseArrivee.rue"]="L'adresse d'arriv\ufffde est obligatoire"),te.values.adresseArrivee.codePostal||(e["adresseArrivee.codePostal"]="Le code postal d'arriv\ufffde est obligatoire"),te.values.adresseArrivee.ville||(e["adresseArrivee.ville"]="La ville d'arriv\ufffde est obligatoire")),0===Object.keys(e).length})()?J(U+1):o.toast.error("Veuillez remplir tous les champs obligatoires")}},"Suivant"):s.a.createElement(w,{type:"submit",variant:"primary",isLoading:_,disabled:_},"Publier l'annonce")))))},st=a(219);var lt=()=>{const{id:e}=Object(i.t)(),t=Object(i.r)(),[a,l]=Object(r.useState)(!1),[n,m]=Object(r.useState)(!0),[c,d]=Object(r.useState)(null),[p,v]=Object(r.useState)(0),[x,g]=Object(r.useState)(!1),[E,b]=Object(r.useState)([]),[f,y]=Object(r.useState)([]),[N,j]=Object(r.useState)(!1),C=P.d({titre:P.f().required("Le titre est obligatoire").min(5,"Le titre doit comporter au moins 5 caract\ufffdres").max(100,"Le titre ne doit pas d\ufffdpasser 100 caract\ufffdres"),description:P.f().required("La description est obligatoire").min(20,"La description doit comporter au moins 20 caract\ufffdres").max(1e3,"La description ne doit pas d\ufffdpasser 1000 caract\ufffdres"),typeTransport:P.f().required("Le type de transport est obligatoire"),villeDepart:P.f().required("La ville de d\ufffdpart est obligatoire"),villeArrivee:P.f().required("La ville d'arriv\ufffde est obligatoire"),dateDepart:P.b().required("La date de d\ufffdpart est obligatoire").min(new Date,"La date de d\ufffdpart doit \ufffdtre dans le futur"),poids:P.c().when("typeTransport",{is:e=>["colis","marchandise","palette"].includes(e),then:()=>P.c().required("Le poids est obligatoire").positive("Le poids doit \ufffdtre positif"),otherwise:()=>P.c().nullable()}),volume:P.c().when("typeTransport",{is:e=>["meuble","demenagement"].includes(e),then:()=>P.c().required("Le volume est obligatoire").positive("Le volume doit \ufffdtre positif"),otherwise:()=>P.c().nullable()}),dimensions:P.f(),valeurDeclaree:P.c().nullable().positive("La valeur d\ufffdclar\ufffde doit \ufffdtre positive"),isUrgent:P.a(),instructionsSpeciales:P.f()}),k=Object(T.a)({initialValues:{titre:"",description:"",typeTransport:"",villeDepart:"",villeArrivee:"",dateDepart:"",poids:"",volume:"",dimensions:"",valeurDeclaree:"",isUrgent:!1,instructionsSpeciales:""},validationSchema:C,onSubmit:async a=>{try{l(!0);const r={...a,poids:a.poids?parseFloat(a.poids):void 0,volume:a.volume?parseFloat(a.volume):void 0,valeurDeclaree:a.valeurDeclaree?parseFloat(a.valeurDeclaree):void 0};if(await Xe.updateAnnonce(e,r),E.length>0){g(!0);const t=new FormData;E.forEach(e=>{t.append("images",e)}),await Xe.uploadImages(e,t)}o.toast.success("Annonce mise \ufffd jour avec succ\ufffds"),t("/dashboard/annonces/"+e)}catch(c){console.error("Erreur lors de la mise \ufffd jour de l'annonce:",c),o.toast.error(c.message||"Erreur lors de la mise \ufffd jour de l'annonce")}finally{l(!1),g(!1)}}});Object(r.useEffect)(()=>{(async()=>{try{var a,r,s;m(!0);const l=(await u.get("/annonces/"+e)).data.data;if("disponible"!==l.statut)return o.toast.error("Cette annonce ne peut plus \ufffdtre modifi\ufffde"),void t("/dashboard/annonces/"+e);let n="";if(l.dateDepart){n=new Date(l.dateDepart).toISOString().split("T")[0]}k.setValues({titre:l.titre||"",description:l.description||"",typeTransport:l.typeTransport||"",villeDepart:l.villeDepart||"",villeArrivee:l.villeArrivee||"",dateDepart:n,poids:(null===(a=l.poids)||void 0===a?void 0:a.toString())||"",volume:(null===(r=l.volume)||void 0===r?void 0:r.toString())||"",dimensions:l.dimensions||"",valeurDeclaree:(null===(s=l.valeurDeclaree)||void 0===s?void 0:s.toString())||"",isUrgent:l.isUrgent||!1,instructionsSpeciales:l.instructionsSpeciales||""}),l.images&&l.images.length>0&&y(l.images),d(null)}catch(l){console.error("Erreur lors du chargement de l'annonce:",l),d("Impossible de charger les d\ufffdtails de l'annonce"),o.toast.error("Erreur lors du chargement de l'annonce")}finally{m(!1)}})()},[e,t]);const{getRootProps:D,getInputProps:S}=Object(We.a)({accept:{"image/*":[".jpeg",".jpg",".png"]},maxSize:5242880,onDrop:e=>{const t=e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)}));b([...E,...t])},onDropRejected:e=>{e.forEach(e=>{var t,a;"file-too-large"===(null===(t=e.errors[0])||void 0===t?void 0:t.code)?o.toast.error(e.file.name+" est trop volumineux. Taille maximale: 5MB"):o.toast.error(`${e.file.name}: ${null===(a=e.errors[0])||void 0===a?void 0:a.message}`)})}});return s.a.useEffect(()=>()=>{E.forEach(e=>URL.revokeObjectURL(e.preview))},[E]),n?s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"flex items-center justify-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}))):c?s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("div",{className:"text-center"},s.a.createElement(_.a,{className:"mx-auto h-12 w-12 text-red-500"}),s.a.createElement("h3",{className:"mt-2 text-lg font-medium text-gray-900"},"Erreur"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},c),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{to:"/dashboard/annonces",variant:"primary"},"Retour \ufffd mes annonces")))))):s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"md:flex md:items-center md:justify-between mb-6"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl"},"Modifier l'annonce"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Mettez \ufffd jour votre demande de transport")),s.a.createElement("div",{className:"mt-4 flex md:mt-0 md:ml-4"},s.a.createElement(w,{type:"button",variant:"danger",onClick:()=>j(!0),className:"mr-3"},s.a.createElement(Ke.a,{className:"h-5 w-5 mr-1"}),"Supprimer"),s.a.createElement(w,{to:"/dashboard/annonces/"+e,variant:"outline"},"Annuler"))),s.a.createElement("form",{onSubmit:k.handleSubmit,className:"space-y-8"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6"},s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement(F,{id:"titre",name:"titre",type:"text",label:"Titre de l'annonce",placeholder:"Ex: Transport de meuble Paris-Lyon",value:k.values.titre,onChange:k.handleChange,onBlur:k.handleBlur,error:k.touched.titre&&k.errors.titre,touched:k.touched.titre,icon:s.a.createElement(Re.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement("label",{htmlFor:"typeTransport",className:"block text-sm font-medium text-gray-700"},"Type de transport ",s.a.createElement("span",{className:"text-red-500"},"*")),s.a.createElement("div",{className:"mt-1 relative rounded-md shadow-sm"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(h.a,{className:"h-5 w-5 text-gray-400"})),s.a.createElement("select",{id:"typeTransport",name:"typeTransport",className:"pl-10 focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border-gray-300 rounded-md",value:k.values.typeTransport,onChange:k.handleChange,onBlur:k.handleBlur},s.a.createElement("option",{value:""},"S\ufffdlectionner un type"),Object.entries(Y).map(e=>{let[t,a]=e;return s.a.createElement("option",{key:t,value:t},a)}))),k.touched.typeTransport&&k.errors.typeTransport&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},k.errors.typeTransport)),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"villeDepart",name:"villeDepart",type:"text",label:"Ville de d\ufffdpart",placeholder:"Ex: Paris",value:k.values.villeDepart,onChange:k.handleChange,onBlur:k.handleBlur,error:k.touched.villeDepart&&k.errors.villeDepart,touched:k.touched.villeDepart,icon:s.a.createElement(B.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"villeArrivee",name:"villeArrivee",type:"text",label:"Ville d'arriv\ufffde",placeholder:"Ex: Lyon",value:k.values.villeArrivee,onChange:k.handleChange,onBlur:k.handleBlur,error:k.touched.villeArrivee&&k.errors.villeArrivee,touched:k.touched.villeArrivee,icon:s.a.createElement(B.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"dateDepart",name:"dateDepart",type:"date",label:"Date de d\ufffdpart",value:k.values.dateDepart,onChange:k.handleChange,onBlur:k.handleBlur,error:k.touched.dateDepart&&k.errors.dateDepart,touched:k.touched.dateDepart,icon:s.a.createElement($.a,{className:"h-5 w-5 text-gray-400"}),required:!0,min:(new Date).toISOString().split("T")[0]})),["colis","marchandise","palette"].includes(k.values.typeTransport)&&s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"poids",name:"poids",type:"number",step:"0.1",label:"Poids (kg)",placeholder:"Ex: 25.5",value:k.values.poids,onChange:k.handleChange,onBlur:k.handleBlur,error:k.touched.poids&&k.errors.poids,touched:k.touched.poids,required:!0,min:"0"})),["meuble","demenagement"].includes(k.values.typeTransport)&&s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"volume",name:"volume",type:"number",step:"0.1",label:"Volume (m\ufffd)",placeholder:"Ex: 2.5",value:k.values.volume,onChange:k.handleChange,onBlur:k.handleBlur,error:k.touched.volume&&k.errors.volume,touched:k.touched.volume,required:!0,min:"0"})),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"dimensions",name:"dimensions",type:"text",label:"Dimensions (optionnel)",placeholder:"Ex: 120x80x60 cm",value:k.values.dimensions,onChange:k.handleChange,onBlur:k.handleBlur,error:k.touched.dimensions&&k.errors.dimensions,touched:k.touched.dimensions})),s.a.createElement("div",{className:"sm:col-span-3"},s.a.createElement(F,{id:"valeurDeclaree",name:"valeurDeclaree",type:"number",step:"0.01",label:"Valeur d\ufffdclar\ufffde (\ufffd) (optionnel)",placeholder:"Ex: 500",value:k.values.valeurDeclaree,onChange:k.handleChange,onBlur:k.handleBlur,error:k.touched.valeurDeclaree&&k.errors.valeurDeclaree,touched:k.touched.valeurDeclaree,min:"0"})),s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("div",{className:"relative flex items-start"},s.a.createElement("div",{className:"flex items-center h-5"},s.a.createElement("input",{id:"isUrgent",name:"isUrgent",type:"checkbox",className:"focus:ring-teal-500 h-4 w-4 text-teal-600 border-gray-300 rounded",checked:k.values.isUrgent,onChange:k.handleChange})),s.a.createElement("div",{className:"ml-3 text-sm"},s.a.createElement("label",{htmlFor:"isUrgent",className:"font-medium text-gray-700"},"Demande urgente"),s.a.createElement("p",{className:"text-gray-500"},"Cochez cette case si votre demande est urgente et n\ufffdcessite une attention particuli\ufffdre.")))),s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700"},"Description ",s.a.createElement("span",{className:"text-red-500"},"*")),s.a.createElement("div",{className:"mt-1"},s.a.createElement("textarea",{id:"description",name:"description",rows:6,className:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"D\ufffdcrivez en d\ufffdtail ce que vous souhaitez transporter, les conditions particuli\ufffdres, etc.",value:k.values.description,onChange:k.handleChange,onBlur:k.handleBlur})),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500"},k.values.description.length,"/1000 caract\ufffdres"),k.touched.description&&k.errors.description&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},k.errors.description)),s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("label",{htmlFor:"instructionsSpeciales",className:"block text-sm font-medium text-gray-700"},"Instructions sp\ufffdciales (optionnel)"),s.a.createElement("div",{className:"mt-1"},s.a.createElement("textarea",{id:"instructionsSpeciales",name:"instructionsSpeciales",rows:3,className:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"Informations suppl\ufffdmentaires pour le transporteur (acc\ufffds, horaires, etc.)",value:k.values.instructionsSpeciales,onChange:k.handleChange,onBlur:k.handleBlur}))),f.length>0&&s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("h3",{className:"text-sm font-medium text-gray-700"},"Images existantes"),s.a.createElement("div",{className:"mt-2 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6"},f.map(t=>s.a.createElement("div",{key:t._id,className:"relative group"},s.a.createElement("div",{className:"aspect-w-1 aspect-h-1 rounded-lg bg-gray-100 overflow-hidden"},s.a.createElement("img",{src:t.url,alt:"Image de l'annonce",className:"object-cover"}),s.a.createElement("button",{type:"button",className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(async t=>{try{await u.delete(`/annonces/${e}/images/${t}`),y(f.filter(e=>e._id!==t)),o.toast.success("Image supprim\ufffde avec succ\ufffds")}catch(c){console.error("Erreur lors de la suppression de l'image:",c),o.toast.error("Erreur lors de la suppression de l'image")}})(t._id)},s.a.createElement(ve.a,{className:"h-4 w-4 text-gray-500"}))))))),s.a.createElement("div",{className:"sm:col-span-6"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Ajouter des images (optionnel)"),s.a.createElement("div",Object.assign({},D(),{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"}),s.a.createElement("div",{className:"space-y-1 text-center"},s.a.createElement(st.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("div",{className:"flex text-sm text-gray-600"},s.a.createElement("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-teal-600 hover:text-teal-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-teal-500"},s.a.createElement("span",null,"T\ufffdl\ufffdcharger des images"),s.a.createElement("input",S())),s.a.createElement("p",{className:"pl-1"},"ou glissez-d\ufffdposez")),s.a.createElement("p",{className:"text-xs text-gray-500"},"PNG, JPG, JPEG jusqu'\ufffd 5MB"))),E.length>0&&s.a.createElement("div",{className:"mt-4"},s.a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Nouvelles images (",E.length,")"),s.a.createElement("div",{className:"mt-2 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6"},E.map((e,t)=>s.a.createElement("div",{key:t,className:"relative group"},s.a.createElement("div",{className:"aspect-w-1 aspect-h-1 rounded-lg bg-gray-100 overflow-hidden"},s.a.createElement("img",{src:e.preview,alt:"Aper\ufffdu "+(t+1),className:"object-cover"}),s.a.createElement("button",{type:"button",className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>(e=>{const t=[...E];URL.revokeObjectURL(t[e].preview),t.splice(e,1),b(t)})(t)},s.a.createElement(ve.a,{className:"h-4 w-4 text-gray-500"}))),s.a.createElement("p",{className:"mt-1 text-xs text-gray-500 truncate"},e.name))))))))),s.a.createElement("div",{className:"flex justify-end space-x-3"},s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>t("/dashboard/annonces/"+e)},"Annuler"),s.a.createElement(w,{type:"submit",variant:"primary",isLoading:a||x,disabled:a||x},x?`T\ufffdl\ufffdchargement (${p}%)`:a?"Mise \ufffd jour...":"Enregistrer les modifications"))),N&&s.a.createElement("div",{className:"fixed z-10 inset-0 overflow-y-auto"},s.a.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},s.a.createElement("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true"},s.a.createElement("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})),s.a.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200b"),s.a.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},s.a.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},s.a.createElement("div",{className:"sm:flex sm:items-start"},s.a.createElement("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})),s.a.createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},s.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"Supprimer l'annonce"),s.a.createElement("div",{className:"mt-2"},s.a.createElement("p",{className:"text-sm text-gray-500"},"Etes-vous s\ufffdr de vouloir supprimer cette annonce ? Cette action est irr\ufffdversible."))))),s.a.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},s.a.createElement(w,{type:"button",variant:"danger",onClick:async()=>{try{l(!0),await Xe.deleteAnnonce(e),o.toast.success("Annonce supprim\ufffde avec succ\ufffds"),t("/dashboard/annonces")}catch(c){console.error("Erreur lors de la suppression de l'annonce:",c),o.toast.error(c.message||"Erreur lors de la suppression de l'annonce")}finally{l(!1),j(!1)}},isLoading:a,disabled:a,className:"sm:ml-3"},"Supprimer"),s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:a,className:"mt-3 sm:mt-0"},"Annuler"))))))};var nt=e=>{let{annonceId:t,devisId:a}=e;const[l,n]=Object(r.useState)(null),[m,c]=Object(r.useState)(!0),[o,d]=Object(r.useState)(null),{id:p}=Object(i.t)(),v=t||p;if(Object(r.useEffect)(()=>{v&&(async()=>{try{c(!0);const e=await u.get("/tracking/"+v);n(e.data.data),c(!1)}catch(e){console.error("Error fetching tracking data:",e),d("Impossible de r\xe9cup\xe9rer les informations de suivi."),c(!1)}})()},[v]),m)return s.a.createElement("div",{className:"flex items-center justify-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}));if(o)return s.a.createElement("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert"},s.a.createElement("strong",{className:"font-bold"},"Erreur!"),s.a.createElement("span",{className:"block sm:inline"}," ",o));if(!l||!l.tracking)return s.a.createElement("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6"},s.a.createElement("div",{className:"flex items-center justify-center"},s.a.createElement(f.a,{className:"h-12 w-12 text-gray-400"})),s.a.createElement("p",{className:"text-center text-gray-600 mt-4"},"Le suivi de ce transport n'est pas encore disponible. Il sera activ\xe9 d\xe8s que le transporteur aura pris en charge votre demande."));const{tracking:x,statut:g}=l,E={en_attente:{label:"En attente de prise en charge",color:"bg-yellow-100 text-yellow-800",icon:f.a,description:"Le transporteur n'a pas encore commenc\xe9 le transport."},pris_en_charge:{label:"Pris en charge",color:"bg-blue-100 text-blue-800",icon:V.a,description:"Le transporteur a accept\xe9 votre demande et va pr\xe9parer le transport."},en_transit:{label:"En transit",color:"bg-indigo-100 text-indigo-800",icon:h.a,description:"Votre colis est en cours de transport."},en_livraison:{label:"En cours de livraison",color:"bg-purple-100 text-purple-800",icon:h.a,description:"La livraison est en cours \xe0 l'adresse de destination."},livre:{label:"Livr\xe9",color:"bg-green-100 text-green-800",icon:V.a,description:"Votre colis a \xe9t\xe9 livr\xe9 avec succ\xe8s."},probleme:{label:"Probl\xe8me",color:"bg-red-100 text-red-800",icon:_.a,description:"Un probl\xe8me est survenu durant le transport. Le transporteur va vous contacter."}},b=E[x.statut]||E.en_attente,y=b.icon;return s.a.createElement("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden"},s.a.createElement("div",{className:`px-6 py-4 ${b.color} flex items-center justify-between`},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(y,{className:"h-6 w-6 mr-2"}),s.a.createElement("h3",{className:"text-lg font-semibold"},b.label)),x.codeTracking&&s.a.createElement("div",{className:"text-sm"},"Code de suivi: ",s.a.createElement("span",{className:"font-mono font-medium"},x.codeTracking))),s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("p",{className:"text-gray-600"},b.description)),s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("div",{className:"relative"},s.a.createElement("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true"},s.a.createElement("div",{className:"h-0.5 w-full bg-gray-200"})),s.a.createElement("div",{className:"relative flex justify-between"},s.a.createElement("div",{className:"flex flex-col items-center"},s.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center "+(["en_attente","pris_en_charge","en_transit","en_livraison","livre"].includes(x.statut)?"bg-teal-500 text-white":"bg-gray-300 text-gray-500")},"1"),s.a.createElement("div",{className:"text-xs text-center mt-1"},"Prise en charge")),s.a.createElement("div",{className:"flex flex-col items-center"},s.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center "+(["en_transit","en_livraison","livre"].includes(x.statut)?"bg-teal-500 text-white":"bg-gray-300 text-gray-500")},"2"),s.a.createElement("div",{className:"text-xs text-center mt-1"},"En transit")),s.a.createElement("div",{className:"flex flex-col items-center"},s.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center "+(["en_livraison","livre"].includes(x.statut)?"bg-teal-500 text-white":"bg-gray-300 text-gray-500")},"3"),s.a.createElement("div",{className:"text-xs text-center mt-1"},"En livraison")),s.a.createElement("div",{className:"flex flex-col items-center"},s.a.createElement("div",{className:"rounded-full h-8 w-8 flex items-center justify-center "+("livre"===x.statut?"bg-teal-500 text-white":"bg-gray-300 text-gray-500")},"4"),s.a.createElement("div",{className:"text-xs text-center mt-1"},"Livr\xe9"))))),x.historique&&x.historique.length>0&&s.a.createElement("div",{className:"px-6 py-4 border-t border-gray-200"},s.a.createElement("h4",{className:"text-sm font-semibold text-gray-700 mb-4"},"Historique du suivi"),s.a.createElement("div",{className:"space-y-4"},x.historique.map((e,t)=>{const a=E[e.statut]||{},r=a.icon||f.a;return s.a.createElement("div",{key:t,className:"flex items-start"},s.a.createElement("div",{className:`rounded-full h-6 w-6 flex items-center justify-center ${a.color||"bg-gray-100"} mr-3`},s.a.createElement(r,{className:"h-4 w-4"})),s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"flex justify-between"},s.a.createElement("p",{className:"text-sm font-medium text-gray-900"},a.label||e.statut),s.a.createElement("p",{className:"text-xs text-gray-500"},Object(G.default)(new Date(e.date),"dd MMM yyyy \xe0 HH:mm",{locale:H.a}))),(e.commentaire||e.localisation)&&s.a.createElement("div",{className:"mt-1 text-sm text-gray-600"},e.commentaire&&s.a.createElement("p",null,e.commentaire),e.localisation&&s.a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Localisation: ",e.localisation))))}))))},mt=a(220),ct=a(221),ot=a(222);var it=e=>{let{annonceId:t,recipientId:a}=e;const[l,n]=Object(r.useState)([]),[m,c]=Object(r.useState)(""),[d,p]=Object(r.useState)(!1),[v,x]=Object(r.useState)([]),[g,h]=Object(r.useState)(null),[b,f]=Object(r.useState)(null),{id:y}=Object(i.t)(),N=Object(r.useRef)(null),j=Object(r.useRef)(null),{user:C}=E(),k=t||y&&y.split("_")[0],D=a||y&&y.split("_")[1];Object(r.useEffect)(()=>{const e=async()=>{if(k&&D)try{p(!0);const e=await u.get(`/messages/conversation/${k}/${D}`);n(e.data.data),e.data.data.some(e=>!e.lu&&e.expediteur._id!==C.id)&&await u.put(`/messages/mark-read/${k}/${D}`)}catch(e){console.error("Error fetching messages:",e),o.toast.error("Erreur lors du chargement des messages")}finally{p(!1)}};e(),(async()=>{if(D)try{const e=await u.get("/users/profile/"+D);h(e.data.data)}catch(e){console.error("Error fetching recipient info:",e)}})(),(async()=>{if(k)try{const e=await u.get("/annonces/"+k);f(e.data.data)}catch(e){console.error("Error fetching annonce info:",e)}})();const t=setInterval(e,3e4);return()=>clearInterval(t)},[k,D,C.id]),Object(r.useEffect)(()=>{var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[l]);return k&&D?s.a.createElement("div",{className:"flex flex-col h-full"},s.a.createElement("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex-shrink-0 overflow-hidden"},g&&g.photo?s.a.createElement("img",{src:g.photo,alt:`${g.prenom} ${g.nom}`,className:"h-full w-full object-cover"}):s.a.createElement("div",{className:"h-full w-full flex items-center justify-center bg-teal-500 text-white font-semibold"},g&&g.prenom?g.prenom.charAt(0):"?")),s.a.createElement("div",{className:"ml-3"},s.a.createElement("h3",{className:"text-sm font-medium text-gray-900"},g?`${g.prenom} ${g.nom}`:"Chargement..."),b&&s.a.createElement("p",{className:"text-xs text-gray-500"},b.titre.length>40?b.titre.substring(0,40)+"...":b.titre))),s.a.createElement("div",null,s.a.createElement(w,{variant:"outline",size:"sm",onClick:()=>{(async()=>{try{p(!0);const e=await u.get(`/messages/conversation/${k}/${D}`);n(e.data.data),o.toast.success("Messages mis \xe0 jour")}catch(e){console.error("Error refreshing messages:",e),o.toast.error("Erreur lors de l'actualisation des messages")}finally{p(!1)}})()}},s.a.createElement(Qe.a,{className:"h-4 w-4 mr-1"}),"Actualiser"))),s.a.createElement("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50"},d&&0===l.length?s.a.createElement("div",{className:"flex items-center justify-center h-full"},s.a.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-teal-500"})):0===l.length?s.a.createElement("div",{className:"text-center py-8"},s.a.createElement("p",{className:"text-gray-500"},"Aucun message. D\xe9marrez la conversation !")):s.a.createElement("div",{className:"space-y-4"},l.map((e,t)=>{const a=e.expediteur._id===C.id;return s.a.createElement("div",{key:e._id||t,className:"flex "+(a?"justify-end":"justify-start")},s.a.createElement("div",{className:`max-w-xs lg:max-w-md ${a?"bg-teal-500 text-white":"bg-white border border-gray-200"} rounded-lg px-4 py-2 shadow-sm`},s.a.createElement("div",{className:"text-sm"},e.contenu),e.pieceJointe&&s.a.createElement("div",{className:"mt-2 border-t border-gray-200 pt-2"},s.a.createElement("a",{href:e.pieceJointe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-xs "+(a?"text-teal-100 hover:text-white":"text-teal-600 hover:text-teal-700")},s.a.createElement(mt.a,{className:"h-4 w-4 mr-1"}),"Pi\xe8ce jointe")),s.a.createElement("div",{className:"text-xs mt-1 "+(a?"text-teal-100":"text-gray-500")},(e=>{const t=new Date(e),a=new Date,r=new Date(a);return r.setDate(r.getDate()-1),t.toDateString()===a.toDateString()?"Aujourd'hui \xe0 "+Object(G.default)(t,"HH:mm"):t.toDateString()===r.toDateString()?"Hier \xe0 "+Object(G.default)(t,"HH:mm"):Object(G.default)(t,"dd MMM yyyy \xe0 HH:mm",{locale:H.a})})(e.createdAt))))}),s.a.createElement("div",{ref:N}))),v.length>0&&s.a.createElement("div",{className:"px-4 py-2 bg-gray-100 border-t border-gray-200"},s.a.createElement("div",{className:"text-sm font-medium text-gray-700 mb-2"},"Pi\xe8ces jointes (",v.length,")"),s.a.createElement("div",{className:"flex flex-wrap gap-2"},v.map((e,t)=>{const a=e.type.startsWith("image/")?st.a:mt.a;var r;return s.a.createElement("div",{key:t,className:"relative bg-white border border-gray-200 rounded-md p-2 flex items-center"},e.preview?s.a.createElement("div",{className:"h-10 w-10 mr-2 flex-shrink-0"},s.a.createElement("img",{src:e.preview,alt:e.name,className:"h-full w-full object-cover rounded"})):s.a.createElement(a,{className:"h-6 w-6 text-gray-500 mr-2"}),s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("div",{className:"text-xs font-medium text-gray-900 truncate"},e.name),s.a.createElement("div",{className:"text-xs text-gray-500"},(r=e.size)<1024?r+" B":r<1048576?(r/1024).toFixed(1)+" KB":(r/1048576).toFixed(1)+" MB")),s.a.createElement("button",{type:"button",className:"text-gray-400 hover:text-gray-500",onClick:()=>(e=>{const t=[...v];t[e].preview&&URL.revokeObjectURL(t[e].preview),t.splice(e,1),x(t)})(t)},s.a.createElement(ve.a,{className:"h-5 w-5"})))}))),s.a.createElement("div",{className:"bg-white border-t border-gray-200 p-4"},s.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),(m.trim()||0!==v.length)&&k&&D)try{let e;if(p(!0),v.length>0){const t=new FormData;t.append("contenu",m),t.append("destinataire",D),t.append("annonce",k),v.forEach(e=>{t.append("pieceJointes",e.file)}),e=await u.post("/messages/with-attachments",t,{headers:{"Content-Type":"multipart/form-data"}})}else e=await u.post("/messages",{contenu:m,destinataire:D,annonce:k});n([...l,e.data.data]),c(""),v.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),x([])}catch(t){console.error("Error sending message:",t),o.toast.error("Erreur lors de l'envoi du message")}finally{p(!1)}},className:"flex items-end"},s.a.createElement("div",{className:"flex-1 mr-2"},s.a.createElement("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent min-h-[80px] resize-none",placeholder:"\xc9crivez votre message...",value:m,onChange:e=>{c(e.target.value)},rows:3})),s.a.createElement("div",{className:"flex space-x-2"},s.a.createElement("button",{type:"button",onClick:()=>j.current.click(),className:"inline-flex items-center justify-center h-10 w-10 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200"},s.a.createElement(ct.a,{className:"h-5 w-5"}),s.a.createElement("input",{type:"file",ref:j,onChange:e=>{const t=Array.from(e.target.files),a=t.filter(e=>e.size<=5242880),r=t.filter(e=>e.size>5242880);r.length>0&&o.toast.error(r.length+" fichier(s) d\xe9passent la taille limite de 5MB");const s=a.map(e=>({file:e,preview:e.type.startsWith("image/")?URL.createObjectURL(e):null,name:e.name,type:e.type,size:e.size}));x([...v,...s])},multiple:!0,className:"hidden",accept:"image/*, application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),s.a.createElement("button",{type:"submit",disabled:!m.trim()&&0===v.length||d,className:"inline-flex items-center justify-center h-10 px-4 rounded-md bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed"},s.a.createElement(ot.a,{className:"h-5 w-5 mr-1"}),"Envoyer"))))):s.a.createElement("div",{className:"text-center p-8"},s.a.createElement("p",{className:"text-gray-500"},"Veuillez s\xe9lectionner une conversation"))};var dt=()=>{var e,t,a,l,n,m,c,d,p;const{id:v}=Object(i.t)(),x=Object(i.r)(),{user:g}=E(),[b,f]=Object(r.useState)(null),[y,N]=Object(r.useState)([]),[j,C]=Object(r.useState)(null),[k,D]=Object(r.useState)(!0),[S,A]=Object(r.useState)(null),[O,L]=Object(r.useState)(!1),[M,T]=Object(r.useState)(!1),[P,z]=Object(r.useState)(null),[q,F]=Object(r.useState)(!1),[R,I]=Object(r.useState)(null),[U,J]=Object(r.useState)(""),[W,G]=Object(r.useState)("details"),[H,Q]=Object(r.useState)(!1);Object(r.useEffect)(()=>{(async()=>{try{D(!0);const e=await u.get("/annonces/"+v);f(e.data.data);const t=await u.get("/devis/annonce/"+v);N(t.data.data);const a=t.data.data.find(e=>"accepte"===e.statut||"en_cours"===e.statut||"termine"===e.statut);a&&C(a),A(null)}catch(e){console.error("Erreur lors du chargement des donn\ufffdes:",e),A("Impossible de charger les d\ufffdtails de l'annonce"),o.toast.error("Erreur lors du chargement des d\ufffdtails de l'annonce")}finally{D(!1)}})()},[v]);const Y=g&&b&&g.id===(null===(e=b.client)||void 0===e?void 0:e._id);return k?s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"flex items-center justify-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}))):S||!b?s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("div",{className:"text-center"},s.a.createElement(_.a,{className:"mx-auto h-12 w-12 text-red-500"}),s.a.createElement("h3",{className:"mt-2 text-lg font-medium text-gray-900"},"Erreur"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},S||"Cette annonce n'existe pas ou a \ufffdt\ufffd supprim\ufffde."),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{to:"/dashboard/annonces",variant:"primary"},"Retour \ufffd mes annonces")))))):s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"md:flex md:items-center md:justify-between mb-6"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl"},b.titre),s.a.createElement("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-4"},s.a.createElement("div",{className:"mt-2 flex items-center text-sm text-gray-500"},s.a.createElement(h.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.a.createElement("span",{className:"capitalize"},b.typeTransport||"Transport")),s.a.createElement("div",{className:"mt-2 flex items-center text-sm text-gray-500"},s.a.createElement(B.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),b.villeDepart," ? ",b.villeArrivee),s.a.createElement("div",{className:"mt-2 flex items-center text-sm text-gray-500"},s.a.createElement($.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),et(b.dateDepart)),s.a.createElement("div",{className:"mt-2 flex items-center text-sm"},(e=>{const t=re[e]||"bg-gray-100 text-gray-800";return s.a.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+t},ae[e]||e)})(b.statut)))),s.a.createElement("div",{className:"mt-4 flex md:mt-0 md:ml-4"},Y&&"disponible"===b.statut&&s.a.createElement(s.a.Fragment,null,s.a.createElement(w,{to:`/dashboard/annonces/${v}/edit`,variant:"outline",className:"mr-3"},s.a.createElement(Ze.a,{className:"h-5 w-5 mr-1"}),"Modifier"),s.a.createElement(w,{type:"button",variant:"danger",onClick:()=>L(!0)},s.a.createElement(Ke.a,{className:"h-5 w-5 mr-1"}),"Supprimer")))),s.a.createElement("div",{className:"border-b border-gray-200 mb-6"},s.a.createElement("nav",{className:"flex -mb-px"},s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("details"===W?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>G("details")},"D\ufffdtails"),Y&&s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("devis"===W?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>G("devis")},"Devis ",y.length>0&&`(${y.length})`),(j||"disponible"!==b.statut)&&s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("suivi"===W?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>G("suivi")},"Suivi"),s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("messages"===W?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>G("messages")},"Messages"))),"details"===W&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"D\ufffdtails de l'annonce")),s.a.createElement("div",{className:"border-t border-gray-200"},s.a.createElement("dl",null,s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Description"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 whitespace-pre-line"},b.description)),s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Client"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},b.client?s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden mr-3"},b.client.photo?s.a.createElement("img",{src:b.client.photo,alt:`${b.client.prenom} ${b.client.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(Ne.a,{className:"h-6 w-6 text-gray-400"})),s.a.createElement("div",null,s.a.createElement("p",{className:"font-medium"},b.client.prenom," ",b.client.nom),b.client.averageRating&&s.a.createElement("div",{className:"flex items-center mt-1"},s.a.createElement(je.a,{className:"h-4 w-4 text-yellow-400"}),s.a.createElement("span",{className:"ml-1 text-xs text-gray-500"},b.client.averageRating.toFixed(1)," (",b.client.reviewCount," avis)")))):"Information non disponible")),s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Type de transport"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 capitalize"},b.typeTransport)),s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Trajet"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("p",{className:"font-medium"},b.villeDepart)),s.a.createElement("div",{className:"h-px w-4 bg-gray-300 mx-2"}),s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("p",{className:"font-medium"},b.villeArrivee))))),s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Date de d\ufffdpart"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},et(b.dateDepart))),b.poids&&s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Poids"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},b.poids," kg")),b.volume&&s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Volume"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},b.volume," m\ufffd")),b.dimensions&&s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Dimensions"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},b.dimensions)),b.valeurDeclaree&&s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Valeur d\ufffdclar\ufffde"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},b.valeurDeclaree," \ufffd")),b.isUrgent&&s.a.createElement("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Urgence"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},s.a.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},"Demande urgente"))),b.instructionsSpeciales&&s.a.createElement("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Instructions sp\ufffdciales"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 whitespace-pre-line"},b.instructionsSpeciales)))),b.images&&b.images.length>0&&s.a.createElement("div",{className:"px-4 py-5 sm:px-6 border-t border-gray-200"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Images"),s.a.createElement("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4"},b.images.map(e=>s.a.createElement("div",{key:e._id,className:"relative"},s.a.createElement("div",{className:"aspect-w-1 aspect-h-1 rounded-lg bg-gray-100 overflow-hidden"},s.a.createElement("img",{src:e.url,alt:"Image de l'annonce",className:"object-cover"}))))))),"devis"===W&&Y&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Devis re\ufffdus (",y.length,")"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Comparez les offres des transporteurs et s\ufffdlectionnez celle qui vous convient le mieux.")),0===y.length?s.a.createElement("div",{className:"px-4 py-12 text-center border-t border-gray-200"},s.a.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},s.a.createElement("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})),s.a.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"Aucun devis"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Vous n'avez pas encore re\ufffdu de devis pour cette annonce.")):s.a.createElement("div",{className:"overflow-x-auto"},s.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},s.a.createElement("thead",{className:"bg-gray-50"},s.a.createElement("tr",null,s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transporteur"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Montant"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Livraison pr\ufffdvue"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),s.a.createElement("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions"))),s.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},y.map(e=>{var t,a,r,l;return s.a.createElement("tr",{key:e._id},s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden"},(null===(t=e.transporteur)||void 0===t?void 0:t.photo)?s.a.createElement("img",{src:e.transporteur.photo,alt:`${e.transporteur.prenom} ${e.transporteur.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(Ne.a,{className:"h-6 w-6 text-gray-400"})),s.a.createElement("div",{className:"ml-4"},s.a.createElement("div",{className:"text-sm font-medium text-gray-900"},null===(a=e.transporteur)||void 0===a?void 0:a.prenom," ",null===(r=e.transporteur)||void 0===r?void 0:r.nom),(null===(l=e.transporteur)||void 0===l?void 0:l.averageRating)&&s.a.createElement("div",{className:"flex items-center"},s.a.createElement(je.a,{className:"h-4 w-4 text-yellow-400"}),s.a.createElement("span",{className:"ml-1 text-xs text-gray-500"},e.transporteur.averageRating.toFixed(1)," (",e.transporteur.reviewCount," avis)"))))),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.a.createElement("div",{className:"text-sm font-medium text-gray-900"},e.montant," \ufffd")),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.a.createElement("div",{className:"text-sm text-gray-900"},et(e.delaiLivraison))),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.a.createElement("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("en_attente"===e.statut?"bg-yellow-100 text-yellow-800":"accepte"===e.statut||"en_cours"===e.statut?"bg-green-100 text-green-800":"refuse"===e.statut?"bg-red-100 text-red-800":"termine"===e.statut?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800")},"en_attente"===e.statut?"En attente":"accepte"===e.statut?"Accept\ufffd":"en_cours"===e.statut?"En cours":"refuse"===e.statut?"Refus\ufffd":"termine"===e.statut?"Termin\ufffd":"annule"===e.statut?"Annul\ufffd":e.statut)),s.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},s.a.createElement("div",{className:"flex justify-end space-x-2"},s.a.createElement(w,{to:"/dashboard/devis/"+e._id,variant:"outline",size:"sm"},"D\ufffdtails"),"en_attente"===e.statut&&"disponible"===b.statut&&s.a.createElement(s.a.Fragment,null,s.a.createElement(w,{variant:"primary",size:"sm",onClick:()=>{z(e),T(!0)}},"Accepter"),s.a.createElement(w,{variant:"danger",size:"sm",onClick:()=>{I(e),F(!0)}},"Refuser")))))}))))),"suivi"===W&&s.a.createElement("div",{className:"space-y-6"},s.a.createElement(nt,{annonceId:v}),j&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"D\ufffdtails du transport"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Informations sur le transporteur et les conditions du transport")),s.a.createElement("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0"},s.a.createElement("dl",{className:"sm:divide-y sm:divide-gray-200"},s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Transporteur"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden mr-3"},(null===(t=j.transporteur)||void 0===t?void 0:t.photo)?s.a.createElement("img",{src:j.transporteur.photo,alt:`${j.transporteur.prenom} ${j.transporteur.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(Ne.a,{className:"h-6 w-6 text-gray-400"})),s.a.createElement("div",null,s.a.createElement("p",{className:"font-medium"},null===(a=j.transporteur)||void 0===a?void 0:a.prenom," ",null===(l=j.transporteur)||void 0===l?void 0:l.nom),(null===(n=j.transporteur)||void 0===n?void 0:n.averageRating)&&s.a.createElement("div",{className:"flex items-center mt-1"},s.a.createElement(je.a,{className:"h-4 w-4 text-yellow-400"}),s.a.createElement("span",{className:"ml-1 text-xs text-gray-500"},j.transporteur.averageRating.toFixed(1)," (",j.transporteur.reviewCount," avis)")))))),s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Montant"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},s.a.createElement("span",{className:"font-semibold"},j.montant," \ufffd"))),s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Livraison pr\ufffdvue"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},et(j.delaiLivraison))),s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Message du transporteur"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 whitespace-pre-line"},j.message)))))),"messages"===W&&s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg h-[600px]"},b.client&&s.a.createElement(it,{annonceId:v,recipientId:Y?null:b.client._id})),O&&s.a.createElement("div",{className:"fixed z-10 inset-0 overflow-y-auto"},s.a.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},s.a.createElement("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true"},s.a.createElement("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})),s.a.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200b"),s.a.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},s.a.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},s.a.createElement("div",{className:"sm:flex sm:items-start"},s.a.createElement("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})),s.a.createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},s.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"Supprimer l'annonce"),s.a.createElement("div",{className:"mt-2"},s.a.createElement("p",{className:"text-sm text-gray-500"},"Etes-vous s\ufffdr de vouloir supprimer cette annonce ? Cette action est irr\ufffdversible."))))),s.a.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},s.a.createElement(w,{type:"button",variant:"danger",onClick:async()=>{try{Q(!0),await Xe.deleteAnnonce(v),o.toast.success("Annonce supprim\ufffde avec succ\ufffds"),x("/dashboard/annonces")}catch(S){console.error("Erreur lors de la suppression de l'annonce:",S),o.toast.error(S.message||"Erreur lors de la suppression de l'annonce")}finally{Q(!1),L(!1)}},isLoading:H,disabled:H,className:"sm:ml-3"},"Supprimer"),s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>L(!1),disabled:H,className:"mt-3 sm:mt-0"},"Annuler"))))),M&&P&&s.a.createElement("div",{className:"fixed z-10 inset-0 overflow-y-auto"},s.a.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},s.a.createElement("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true"},s.a.createElement("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})),s.a.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200b"),s.a.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},s.a.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},s.a.createElement("div",{className:"sm:flex sm:items-start"},s.a.createElement("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10"},s.a.createElement(V.a,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})),s.a.createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},s.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"Accepter le devis"),s.a.createElement("div",{className:"mt-2"},s.a.createElement("p",{className:"text-sm text-gray-500"},"Vous \ufffdtes sur le point d'accepter le devis de ",null===(m=P.transporteur)||void 0===m?void 0:m.prenom," ",null===(c=P.transporteur)||void 0===c?void 0:c.nom," pour un montant de ",P.montant," \ufffd."),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Une fois accept\ufffd, vous ne pourrez plus revenir en arri\ufffdre ni accepter d'autres devis pour cette annonce."))))),s.a.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},s.a.createElement(w,{type:"button",variant:"primary",onClick:async()=>{if(P)try{Q(!0),await u.put(`/devis/${P._id}/accepter`),o.toast.success("Devis accept\ufffd avec succ\ufffds");const e=await u.get("/annonces/"+v);f(e.data.data);const t=await u.get("/devis/annonce/"+v);N(t.data.data);const a=t.data.data.find(e=>e._id===P._id);C(a),T(!1),z(null),G("suivi")}catch(S){console.error("Erreur lors de l'acceptation du devis:",S),o.toast.error(S.message||"Erreur lors de l'acceptation du devis")}finally{Q(!1)}},isLoading:H,disabled:H,className:"sm:ml-3"},"Confirmer"),s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>{T(!1),z(null)},disabled:H,className:"mt-3 sm:mt-0"},"Annuler"))))),q&&R&&s.a.createElement("div",{className:"fixed z-10 inset-0 overflow-y-auto"},s.a.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},s.a.createElement("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true"},s.a.createElement("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})),s.a.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200b"),s.a.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},s.a.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},s.a.createElement("div",{className:"sm:flex sm:items-start"},s.a.createElement("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},s.a.createElement(XMarkIcon,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})),s.a.createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},s.a.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},"Refuser le devis"),s.a.createElement("div",{className:"mt-2"},s.a.createElement("p",{className:"text-sm text-gray-500"},"Vous \ufffdtes sur le point de refuser le devis de ",null===(d=R.transporteur)||void 0===d?void 0:d.prenom," ",null===(p=R.transporteur)||void 0===p?void 0:p.nom,"."),s.a.createElement("div",{className:"mt-4"},s.a.createElement("label",{htmlFor:"rejectReason",className:"block text-sm font-medium text-gray-700"},"Motif du refus (optionnel)"),s.a.createElement("div",{className:"mt-1"},s.a.createElement("textarea",{id:"rejectReason",name:"rejectReason",rows:3,className:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"Indiquez la raison de votre refus...",value:U,onChange:e=>J(e.target.value)}))))))),s.a.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},s.a.createElement(w,{type:"button",variant:"danger",onClick:async()=>{if(R)try{Q(!0),await u.put(`/devis/${R._id}/refuser`,{raison:U}),o.toast.success("Devis refus\ufffd avec succ\ufffds");const e=await u.get("/devis/annonce/"+v);N(e.data.data),F(!1),I(null),J("")}catch(S){console.error("Erreur lors du refus du devis:",S),o.toast.error(S.message||"Erreur lors du refus du devis")}finally{Q(!1)}},isLoading:H,disabled:H,className:"sm:ml-3"},"Refuser le devis"),s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>{F(!1),I(null),J("")},disabled:H,className:"mt-3 sm:mt-0"},"Annuler"))))))};var ut=()=>{const{user:e}=E(),[t,a]=Object(r.useState)([]),[l,n]=Object(r.useState)(!0),[m,c]=Object(r.useState)(null),[i,d]=Object(r.useState)(1),[p,v]=Object(r.useState)(1),[x,g]=Object(r.useState)({statut:"",dateDebut:"",dateFin:"",tri:"recent"}),[h,b]=Object(r.useState)(!1);Object(r.useEffect)(()=>{(async()=>{try{n(!0);const t="transporteur"===e.role?"/devis/mes-devis":"/devis/recus",r={page:i,limit:10,...x},s=await u.get(t,{params:r});a(s.data.data),v(s.data.totalPages||1),c(null)}catch(t){console.error("Erreur lors du chargement des devis:",t),c("Erreur lors du chargement des devis. Veuillez r\ufffdessayer."),o.toast.error("Erreur lors du chargement des devis")}finally{n(!1)}})()},[e.role,i,x]);const y=()=>{d(1),fetchDevis()},N=e=>{e>0&&e<=p&&d(e)};return s.a.createElement("div",{className:"max-w-7xl mx-auto"},s.a.createElement("div",{className:"flex justify-between items-center mb-6"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"transporteur"===e.role?"Mes devis envoy\ufffds":"Devis re\ufffdus"),s.a.createElement("div",{className:"flex space-x-3"},s.a.createElement(w,{variant:"outline",onClick:()=>b(!h)},s.a.createElement(ke.a,{className:"h-5 w-5 mr-2"}),"Filtres"),s.a.createElement(w,{variant:"outline",onClick:y,disabled:l},s.a.createElement(Qe.a,{className:"h-5 w-5 mr-2"}),"Actualiser"))),h&&s.a.createElement("div",{className:"bg-white shadow rounded-lg p-4 mb-6"},s.a.createElement("div",{className:"flex justify-between items-center mb-4"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Filtrer les devis"),s.a.createElement("button",{type:"button",className:"text-gray-400 hover:text-gray-500",onClick:()=>b(!1)},s.a.createElement(ve.a,{className:"h-5 w-5"}))),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"statut",className:"block text-sm font-medium text-gray-700 mb-1"},"Statut"),s.a.createElement("select",{id:"statut",name:"statut",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm",value:x.statut,onChange:e=>g({...x,statut:e.target.value})},s.a.createElement("option",{value:""},"Tous les statuts"),s.a.createElement("option",{value:"en_attente"},"En attente"),s.a.createElement("option",{value:"accepte"},"Accept\ufffd"),s.a.createElement("option",{value:"refuse"},"Refus\ufffd"),s.a.createElement("option",{value:"annule"},"Annul\ufffd"),s.a.createElement("option",{value:"expire"},"Expir\ufffd"),s.a.createElement("option",{value:"en_cours"},"En cours"),s.a.createElement("option",{value:"termine"},"Termin\ufffd"))),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"dateDebut",className:"block text-sm font-medium text-gray-700 mb-1"},"Date de d\ufffdbut"),s.a.createElement("input",{type:"date",id:"dateDebut",name:"dateDebut",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm",value:x.dateDebut,onChange:e=>g({...x,dateDebut:e.target.value})})),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"dateFin",className:"block text-sm font-medium text-gray-700 mb-1"},"Date de fin"),s.a.createElement("input",{type:"date",id:"dateFin",name:"dateFin",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm",value:x.dateFin,onChange:e=>g({...x,dateFin:e.target.value})})),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"tri",className:"block text-sm font-medium text-gray-700 mb-1"},"Trier par"),s.a.createElement("select",{id:"tri",name:"tri",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm",value:x.tri,onChange:e=>g({...x,tri:e.target.value})},s.a.createElement("option",{value:"recent"},"Plus r\ufffdcents"),s.a.createElement("option",{value:"ancien"},"Plus anciens"),s.a.createElement("option",{value:"montant_asc"},"Montant croissant"),s.a.createElement("option",{value:"montant_desc"},"Montant d\ufffdcroissant")))),s.a.createElement("div",{className:"mt-4 flex justify-end space-x-3"},s.a.createElement(w,{variant:"outline",onClick:()=>{g({statut:"",dateDebut:"",dateFin:"",tri:"recent"}),d(1)}},"R\ufffdinitialiser"),s.a.createElement(w,{variant:"primary",onClick:()=>{d(1)}},"Appliquer"))),l?s.a.createElement("div",{className:"flex justify-center items-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})):m?s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-500 mr-2"}),s.a.createElement("div",null,s.a.createElement("p",{className:"text-red-700"},m),s.a.createElement(w,{variant:"outline",size:"sm",className:"mt-2",onClick:y},"R\ufffdessayer")))):0===t.length?s.a.createElement("div",{className:"bg-white shadow rounded-lg p-6 text-center"},s.a.createElement(Re.a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"transporteur"===e.role?"Vous n'avez pas encore envoy\ufffd de devis":"Vous n'avez pas encore re\ufffdu de devis"),s.a.createElement("p",{className:"text-gray-500 mb-6"},"transporteur"===e.role?"Parcourez les annonces pour proposer vos services de transport.":"Cr\ufffdez une annonce pour recevoir des devis de transporteurs."),s.a.createElement(w,{to:"transporteur"===e.role?"/annonces":"/dashboard/annonces/create",variant:"primary"},"transporteur"===e.role?"Parcourir les annonces":"Cr\ufffder une annonce")):s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},s.a.createElement("ul",{className:"divide-y divide-gray-200"},t.map(t=>{const r="transporteur"===e.role?t.client:t.transporteur,l=t.annonce;return s.a.createElement("li",{key:t._id,className:"hover:bg-gray-50"},s.a.createElement("div",{className:"px-6 py-5"},s.a.createElement("div",{className:"flex items-center justify-between"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0"},r.photo?s.a.createElement("img",{className:"h-10 w-10 rounded-full object-cover",src:r.photo,alt:`${r.prenom} ${r.nom}`}):s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-teal-500 flex items-center justify-center"},s.a.createElement(Ne.a,{className:"h-6 w-6 text-white"}))),s.a.createElement("div",{className:"ml-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},r.prenom," ",r.nom),s.a.createElement("p",{className:"text-sm text-gray-500"},"transporteur"===e.role?"Client":"Transporteur"))),s.a.createElement("div",{className:"flex flex-col items-end space-y-1"},s.a.createElement("span",{className:"text-2xl font-bold text-gray-900"},t.montant.toFixed(2)," \ufffd"),s.a.createElement("span",{className:"px-2 py-1 inline-flex text-xs font-medium rounded-full "+ue[t.statut]},de[t.statut]))),s.a.createElement("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4"},s.a.createElement("div",{className:"bg-gray-50 p-3 rounded-lg"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(Re.a,{className:"h-5 w-5 text-gray-400 mr-1.5"}),s.a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Annonce")),s.a.createElement("div",{className:"mt-1.5"},s.a.createElement("p",{className:"text-sm font-medium text-gray-900"},l.titre),s.a.createElement("p",{className:"text-xs text-gray-500 flex items-center mt-1"},s.a.createElement(B.a,{className:"h-4 w-4 text-gray-400 mr-1"}),l.villeDepart," ? ",l.villeArrivee))),s.a.createElement("div",{className:"bg-gray-50 p-3 rounded-lg"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(f.a,{className:"h-5 w-5 text-gray-400 mr-1.5"}),s.a.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Dates")),s.a.createElement("div",{className:"mt-1.5 grid grid-cols-2 gap-2"},s.a.createElement("div",null,s.a.createElement("p",{className:"text-xs text-gray-500"},"D\ufffdpart demand\ufffd"),s.a.createElement("p",{className:"text-sm text-gray-900"},Object(G.default)(new Date(l.dateDepart),"dd MMM yyyy",{locale:H.a}))),s.a.createElement("div",null,s.a.createElement("p",{className:"text-xs text-gray-500"},"Livraison estim\ufffde"),s.a.createElement("p",{className:"text-sm text-gray-900"},Object(G.default)(new Date(t.delaiLivraison),"dd MMM yyyy",{locale:H.a})))))),s.a.createElement("div",{className:"mt-4"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-1 text-sm text-gray-500"},"Devis cr\ufffd\ufffd le ",Object(G.default)(new Date(t.createdAt),"dd MMMM yyyy",{locale:H.a})),s.a.createElement("div",{className:"flex space-x-2"},s.a.createElement(w,{to:"/dashboard/devis/"+t._id,variant:"outline",size:"sm"},"Voir les d\ufffdtails"),"client"===e.role&&"en_attente"===t.statut&&s.a.createElement(s.a.Fragment,null,s.a.createElement(w,{variant:"primary",size:"sm",onClick:()=>(async e=>{try{await u.put(`/devis/${e}/accepter`),o.toast.success("Devis accept\ufffd avec succ\ufffds"),a(t=>t.map(t=>t._id===e?{...t,statut:"accepte"}:t))}catch(t){console.error("Erreur lors de l'acceptation du devis:",t),o.toast.error("Erreur lors de l'acceptation du devis")}})(t._id)},"Accepter"),s.a.createElement(w,{variant:"danger",size:"sm",onClick:()=>(async e=>{try{await u.put(`/devis/${e}/refuser`,{raison:"Refus\ufffd par le client"}),o.toast.success("Devis refus\ufffd avec succ\ufffds"),a(t=>t.map(t=>t._id===e?{...t,statut:"refuse"}:t))}catch(t){console.error("Erreur lors du refus du devis:",t),o.toast.error("Erreur lors du refus du devis")}})(t._id)},"Refuser")),"transporteur"===e.role&&"en_attente"===t.statut&&s.a.createElement(w,{variant:"danger",size:"sm",onClick:()=>(async e=>{try{await u.put(`/devis/${e}/annuler`,{raison:"Annul\ufffd par le transporteur"}),o.toast.success("Devis annul\ufffd avec succ\ufffds"),a(t=>t.map(t=>t._id===e?{...t,statut:"annule"}:t))}catch(t){console.error("Erreur lors de l'annulation du devis:",t),o.toast.error("Erreur lors de l'annulation du devis")}})(t._id)},"Annuler"))))))}))),p>1&&s.a.createElement("div",{className:"mt-6 flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 rounded-md shadow"},s.a.createElement("div",{className:"flex flex-1 justify-between sm:hidden"},s.a.createElement(w,{variant:"outline",onClick:()=>N(i-1),disabled:1===i},"Pr\ufffdc\ufffddent"),s.a.createElement(w,{variant:"outline",onClick:()=>N(i+1),disabled:i===p},"Suivant")),s.a.createElement("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},s.a.createElement("div",null,s.a.createElement("p",{className:"text-sm text-gray-700"},"Affichage de la page ",s.a.createElement("span",{className:"font-medium"},i)," sur ",s.a.createElement("span",{className:"font-medium"},p))),s.a.createElement("div",null,s.a.createElement("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},s.a.createElement("button",{onClick:()=>N(i-1),disabled:1===i,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"},s.a.createElement("span",{className:"sr-only"},"Pr\ufffdc\ufffddent"),s.a.createElement(U.a,{className:"h-5 w-5","aria-hidden":"true"})),[...Array(p)].map((e,t)=>{const a=t+1;return 1===a||a===p||a>=i-1&&a<=i+1?s.a.createElement("button",{key:a,onClick:()=>N(a),className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold "+(a===i?"bg-teal-600 text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0")},a):2===a&&i>3||a===p-1&&i<p-2?s.a.createElement("span",{key:a,className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0"},"..."):null}),s.a.createElement("button",{onClick:()=>N(i+1),disabled:i===p,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"},s.a.createElement("span",{className:"sr-only"},"Suivant"),s.a.createElement(J.a,{className:"h-5 w-5","aria-hidden":"true"})))))))};var pt={createDevis:async e=>{try{return(await u.post("/devis",e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la cr\xe9ation du devis"}}},getDevisForAnnonce:async e=>{try{return(await u.get("/devis/annonce/"+e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration des devis"}}},getMesDevisEnvoyes:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await u.get("/devis/mes-devis",{params:e})).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration de vos devis"}}},getMesDevisRecus:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await u.get("/devis/recus",{params:e})).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration des devis re\xe7us"}}},getDevisById:async e=>{try{return(await u.get("/devis/"+e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la r\xe9cup\xe9ration du devis"}}},accepterDevis:async e=>{try{return(await u.put(`/devis/${e}/accepter`)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de l'acceptation du devis"}}},refuserDevis:async(e,t)=>{try{return(await u.put(`/devis/${e}/refuser`,{raison:t})).data}catch(r){var a;throw(null===(a=r.response)||void 0===a?void 0:a.data)||{message:"Erreur lors du refus du devis"}}},annulerDevis:async(e,t)=>{try{return(await u.put(`/devis/${e}/annuler`,{raison:t})).data}catch(r){var a;throw(null===(a=r.response)||void 0===a?void 0:a.data)||{message:"Erreur lors de l'annulation du devis"}}},updateStatutTransport:async(e,t,a,r)=>{try{return(await u.put(`/devis/${e}/statut`,{statut:t,commentaire:a,localisation:r})).data}catch(l){var s;throw(null===(s=l.response)||void 0===s?void 0:s.data)||{message:"Erreur lors de la mise \xe0 jour du statut"}}},updateDevis:async(e,t)=>{try{return(await u.put("/devis/"+e,t)).data}catch(r){var a;throw(null===(a=r.response)||void 0===a?void 0:a.data)||{message:"Erreur lors de la modification du devis"}}}};var vt=()=>{var e,t;const{annonceId:a}=Object(i.t)(),l=Object(i.r)(),[n,m]=Object(r.useState)(!1),[c,d]=Object(r.useState)(null),[p,v]=Object(r.useState)(!0),[x,g]=Object(r.useState)(null),E=P.d({montant:P.c().required("Le montant est obligatoire").positive("Le montant doit \ufffdtre positif").typeError("Le montant doit \ufffdtre un nombre"),delaiLivraison:P.b().required("La date de livraison est obligatoire").min(new Date,"La date de livraison doit \ufffdtre dans le futur").typeError("Veuillez entrer une date valide"),message:P.f().required("Un message est obligatoire").min(20,"Le message doit comporter au moins 20 caract\ufffdres").max(1e3,"Le message ne doit pas d\ufffdpasser 1000 caract\ufffdres"),conditions:P.a().oneOf([!0],"Vous devez accepter les conditions g\ufffdn\ufffdrales")}),b=Object(T.a)({initialValues:{montant:"",delaiLivraison:"",message:"",conditions:!1},validationSchema:E,onSubmit:async e=>{try{m(!0);const t={annonceId:a,montant:parseFloat(e.montant),delaiLivraison:e.delaiLivraison,message:e.message},r=await pt.createDevis(t);o.toast.success("Devis envoy\ufffd avec succ\ufffds"),l("/dashboard/devis/"+r.data._id)}catch(t){console.error("Erreur lors de la cr\ufffdation du devis:",t),o.toast.error(t.message||"Erreur lors de la cr\ufffdation du devis")}finally{m(!1)}}});return Object(r.useEffect)(()=>{a&&(async()=>{try{v(!0);const e=await u.get("/annonces/"+a);d(e.data.data),g(null),e.data.data.dateArrivee&&b.setFieldValue("delaiLivraison",new Date(e.data.data.dateArrivee))}catch(e){console.error("Erreur lors du chargement de l'annonce:",e),g("Impossible de charger les d\ufffdtails de l'annonce"),o.toast.error("Erreur lors du chargement des d\ufffdtails de l'annonce")}finally{v(!1)}})()},[a]),p?s.a.createElement("div",{className:"flex justify-center items-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})):x||!c?s.a.createElement("div",{className:"bg-white shadow rounded-lg p-6"},s.a.createElement("div",{className:"text-center text-red-600 mb-4"},s.a.createElement("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})),s.a.createElement("h2",{className:"text-lg font-medium mt-2"},x||"Cette annonce n'existe pas ou a \ufffdt\ufffd supprim\ufffde.")),s.a.createElement("div",{className:"text-center"},s.a.createElement(w,{to:"/annonces",variant:"primary"},"Retour aux annonces"))):s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"md:flex md:items-center md:justify-between mb-6"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl"},"Cr\ufffder un devis"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Proposez votre offre pour cette demande de transport")),s.a.createElement("div",{className:"mt-4 flex md:mt-0 md:ml-4"},s.a.createElement(w,{to:"/annonces/"+a,variant:"outline"},"Retour \ufffd l'annonce"))),s.a.createElement("div",{className:"grid grid-cols-1 gap-x-4 gap-y-8 md:grid-cols-3"},s.a.createElement("div",{className:"md:col-span-1"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"D\ufffdtails de l'annonce"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Informations sur la demande de transport")),s.a.createElement("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0"},s.a.createElement("dl",{className:"sm:divide-y sm:divide-gray-200"},s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(h.a,{className:"mr-1 h-5 w-5 text-gray-400"}),"Type"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 capitalize"},c.typeTransport||"Non sp\ufffdcifi\ufffd")),s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(B.a,{className:"mr-1 h-5 w-5 text-gray-400"}),"Trajet"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("p",{className:"font-medium"},c.villeDepart)),s.a.createElement("div",{className:"h-px w-4 bg-gray-300 mx-2"}),s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("p",{className:"font-medium"},c.villeArrivee))))),s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement($.a,{className:"mr-1 h-5 w-5 text-gray-400"}),"Date de d\ufffdpart"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},et(c.dateDepart))),s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(Ne.a,{className:"mr-1 h-5 w-5 text-gray-400"}),"Client"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},null===(e=c.client)||void 0===e?void 0:e.prenom," ",null===(t=c.client)||void 0===t?void 0:t.nom)),c.poids&&s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Poids"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},c.poids," kg")),c.volume&&s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Volume"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},c.volume," m\ufffd")),c.description&&s.a.createElement("div",{className:"py-3 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Description"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},c.description)))))),s.a.createElement("div",{className:"md:col-span-2"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("form",{onSubmit:b.handleSubmit},s.a.createElement("div",{className:"space-y-6"},s.a.createElement("div",null,s.a.createElement(F,{id:"montant",name:"montant",type:"number",step:"0.01",label:"Montant propos\ufffd (\ufffd)",placeholder:"Ex: 250.00",value:b.values.montant,onChange:b.handleChange,onBlur:b.handleBlur,error:b.touched.montant&&b.errors.montant,touched:b.touched.montant,icon:s.a.createElement(y.a,{className:"h-5 w-5 text-gray-400"}),required:!0})),s.a.createElement("div",null,s.a.createElement(F,{id:"delaiLivraison",name:"delaiLivraison",type:"date",label:"Date de livraison pr\ufffdvue",value:b.values.delaiLivraison?new Date(b.values.delaiLivraison).toISOString().split("T")[0]:"",onChange:b.handleChange,onBlur:b.handleBlur,error:b.touched.delaiLivraison&&b.errors.delaiLivraison,touched:b.touched.delaiLivraison,icon:s.a.createElement(f.a,{className:"h-5 w-5 text-gray-400"}),required:!0,min:(new Date).toISOString().split("T")[0]})),s.a.createElement("div",null,s.a.createElement("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700"},"Message au client"),s.a.createElement("div",{className:"mt-1"},s.a.createElement("textarea",{id:"message",name:"message",rows:6,className:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"D\ufffdcrivez votre offre, vos conditions, votre exp\ufffdrience...",value:b.values.message,onChange:b.handleChange,onBlur:b.handleBlur})),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Soyez pr\ufffdcis et professionnel pour augmenter vos chances d'\ufffdtre s\ufffdlectionn\ufffd."),b.touched.message&&b.errors.message&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},b.errors.message)),s.a.createElement("div",{className:"relative flex items-start"},s.a.createElement("div",{className:"flex items-center h-5"},s.a.createElement("input",{id:"conditions",name:"conditions",type:"checkbox",className:"focus:ring-teal-500 h-4 w-4 text-teal-600 border-gray-300 rounded",checked:b.values.conditions,onChange:b.handleChange})),s.a.createElement("div",{className:"ml-3 text-sm"},s.a.createElement("label",{htmlFor:"conditions",className:"font-medium text-gray-700"},"J'accepte les conditions g\ufffdn\ufffdrales"),s.a.createElement("p",{className:"text-gray-500"},"En soumettant ce devis, je m'engage \ufffd respecter les termes et d\ufffdlais propos\ufffds."),b.touched.conditions&&b.errors.conditions&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},b.errors.conditions))),s.a.createElement("div",{className:"pt-5 border-t border-gray-200"},s.a.createElement("div",{className:"flex justify-end"},s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>l("/annonces/"+a),className:"mr-3"},"Annuler"),s.a.createElement(w,{type:"submit",variant:"primary",isLoading:n,disabled:n},"Envoyer le devis"))))))),s.a.createElement("div",{className:"mt-6 bg-blue-50 rounded-lg border border-blue-100 p-4"},s.a.createElement("h3",{className:"text-lg font-medium text-blue-800"},"Conseils pour un bon devis"),s.a.createElement("ul",{className:"mt-2 list-disc pl-5 text-sm text-blue-700 space-y-1"},s.a.createElement("li",null,"Soyez transparent sur les co\ufffdts et les services inclus"),s.a.createElement("li",null,"Pr\ufffdcisez les d\ufffdlais de livraison r\ufffdalistes"),s.a.createElement("li",null,"Mettez en avant votre exp\ufffdrience et vos qualifications"),s.a.createElement("li",null,"D\ufffdtaillez les mesures de s\ufffdcurit\ufffd que vous prendrez pour prot\ufffdger les biens"),s.a.createElement("li",null,"Proposez des options additionnelles si pertinent (emballage, assurance, etc.)"))))))},xt=a(226),gt=a(223),Et=a(224),ht=a(225);var bt=e=>{let{devisId:t,montant:a,onPaymentComplete:l}=e;const[n,m]=Object(r.useState)(!1),[c,i]=Object(r.useState)(null),[d,p]=Object(r.useState)("card"),[v,x]=Object(r.useState)({cardNumber:"",cardName:"",expiry:"",cvc:"",saveCard:!1}),[g,E]=Object(r.useState)([]),[h,b]=Object(r.useState)(null),[f,y]=Object(r.useState)(!0);Object(r.useEffect)(()=>{(async()=>{try{const e=await u.get("/payment-methods");E(e.data.data),e.data.data.length>0&&y(!1)}catch(e){console.error("Error fetching saved cards:",e)}})()},[]);const j=e=>{const{name:t,value:a,type:r,checked:s}=e.target;x({...v,[t]:"checkbox"===r?s:a})},C=e=>{p(e),i(null)};return s.a.createElement("div",{className:"bg-white rounded-lg shadow p-6"},s.a.createElement("h2",{className:"text-xl font-semibold mb-4"},"Paiement"),s.a.createElement("div",{className:"bg-gray-50 rounded-md p-4 mb-6"},s.a.createElement("div",{className:"flex justify-between items-center"},s.a.createElement("span",{className:"text-gray-600"},"Montant \xe0 payer :"),s.a.createElement("span",{className:"text-xl font-bold"},a.toFixed(2)," \u20ac"))),c&&s.a.createElement("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-5 w-5 text-red-500 mr-2"}),s.a.createElement("span",{className:"text-red-700"},c))),s.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),i(null),m(!0);try{if("card"===d&&f){if(x=v.cardNumber,!/^(\d{4}\s){3}\d{4}$/.test(x))throw new Error("Num\xe9ro de carte invalide");if(!(e=>{if(!e)return!1;if(!/^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(e))return!1;const[t,a]=e.split("/");return new Date(2e3+parseInt(a),parseInt(t)-1)>new Date})(v.expiry))throw new Error("Date d'expiration invalide");if(p=v.cvc,!/^\d{3,4}$/.test(p))throw new Error("Code de s\xe9curit\xe9 invalide");if(!v.cardName)throw new Error("Veuillez entrer le nom sur la carte")}const e={devisId:t,montant:a,methodePaiement:d,..."card"===d&&{carte:h?{id:h}:{numero:v.cardNumber.replace(/\s/g,""),nom:v.cardName,expiration:v.expiry,cvc:v.cvc,sauvegarder:v.saveCard}}},r=await u.post("/payments",e);o.toast.success("Paiement effectu\xe9 avec succ\xe8s !"),l&&l(r.data.data)}catch(g){var r,s,n,c;console.error("Error processing payment:",g),i((null===(r=g.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||g.message||"Une erreur est survenue lors du paiement"),o.toast.error((null===(n=g.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||g.message||"\xc9chec du paiement")}finally{m(!1)}var p,x}},s.a.createElement("div",{className:"mb-6"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-3"},"M\xe9thode de paiement"),s.a.createElement("div",{className:"grid grid-cols-3 gap-3"},s.a.createElement("div",{className:"border rounded-md p-3 text-center cursor-pointer transition-colors "+("card"===d?"border-teal-500 bg-teal-50 text-teal-700":"border-gray-300 hover:border-gray-400"),onClick:()=>C("card")},s.a.createElement(gt.a,{className:"h-6 w-6 mx-auto mb-1"}),s.a.createElement("span",{className:"text-sm"},"Carte bancaire")),s.a.createElement("div",{className:"border rounded-md p-3 text-center cursor-pointer transition-colors "+("virement"===d?"border-teal-500 bg-teal-50 text-teal-700":"border-gray-300 hover:border-gray-400"),onClick:()=>C("virement")},s.a.createElement(Et.a,{className:"h-6 w-6 mx-auto mb-1"}),s.a.createElement("span",{className:"text-sm"},"Virement bancaire")),s.a.createElement("div",{className:"border rounded-md p-3 text-center cursor-pointer transition-colors "+("paypal"===d?"border-teal-500 bg-teal-50 text-teal-700":"border-gray-300 hover:border-gray-400"),onClick:()=>C("paypal")},s.a.createElement(ht.a,{className:"h-6 w-6 mx-auto mb-1"}),s.a.createElement("span",{className:"text-sm"},"PayPal")))),"card"===d&&s.a.createElement(s.a.Fragment,null,g.length>0&&s.a.createElement("div",{className:"mb-6"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-3"},"Cartes enregistr\xe9es"),s.a.createElement("div",{className:"space-y-3"},g.map(e=>s.a.createElement("div",{key:e.id,className:"border rounded-md p-3 cursor-pointer transition-colors "+(h===e.id?"border-teal-500 bg-teal-50":"border-gray-300 hover:border-gray-400"),onClick:()=>{return t=e.id,b(t),void i(null);var t}},s.a.createElement("div",{className:"flex justify-between items-center"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(gt.a,{className:"h-5 w-5 mr-2 text-gray-500"}),s.a.createElement("div",null,s.a.createElement("div",{className:"font-medium"},"\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ",e.last4),s.a.createElement("div",{className:"text-sm text-gray-500"},"Expire le ",e.expMonth,"/",e.expYear))),s.a.createElement("div",{className:"flex items-center"},"visa"===e.brand&&s.a.createElement("span",{className:"text-blue-600 font-semibold"},"VISA"),"mastercard"===e.brand&&s.a.createElement("span",{className:"text-red-600 font-semibold"},"MasterCard"))))),s.a.createElement("button",{type:"button",className:"text-teal-600 font-medium text-sm hover:text-teal-700",onClick:()=>{y(!0),b(null)}},"+ Utiliser une nouvelle carte"))),f&&s.a.createElement("div",{className:"space-y-4"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"cardNumber",className:"form-label"},"Num\xe9ro de carte"),s.a.createElement("input",{id:"cardNumber",name:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",className:"form-control",value:v.cardNumber,onChange:e=>{const t=e.target.value.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim();x({...v,cardNumber:t})},maxLength:19,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"cardName",className:"form-label"},"Nom sur la carte"),s.a.createElement("input",{id:"cardName",name:"cardName",type:"text",placeholder:"JEAN DUPONT",className:"form-control",value:v.cardName,onChange:j,required:!0})),s.a.createElement("div",{className:"grid grid-cols-2 gap-4"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"expiry",className:"form-label"},"Date d'expiration (MM/YY)"),s.a.createElement("input",{id:"expiry",name:"expiry",type:"text",placeholder:"MM/YY",className:"form-control",value:v.expiry,onChange:e=>{const t=e.target.value.replace(/\//g,"").replace(/(\d{2})(\d{0,2})/,"$1/$2").trim();x({...v,expiry:t})},maxLength:5,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"cvc",className:"form-label"},"Code de s\xe9curit\xe9 (CVC)"),s.a.createElement("input",{id:"cvc",name:"cvc",type:"text",placeholder:"123",className:"form-control",value:v.cvc,onChange:j,maxLength:4,required:!0}))),s.a.createElement("div",{className:"flex items-center mt-4"},s.a.createElement("input",{id:"saveCard",name:"saveCard",type:"checkbox",className:"h-4 w-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500",checked:v.saveCard,onChange:j}),s.a.createElement("label",{htmlFor:"saveCard",className:"ml-2 text-sm text-gray-700"},"Sauvegarder cette carte pour mes prochains paiements")))),"virement"===d&&s.a.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6"},s.a.createElement("p",{className:"text-blue-700 mb-2"},s.a.createElement("strong",null,"Instructions pour le virement bancaire :")),s.a.createElement("p",{className:"text-blue-700 mb-1"},"Titulaire du compte : Pro-Trans SAS"),s.a.createElement("p",{className:"text-blue-700 mb-1"},"IBAN : FR76 1234 5678 9012 3456 7890 123"),s.a.createElement("p",{className:"text-blue-700 mb-1"},"BIC : ABCDEFGH"),s.a.createElement("p",{className:"text-blue-700 mb-1"},"Motif : Transport ",t),s.a.createElement("p",{className:"text-sm text-blue-600 mt-4"},"Attention : Votre r\xe9servation sera confirm\xe9e uniquement apr\xe8s r\xe9ception du paiement. Veuillez pr\xe9voir un d\xe9lai de 2 \xe0 3 jours ouvr\xe9s.")),"paypal"===d&&s.a.createElement("div",{className:"text-center bg-blue-50 border border-blue-200 rounded-md p-6 mb-6"},s.a.createElement("p",{className:"text-blue-700 mb-4"},"Vous allez \xeatre redirig\xe9 vers PayPal pour finaliser votre paiement."),s.a.createElement(w,{type:"button",variant:"primary",className:"bg-blue-500 hover:bg-blue-600",onClick:()=>o.toast.info("Redirection vers PayPal (simulation)")},"Payer avec PayPal")),s.a.createElement("div",{className:"mt-6 flex items-center justify-center text-sm text-gray-500"},s.a.createElement(N.a,{className:"h-5 w-5 text-green-500 mr-2"}),s.a.createElement("span",null,"Paiement 100% s\xe9curis\xe9 avec cryptage SSL")),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{type:"submit",variant:"primary",fullWidth:!0,isLoading:n,disabled:n||"card"===d&&!h&&!f},n?"Traitement en cours...":"Confirmer le paiement"))))};var ft=()=>{const{id:e}=Object(i.t)(),{user:t}=E(),[a,l]=(Object(i.r)(),Object(r.useState)(null)),[n,m]=Object(r.useState)(!0),[c,d]=Object(r.useState)(null),[p,v]=Object(r.useState)(!1);Object(r.useEffect)(()=>{(async()=>{try{m(!0);const t=await u.get("/devis/"+e);l(t.data.data),d(null)}catch(t){console.error("Erreur lors du chargement des d\ufffdtails du devis:",t),d("Erreur lors du chargement des d\ufffdtails du devis. Veuillez r\ufffdessayer."),o.toast.error("Erreur lors du chargement des d\ufffdtails du devis")}finally{m(!1)}})()},[e]);const x=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{await u.put(`/devis/${e}/statut`,{statut:t,commentaire:a,localisation:r}),o.toast.success("Statut mis \ufffd jour avec succ\ufffds");const s=await u.get("/devis/"+e);l(s.data.data)}catch(s){console.error("Erreur lors de la mise \ufffd jour du statut:",s),o.toast.error("Erreur lors de la mise \ufffd jour du statut")}},g=e=>Object(G.default)(new Date(e),"dd MMMM yyyy",{locale:H.a});if(n)return s.a.createElement("div",{className:"max-w-7xl mx-auto"},s.a.createElement("div",{className:"flex justify-center items-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})));if(c||!a)return s.a.createElement("div",{className:"max-w-7xl mx-auto"},s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-500 mr-2"}),s.a.createElement("div",null,s.a.createElement("p",{className:"text-red-700"},c||"Devis non trouv\ufffd"),s.a.createElement(w,{to:"/dashboard/devis",variant:"outline",size:"sm",className:"mt-2"},"Retour aux devis")))));const b="client"===t.role?a.transporteur:a.client,j="client"===t.role&&"en_attente"===a.statut,C="client"===t.role&&"en_attente"===a.statut,k="transporteur"===t.role&&"en_attente"===a.statut,D="transporteur"===t.role&&"accepte"===a.statut,S="client"===t.role&&"accepte"===a.statut&&!a.paiement;return s.a.createElement("div",{className:"max-w-7xl mx-auto"},s.a.createElement("div",{className:"mb-6"},s.a.createElement(w,{to:"/dashboard/devis",variant:"outline"},s.a.createElement(be.a,{className:"h-5 w-5 mr-2"}),"Retour aux devis")),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden mb-6"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},s.a.createElement("div",null,s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Devis #",a._id.substring(0,8)),s.a.createElement("p",{className:"text-sm text-gray-500"},"Cr\ufffd\ufffd le ",g(a.createdAt))),s.a.createElement("div",null,s.a.createElement("span",{className:"px-3 py-1 text-sm font-medium rounded-full "+ue[a.statut]},de[a.statut]))),s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},s.a.createElement("div",null,s.a.createElement("h2",{className:"text-lg font-medium text-gray-900 mb-4"},"Informations du devis"),s.a.createElement("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"},s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(y.a,{className:"h-5 w-5 text-gray-400 mr-1.5"}),"Montant"),s.a.createElement("dd",{className:"mt-1 text-lg font-bold text-gray-900"},a.montant.toFixed(2)," \ufffd")),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(f.a,{className:"h-5 w-5 text-gray-400 mr-1.5"}),"D\ufffdlai de livraison"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},g(a.delaiLivraison))),s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Message"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-line bg-gray-50 p-3 rounded-md"},a.message)),a.commentaires&&a.commentaires.length>0&&s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Commentaires"),s.a.createElement("dd",{className:"mt-1"},s.a.createElement("ul",{className:"border border-gray-200 rounded-md divide-y divide-gray-200"},a.commentaires.map((e,t)=>s.a.createElement("li",{key:t,className:"p-3 flex items-start"},s.a.createElement("div",{className:"min-w-0 flex-1"},s.a.createElement("p",{className:"text-sm font-medium text-gray-900"},e.auteur===a.client._id?`${a.client.prenom} ${a.client.nom} (Client)`:`${a.transporteur.prenom} ${a.transporteur.nom} (Transporteur)`),s.a.createElement("p",{className:"text-sm text-gray-500"},g(e.date)),s.a.createElement("p",{className:"mt-1 text-sm text-gray-900"},e.contenu)))))))),(j||C||k||D||S)&&s.a.createElement("div",{className:"mt-6 border-t border-gray-200 pt-6"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Actions"),s.a.createElement("div",{className:"flex flex-wrap gap-3"},j&&s.a.createElement(w,{variant:"primary",onClick:async()=>{try{await u.put(`/devis/${e}/accepter`),o.toast.success("Devis accept\ufffd avec succ\ufffds !"),l({...a,statut:"accepte"}),v(!0)}catch(t){console.error("Erreur lors de l'acceptation du devis:",t),o.toast.error("Erreur lors de l'acceptation du devis")}}},s.a.createElement(xt.a,{className:"h-5 w-5 mr-2"}),"Accepter le devis"),C&&s.a.createElement(w,{variant:"danger",onClick:async()=>{try{await u.put(`/devis/${e}/refuser`,{raison:"Refus\ufffd par le client"}),o.toast.success("Devis refus\ufffd avec succ\ufffds"),l({...a,statut:"refuse"})}catch(t){console.error("Erreur lors du refus du devis:",t),o.toast.error("Erreur lors du refus du devis")}}},s.a.createElement(ve.a,{className:"h-5 w-5 mr-2"}),"Refuser le devis"),k&&s.a.createElement(w,{variant:"danger",onClick:async()=>{try{await u.put(`/devis/${e}/annuler`,{raison:"Annul\ufffd par le transporteur"}),o.toast.success("Devis annul\ufffd avec succ\ufffds"),l({...a,statut:"annule"})}catch(t){console.error("Erreur lors de l'annulation du devis:",t),o.toast.error("Erreur lors de l'annulation du devis")}}},s.a.createElement(ve.a,{className:"h-5 w-5 mr-2"}),"Annuler le devis"),D&&s.a.createElement("div",{className:"w-full space-y-3"},s.a.createElement(w,{variant:"primary",onClick:()=>x("en_cours","Transport en cours",a.annonce.villeDepart),className:"w-full sm:w-auto"},s.a.createElement(h.a,{className:"h-5 w-5 mr-2"}),"D\ufffdmarrer le transport"),"en_cours"===a.statut&&s.a.createElement(w,{variant:"primary",onClick:()=>x("livre","Livraison effectu\ufffde",a.annonce.villeArrivee),className:"w-full sm:w-auto"},s.a.createElement(xt.a,{className:"h-5 w-5 mr-2"}),"Marquer comme livr\ufffd")),S&&s.a.createElement(w,{variant:"primary",onClick:()=>v(!0),className:"w-full sm:w-auto"},s.a.createElement(y.a,{className:"h-5 w-5 mr-2"}),"Effectuer le paiement"))),p&&s.a.createElement("div",{className:"mt-6"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Paiement"),s.a.createElement(bt,{devisId:a._id,montant:a.montant,onPaymentComplete:t=>{o.toast.success("Paiement effectu\ufffd avec succ\ufffds !"),v(!1);(async()=>{try{const t=await u.get("/devis/"+e);l(t.data.data)}catch(t){console.error("Erreur lors du chargement des d\ufffdtails du devis:",t)}})()}})),a.paiement&&s.a.createElement("div",{className:"mt-6 border-t border-gray-200 pt-6"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Informations de paiement"),s.a.createElement("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"},s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Statut"),s.a.createElement("dd",{className:"mt-1"},s.a.createElement("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800"},"Pay\ufffd"))),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Date"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},g(a.paiement.date))),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Montant"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},a.paiement.montant.toFixed(2)," \ufffd")),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"M\ufffdthode"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},"carte"===a.paiement.methode?"Carte bancaire":"virement"===a.paiement.methode?"Virement bancaire":"PayPal")),s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"R\ufffdf\ufffdrence"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},a.paiement.reference))))),s.a.createElement("div",null,s.a.createElement("div",{className:"bg-gray-50 rounded-lg p-4 mb-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900 mb-4"},"client"===t.role?"Transporteur":"Client"),s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0"},b.photo?s.a.createElement("img",{className:"h-12 w-12 rounded-full object-cover",src:b.photo,alt:`${b.prenom} ${b.nom}`}):s.a.createElement("div",{className:"h-12 w-12 rounded-full bg-teal-500 flex items-center justify-center"},s.a.createElement(Ne.a,{className:"h-6 w-6 text-white"}))),s.a.createElement("div",{className:"ml-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},b.prenom," ",b.nom),s.a.createElement("p",{className:"text-sm text-gray-500"},"Membre depuis ",Object(G.default)(new Date(b.createdAt),"MMMM yyyy",{locale:H.a})))),b.note&&s.a.createElement("div",{className:"mt-4 flex items-center"},s.a.createElement("div",{className:"flex text-yellow-400"},[...Array(5)].map((e,t)=>s.a.createElement("svg",{key:t,className:"h-5 w-5 "+(t<Math.round(b.note)?"text-yellow-400":"text-gray-300"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},s.a.createElement("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z",clipRule:"evenodd"})))),s.a.createElement("span",{className:"ml-2 text-sm text-gray-600"},b.note.toFixed(1))),s.a.createElement("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-2"},s.a.createElement(w,{to:`/dashboard/messages/${a.annonce._id}_${b._id}`,variant:"outline",size:"sm"},s.a.createElement(we.a,{className:"h-5 w-5 mr-2"}),"Contacter"),s.a.createElement(w,{to:"client"===t.role?"/transporteurs/"+b._id:"/clients/"+b._id,variant:"outline",size:"sm"},s.a.createElement(Ne.a,{className:"h-5 w-5 mr-2"}),"Voir le profil"))),s.a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900 mb-4"},"D\ufffdtails de l'annonce"),s.a.createElement("div",{className:"space-y-4"},s.a.createElement("div",null,s.a.createElement("h3",{className:"text-base font-medium text-gray-900"},a.annonce.titre),s.a.createElement("div",{className:"mt-2 flex items-center text-sm text-gray-500"},s.a.createElement(B.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.a.createElement("p",null,a.annonce.villeDepart," ? ",a.annonce.villeArrivee)),s.a.createElement("div",{className:"mt-2 flex items-center text-sm text-gray-500"},s.a.createElement($.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.a.createElement("p",null,"D\ufffdpart pr\ufffdvu le ",g(a.annonce.dateDepart))),s.a.createElement("div",{className:"mt-2 flex items-center text-sm text-gray-500"},s.a.createElement(h.a,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.a.createElement("p",null,"colis"===a.annonce.typeTransport?"Colis":"meuble"===a.annonce.typeTransport?"Meuble":"marchandise"===a.annonce.typeTransport?"Marchandise":"palette"===a.annonce.typeTransport?"Palette":"demenagement"===a.annonce.typeTransport?"D\ufffdm\ufffdnagement":"vehicule"===a.annonce.typeTransport?"V\ufffdhicule":"Autre"))),s.a.createElement("div",{className:"pt-3 border-t border-gray-200"},s.a.createElement("h4",{className:"text-sm font-medium text-gray-500"},"Description"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-900 whitespace-pre-line"},a.annonce.description.length>200?a.annonce.description.substring(0,200)+"...":a.annonce.description)),s.a.createElement("div",{className:"flex pt-3 border-t border-gray-200"},s.a.createElement(w,{to:"/dashboard/annonces/"+a.annonce._id,variant:"outline",size:"sm"},s.a.createElement(Re.a,{className:"h-5 w-5 mr-2"}),"Voir l'annonce compl\ufffdte")))))))),("accepte"===a.statut||"en_cours"===a.statut||"termine"===a.statut)&&s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden mb-6"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Suivi du transport")),s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement(nt,{devisId:a._id,annonceId:a.annonce._id}))),s.a.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden mb-6"},s.a.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Informations suppl\ufffdmentaires")),s.a.createElement("div",{className:"px-6 py-4"},s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},s.a.createElement("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start"},s.a.createElement(N.a,{className:"h-6 w-6 text-blue-500 mr-3 flex-shrink-0 mt-0.5"}),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-sm font-medium text-blue-800"},"Protection acheteur"),s.a.createElement("p",{className:"mt-1 text-sm text-blue-700"},"Tous les transports effectu\ufffds via Pro-Trans sont assur\ufffds. Votre paiement est s\ufffdcuris\ufffd et n'est vers\ufffd au transporteur qu'une fois la livraison confirm\ufffde."))),s.a.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},s.a.createElement("h3",{className:"text-sm font-medium text-gray-800"},"Conditions du service"),s.a.createElement("ul",{className:"mt-2 text-sm text-gray-600 space-y-1.5"},s.a.createElement("li",{className:"flex items-start"},s.a.createElement("span",{className:"flex-shrink-0 h-5 w-5 text-green-500"},"?"),s.a.createElement("span",{className:"ml-2"},"Transporteur v\ufffdrifi\ufffd par nos \ufffdquipes")),s.a.createElement("li",{className:"flex items-start"},s.a.createElement("span",{className:"flex-shrink-0 h-5 w-5 text-green-500"},"?"),s.a.createElement("span",{className:"ml-2"},"Suivi en temps r\ufffdel de votre transport")),s.a.createElement("li",{className:"flex items-start"},s.a.createElement("span",{className:"flex-shrink-0 h-5 w-5 text-green-500"},"?"),s.a.createElement("span",{className:"ml-2"},"Assurance de base incluse (jusqu'\ufffd 1000\ufffd)")),s.a.createElement("li",{className:"flex items-start"},s.a.createElement("span",{className:"flex-shrink-0 h-5 w-5 text-green-500"},"?"),s.a.createElement("span",{className:"ml-2"},"Support client disponible 7j/7"))))),s.a.createElement("div",{className:"mt-6 text-sm text-gray-500"},s.a.createElement("p",null,"Pour toute question ou besoin d'assistance, n'h\ufffdsitez pas \ufffd contacter notre service client au 01 23 45 67 89 ou \ufffd support@pro-trans.fr.")))))};var yt=()=>{const[e,t]=Object(r.useState)([]),[a,l]=Object(r.useState)(!0),[n,c]=Object(r.useState)(null),[d,p]=Object(r.useState)(""),{user:v}=(Object(i.r)(),E());Object(r.useEffect)(()=>{(async()=>{try{l(!0);const e=await u.get("/messages/conversations");t(e.data.data),c(null)}catch(e){console.error("Erreur lors du chargement des conversations:",e),c("Erreur lors du chargement des conversations. Veuillez r\ufffdessayer."),o.toast.error("Erreur lors du chargement des conversations")}finally{l(!1)}})()},[]);const x=async()=>{try{l(!0);const e=await u.get("/messages/conversations");t(e.data.data),c(null),o.toast.success("Conversations mises \ufffd jour")}catch(e){console.error("Erreur lors du rafra\ufffdchissement des conversations:",e),o.toast.error("Erreur lors du rafra\ufffdchissement des conversations")}finally{l(!1)}},g=e.filter(e=>{const t=e.utilisateur,a=d.toLowerCase();return t.nom.toLowerCase().includes(a)||t.prenom.toLowerCase().includes(a)||e.annonce.titre.toLowerCase().includes(a)||e.dernierMessage&&e.dernierMessage.contenu.toLowerCase().includes(a)});return s.a.createElement("div",{className:"max-w-6xl mx-auto"},s.a.createElement("div",{className:"flex justify-between items-center mb-6"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Messages"),s.a.createElement(w,{variant:"outline",onClick:x,disabled:a},s.a.createElement(Qe.a,{className:"h-5 w-5 mr-2"}),"Actualiser")),s.a.createElement("div",{className:"mb-6"},s.a.createElement("div",{className:"relative"},s.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s.a.createElement(b.a,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})),s.a.createElement("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm",placeholder:"Rechercher dans les conversations...",value:d,onChange:e=>p(e.target.value)}))),a&&0===e.length?s.a.createElement("div",{className:"flex justify-center items-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})):n?s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-500 mr-2"}),s.a.createElement("div",null,s.a.createElement("p",{className:"text-red-700"},n),s.a.createElement(w,{variant:"outline",size:"sm",className:"mt-2",onClick:x},"R\ufffdessayer")))):0===e.length?s.a.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center"},s.a.createElement(we.a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Aucune conversation"),s.a.createElement("p",{className:"mt-2 text-gray-500"},"Vous n'avez pas encore de conversations. Parcourez les annonces pour contacter un utilisateur."),s.a.createElement(w,{to:"client"===v.role?"/dashboard/annonces/create":"/annonces",variant:"primary",className:"mt-4"},"client"===v.role?"Cr\ufffder une annonce":"Parcourir les annonces")):0===g.length?s.a.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center"},s.a.createElement(b.a,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Aucun r\ufffdsultat"),s.a.createElement("p",{className:"mt-2 text-gray-500"},"Aucune conversation ne correspond \ufffd votre recherche."),s.a.createElement(w,{variant:"outline",className:"mt-4",onClick:()=>p("")},"Effacer la recherche")):s.a.createElement("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden"},s.a.createElement("ul",{className:"divide-y divide-gray-200"},g.map(e=>{const t=e.utilisateur,a=`${e.annonce._id}_${t._id}`;return s.a.createElement("li",{key:a},s.a.createElement(m.b,{to:"/dashboard/messages/"+a,className:"block hover:bg-gray-50 transition duration-150 ease-in-out"},s.a.createElement("div",{className:"px-6 py-4 flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 relative"},t.photo?s.a.createElement("img",{src:t.photo,alt:`${t.prenom} ${t.nom}`,className:"h-12 w-12 rounded-full object-cover"}):s.a.createElement("div",{className:"h-12 w-12 rounded-full bg-teal-500 flex items-center justify-center"},s.a.createElement(Ne.a,{className:"h-6 w-6 text-white"})),e.nonLus>0&&s.a.createElement("div",{className:"absolute -top-1 -right-1 bg-red-500 rounded-full h-5 w-5 flex items-center justify-center"},s.a.createElement("span",{className:"text-xs text-white font-medium"},e.nonLus>9?"9+":e.nonLus))),s.a.createElement("div",{className:"ml-4 flex-1 min-w-0"},s.a.createElement("div",{className:"flex justify-between items-start"},s.a.createElement("div",null,s.a.createElement("h3",{className:"text-base font-medium text-gray-900 truncate"},t.prenom," ",t.nom),s.a.createElement("p",{className:"text-sm text-gray-500 mt-1 flex items-center"},s.a.createElement(h.a,{className:"h-4 w-4 mr-1 flex-shrink-0"}),s.a.createElement("span",{className:"truncate"},e.annonce.titre))),s.a.createElement("div",{className:"flex flex-col items-end"},s.a.createElement("span",{className:"text-xs text-gray-500"},e.dernierMessage?(e=>{const t=new Date(e),a=new Date,r=Math.abs(a-t),s=Math.floor(r/864e5),l=Math.floor(r/36e5),n=Math.floor(r/6e4);return s>0?1===s?"Hier":`Il y a ${s} jours`:l>0?`Il y a ${l} heure${l>1?"s":""}`:n>0?`Il y a ${n} minute${n>1?"s":""}`:"A l'instant"})(e.dernierMessage.date):""),e.dernierMessage&&e.dernierMessage.expediteur===v.id&&s.a.createElement("div",{className:"flex items-center mt-1 text-xs text-gray-500"},s.a.createElement("span",{className:"mr-1"},e.dernierMessage.lu?"Lu":"Envoy\ufffd"),e.dernierMessage.lu?s.a.createElement(V.a,{className:"h-4 w-4 text-green-500"}):s.a.createElement(q.a,{className:"h-4 w-4 text-gray-400"})))),e.dernierMessage&&s.a.createElement("p",{className:`mt-2 text-sm ${e.nonLus>0?"text-gray-900 font-medium":"text-gray-500"} truncate`},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length>t?e.substring(0,t)+"...":e:""}(e.dernierMessage.contenu))),s.a.createElement(J.a,{className:"h-5 w-5 text-gray-400 ml-2"}))))}))))};var Nt=()=>{const{conversationId:e}=Object(i.t)(),[t,a]=Object(r.useState)(null),[l,n]=Object(r.useState)(!0),[c,d]=Object(r.useState)(null),p=null===e||void 0===e?void 0:e.split("_")[0],v=null===e||void 0===e?void 0:e.split("_")[1];return Object(r.useEffect)(()=>{(async()=>{if(p)try{n(!0);const e=await u.get("/annonces/"+p);a(e.data.data),d(null)}catch(e){console.error("Erreur lors du chargement des d\ufffdtails de l'annonce:",e),d("Erreur lors du chargement des d\ufffdtails de l'annonce"),o.toast.error("Erreur lors du chargement des d\ufffdtails de l'annonce")}finally{n(!1)}})()},[p]),e&&p&&v?s.a.createElement("div",{className:"max-w-6xl mx-auto"},s.a.createElement("div",{className:"mb-6"},s.a.createElement(w,{to:"/dashboard/messages",variant:"outline"},s.a.createElement(be.a,{className:"h-5 w-5 mr-2"}),"Retour aux conversations")),l?s.a.createElement("div",{className:"flex justify-center items-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})):c?s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-500 mr-2"}),s.a.createElement("div",null,s.a.createElement("p",{className:"text-red-700"},c)))):s.a.createElement("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden"},t&&s.a.createElement("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200"},s.a.createElement("div",{className:"flex items-center justify-between"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(h.a,{className:"h-6 w-6 text-gray-400 mr-2"}),s.a.createElement("div",null,s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},t.titre),s.a.createElement("p",{className:"text-sm text-gray-500"},t.villeDepart," ? ",t.villeArrivee))),s.a.createElement(m.b,{to:"/dashboard/annonces/"+p,className:"text-sm font-medium text-teal-600 hover:text-teal-500"},"Voir l'annonce"))),s.a.createElement("div",{className:"h-[calc(80vh-100px)]"},s.a.createElement(it,{annonceId:p,recipientId:v})))):s.a.createElement("div",{className:"max-w-6xl mx-auto"},s.a.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4"},s.a.createElement("div",{className:"flex"},s.a.createElement(_.a,{className:"h-6 w-6 text-red-500 mr-2"}),s.a.createElement("div",null,s.a.createElement("p",{className:"text-red-700"},"Conversation non valide ou introuvable"),s.a.createElement(w,{to:"/dashboard/messages",variant:"outline",size:"sm",className:"mt-2"},"Retour aux messages")))))};var wt={createAvis:async e=>{try{return(await u.post("/avis",e)).data}catch(a){var t;throw(null===(t=a.response)||void 0===t?void 0:t.data)||{message:"Erreur lors de la cr\xe9ation de l'avis"}}},getAvisUtilisateur:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{return(await u.get("/avis/utilisateur/"+e,{params:{page:t,limit:a}})).data}catch(s){var r;throw(null===(r=s.response)||void 0===r?void 0:r.data)||{message:"Erreur lors de la r\xe9cup\xe9ration des avis"}}},getAvisDonnes:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return(await u.get("/avis/donnes",{params:{page:e,limit:t}})).data}catch(r){var a;throw(null===(a=r.response)||void 0===a?void 0:a.data)||{message:"Erreur lors de la r\xe9cup\xe9ration des avis donn\xe9s"}}},getAvisRecus:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return(await u.get("/avis/recus",{params:{page:e,limit:t}})).data}catch(r){var a;throw(null===(a=r.response)||void 0===a?void 0:a.data)||{message:"Erreur lors de la r\xe9cup\xe9ration des avis re\xe7us"}}}};var jt=()=>{const{user:e}=E(),[t,a]=Object(r.useState)("recus"),[l,n]=Object(r.useState)([]),[c,i]=Object(r.useState)(!0),[d,u]=Object(r.useState)(null),[p,v]=Object(r.useState)(1),[x,g]=Object(r.useState)(1),[h,b]=Object(r.useState)(0);Object(r.useEffect)(()=>{(async()=>{try{let e;i(!0),e="recus"===t?await wt.getAvisRecus(p,10):await wt.getAvisDonnes(p,10),n(e.data.data),g(e.data.pages),b(e.data.total),u(null)}catch(e){console.error("Erreur lors du chargement des avis:",e),u("Impossible de charger les avis"),o.toast.error("Erreur lors du chargement des avis")}finally{i(!1)}})()},[t,p]);const f=e=>{a(e),v(1)};return s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"md:flex md:items-center md:justify-between mb-6"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl"},"Mes avis"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"G\ufffdrez les avis que vous avez re\ufffdus et donn\ufffds")),s.a.createElement("div",{className:"mt-4 flex md:mt-0 md:ml-4"},s.a.createElement(w,{variant:"outline",onClick:()=>{v(1);(async()=>{try{let e;i(!0),e="recus"===t?await wt.getAvisRecus(1,10):await wt.getAvisDonnes(1,10),n(e.data.data),g(e.data.pages),b(e.data.total),u(null),o.toast.success("Avis actualis\ufffds")}catch(e){console.error("Erreur lors du chargement des avis:",e),u("Impossible de charger les avis"),o.toast.error("Erreur lors du chargement des avis")}finally{i(!1)}})()}},s.a.createElement(Qe.a,{className:"h-5 w-5 mr-1"}),"Actualiser"))),s.a.createElement("div",{className:"border-b border-gray-200 mb-6"},s.a.createElement("nav",{className:"flex -mb-px"},s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("recus"===t?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>f("recus")},"Avis re\ufffdus"),s.a.createElement("button",{className:"mr-8 py-4 px-1 border-b-2 font-medium text-sm "+("donnes"===t?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>f("donnes")},"Avis donn\ufffds"))),s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"recus"===t?"Avis re\ufffdus":"Avis donn\ufffds"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"recus"===t?`Avis laiss\ufffds par vos clients (${h})`:`Avis que vous avez laiss\ufffds aux transporteurs (${h})`)),c?s.a.createElement("div",{className:"px-4 py-12 text-center"},s.a.createElement("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-teal-500"}),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Chargement des avis...")):d?s.a.createElement("div",{className:"px-4 py-6 text-center"},s.a.createElement(we.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"Erreur"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},d),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>{v(1);(async()=>{try{let e;i(!0),e="recus"===t?await wt.getAvisRecus(1,10):await wt.getAvisDonnes(1,10),n(e.data.data),g(e.data.pages),b(e.data.total),u(null)}catch(e){console.error("Erreur lors du chargement des avis:",e),u("Impossible de charger les avis"),o.toast.error("Erreur lors du chargement des avis")}finally{i(!1)}})()}},"R\ufffdessayer"))):0===l.length?s.a.createElement("div",{className:"px-4 py-12 text-center"},s.a.createElement(we.a,{className:"mx-auto h-12 w-12 text-gray-400"}),s.a.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"Aucun avis"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"recus"===t?"Vous n'avez pas encore re\ufffdu d'avis":"Vous n'avez pas encore donn\ufffd d'avis")):s.a.createElement("ul",{className:"divide-y divide-gray-200"},l.map(e=>s.a.createElement("li",{key:e._id,className:"px-4 py-4 sm:px-6"},s.a.createElement("div",{className:"flex items-start"},s.a.createElement("div",{className:"flex-shrink-0 pt-1"},"recus"===t?s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden"},e.auteur.photo?s.a.createElement("img",{src:e.auteur.photo,alt:`${e.auteur.prenom} ${e.auteur.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(De.a,{className:"h-6 w-6 text-gray-400"})):s.a.createElement("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden"},e.destinataire.photo?s.a.createElement("img",{src:e.destinataire.photo,alt:`${e.destinataire.prenom} ${e.destinataire.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(De.a,{className:"h-6 w-6 text-gray-400"}))),s.a.createElement("div",{className:"ml-4 flex-1"},s.a.createElement("div",{className:"flex justify-between"},s.a.createElement("div",null,s.a.createElement("h4",{className:"text-sm font-medium text-gray-900"},"recus"===t?`${e.auteur.prenom} ${e.auteur.nom}`:`${e.destinataire.prenom} ${e.destinataire.nom}`),s.a.createElement("div",{className:"mt-1 flex items-center"},s.a.createElement(Oe,{rating:e.note,size:"sm"}))),s.a.createElement("p",{className:"text-sm text-gray-500"},et(e.createdAt,"dd MMM yyyy"))),s.a.createElement("p",{className:"mt-2 text-sm text-gray-600"},e.commentaire),s.a.createElement("div",{className:"mt-2 text-sm"},(e=>e.annonce?s.a.createElement(m.b,{to:"/dashboard/annonces/"+e.annonce._id,className:"inline-flex items-center text-sm text-teal-600 hover:text-teal-800"},"Voir l'annonce"):s.a.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},"Annonce supprim\ufffde"))(e))))))),!c&&!d&&x>1&&s.a.createElement("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},s.a.createElement("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},s.a.createElement("div",null,s.a.createElement("p",{className:"text-sm text-gray-700"},"Affichage de la page ",s.a.createElement("span",{className:"font-medium"},p)," sur ",s.a.createElement("span",{className:"font-medium"},x))),s.a.createElement("div",null,s.a.createElement("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},s.a.createElement("button",{onClick:()=>v(e=>Math.max(e-1,1)),disabled:1===p,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium "+(1===p?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50")},s.a.createElement("span",{className:"sr-only"},"Pr\ufffdc\ufffddent"),s.a.createElement(U.a,{className:"h-5 w-5","aria-hidden":"true"})),[...Array(x)].map((e,t)=>{const a=t+1;return 1===a||a===x||a>=p-1&&a<=p+1?s.a.createElement("button",{key:a,onClick:()=>v(a),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium "+(p===a?"z-10 bg-teal-50 border-teal-500 text-teal-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50")},a):2===a&&p>3||a===x-1&&p<x-2?s.a.createElement("span",{key:a,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},"..."):null}),s.a.createElement("button",{onClick:()=>v(e=>Math.min(e+1,x)),disabled:p===x,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium "+(p===x?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50")},s.a.createElement("span",{className:"sr-only"},"Suivant"),s.a.createElement(J.a,{className:"h-5 w-5","aria-hidden":"true"}))))))),s.a.createElement("div",{className:"mt-8 bg-blue-50 rounded-lg p-6"},s.a.createElement("h3",{className:"text-lg font-medium text-blue-800 mb-3"},"Importance des avis pour votre r\ufffdputation"),s.a.createElement("p",{className:"text-blue-700 mb-4"},"Les avis sont essentiels pour \ufffdtablir votre r\ufffdputation sur Pro-Trans. Ils aident les nouveaux clients \ufffd faire confiance \ufffd vos services et \ufffd prendre une d\ufffdcision \ufffdclair\ufffde."),s.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},s.a.createElement("div",{className:"bg-white p-4 rounded-md shadow-sm"},s.a.createElement("h4",{className:"font-medium text-blue-800 mb-2"},"Comment am\ufffdliorer vos avis ?"),s.a.createElement("ul",{className:"list-disc pl-5 text-sm text-blue-700 space-y-1"},s.a.createElement("li",null,"Communiquez clairement avec vos clients"),s.a.createElement("li",null,"Respectez les d\ufffdlais convenus"),s.a.createElement("li",null,"Soyez professionnel et courtois"),s.a.createElement("li",null,"Prenez soin des marchandises transport\ufffdes"),s.a.createElement("li",null,"R\ufffdsolvez rapidement les probl\ufffdmes \ufffdventuels"))),s.a.createElement("div",{className:"bg-white p-4 rounded-md shadow-sm"},s.a.createElement("h4",{className:"font-medium text-blue-800 mb-2"},"Que faire en cas d'avis n\ufffdgatif ?"),s.a.createElement("ul",{className:"list-disc pl-5 text-sm text-blue-700 space-y-1"},s.a.createElement("li",null,"Ne r\ufffdagissez pas \ufffd chaud"),s.a.createElement("li",null,"Contactez le client pour comprendre son insatisfaction"),s.a.createElement("li",null,"Proposez une solution concr\ufffdte au probl\ufffdme signal\ufffd"),s.a.createElement("li",null,"Apprenez de cette exp\ufffdrience pour l'avenir"),s.a.createElement("li",null,"Contactez notre service client si vous estimez l'avis injustifi\ufffd"))))))};var Ct=()=>{const{userId:e,annonceId:t}=Object(i.t)(),{user:a}=E(),l=Object(i.r)(),[n,m]=Object(r.useState)(!1),[c,d]=Object(r.useState)(null),[p,v]=Object(r.useState)(null),[x,g]=Object(r.useState)(null),[b,f]=Object(r.useState)(!0),y=P.d({note:P.c().required("La note est obligatoire").min(1,"La note minimale est 1").max(5,"La note maximale est 5"),commentaire:P.f().required("Le commentaire est obligatoire").min(10,"Le commentaire doit comporter au moins 10 caract\ufffdres").max(500,"Le commentaire ne doit pas d\ufffdpasser 500 caract\ufffdres")}),N=Object(T.a)({initialValues:{note:5,commentaire:""},validationSchema:y,onSubmit:async a=>{try{m(!0);const r={note:a.note,commentaire:a.commentaire,destinataireId:e,annonceId:t};await wt.createAvis(r),o.toast.success("Votre avis a \ufffdt\ufffd publi\ufffd avec succ\ufffds"),l("/dashboard/avis")}catch(x){console.error("Erreur lors de la cr\ufffdation de l'avis:",x),o.toast.error(x.message||"Erreur lors de la publication de l'avis")}finally{m(!1)}}});return Object(r.useEffect)(()=>{(async()=>{try{f(!0);const a=await u.get("/users/profile/"+e);if(d(a.data.data),t){const e=await u.get("/annonces/"+t);v(e.data.data)}}catch(a){console.error("Erreur lors du chargement des donn\ufffdes:",a),g("Impossible de charger les informations n\ufffdcessaires")}finally{f(!1)}})()},[e,t]),b?s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"flex items-center justify-center h-64"},s.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"}))):x||!c?s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("div",{className:"text-center"},s.a.createElement("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})),s.a.createElement("h3",{className:"mt-2 text-lg font-medium text-gray-900"},"Erreur"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},x||"Impossible de charger les informations n\ufffdcessaires"),s.a.createElement("div",{className:"mt-6"},s.a.createElement(w,{to:"/dashboard/avis",variant:"primary"},"Retour aux avis")))))):s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},s.a.createElement("div",{className:"md:flex md:items-center md:justify-between mb-6"},s.a.createElement("div",{className:"flex-1 min-w-0"},s.a.createElement("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl"},"Publier un avis"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Partagez votre exp\ufffdrience avec ce ","transporteur"===c.role?"transporteur":"client")),s.a.createElement("div",{className:"mt-4 flex md:mt-0 md:ml-4"},s.a.createElement(w,{to:"/dashboard/avis",variant:"outline"},"Annuler"))),s.a.createElement("div",{className:"grid grid-cols-1 gap-x-4 gap-y-8 md:grid-cols-3"},s.a.createElement("div",{className:"md:col-span-1"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"transporteur"===c.role?"Transporteur":"Client"),s.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Informations sur la personne que vous \ufffdvaluez")),s.a.createElement("div",{className:"border-t border-gray-200"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",{className:"flex-shrink-0 h-16 w-16 rounded-full overflow-hidden bg-gray-200"},c.photo?s.a.createElement("img",{src:c.photo,alt:`${c.prenom} ${c.nom}`,className:"h-full w-full object-cover"}):s.a.createElement(Ne.a,{className:"h-8 w-8 text-gray-400 m-4"})),s.a.createElement("div",{className:"ml-4"},s.a.createElement("h3",{className:"text-lg font-medium text-gray-900"},c.prenom," ",c.nom),s.a.createElement("p",{className:"text-sm text-gray-500"},"Membre depuis ",et(c.createdAt,"MMMM yyyy"))))))),p&&s.a.createElement("div",{className:"mt-8 bg-white shadow overflow-hidden rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"D\ufffdtails de l'annonce")),s.a.createElement("div",{className:"border-t border-gray-200"},s.a.createElement("div",{className:"px-4 py-5 sm:px-6"},s.a.createElement("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"},s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Titre"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},p.titre)),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(h.a,{className:"h-4 w-4 mr-1 text-gray-400"}),"Type"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900 capitalize"},p.typeTransport)),s.a.createElement("div",{className:"sm:col-span-1"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500 flex items-center"},s.a.createElement(B.a,{className:"h-4 w-4 mr-1 text-gray-400"}),"Trajet"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},p.villeDepart," ? ",p.villeArrivee)),s.a.createElement("div",{className:"sm:col-span-2"},s.a.createElement("dt",{className:"text-sm font-medium text-gray-500"},"Date"),s.a.createElement("dd",{className:"mt-1 text-sm text-gray-900"},et(p.dateDepart)))))))),s.a.createElement("div",{className:"md:col-span-2"},s.a.createElement("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},s.a.createElement("div",{className:"px-4 py-5 sm:p-6"},s.a.createElement("form",{onSubmit:N.handleSubmit},s.a.createElement("div",{className:"mb-6"},s.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Note"),s.a.createElement("div",{className:"flex items-center"},[1,2,3,4,5].map(e=>s.a.createElement("button",{key:e,type:"button",className:"p-1 focus:outline-none",onClick:()=>N.setFieldValue("note",e)},s.a.createElement(De.a,{className:"h-8 w-8 "+(N.values.note>=e?"text-yellow-400 fill-current":"text-gray-300")}))),s.a.createElement("span",{className:"ml-2 text-sm text-gray-500"},N.values.note," sur 5")),N.touched.note&&N.errors.note&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},N.errors.note)),s.a.createElement("div",{className:"mb-6"},s.a.createElement("label",{htmlFor:"commentaire",className:"block text-sm font-medium text-gray-700 mb-1"},"Votre commentaire"),s.a.createElement("textarea",{id:"commentaire",name:"commentaire",rows:6,className:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Partagez votre exp\ufffdrience...",value:N.values.commentaire,onChange:N.handleChange,onBlur:N.handleBlur}),s.a.createElement("p",{className:"mt-2 text-sm text-gray-500"},N.values.commentaire.length,"/500 caract\ufffdres"),N.touched.commentaire&&N.errors.commentaire&&s.a.createElement("p",{className:"mt-2 text-sm text-red-600"},N.errors.commentaire)),s.a.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 -mx-6 -mb-6 flex justify-end"},s.a.createElement(w,{type:"button",variant:"outline",onClick:()=>l("/dashboard/avis"),className:"mr-3"},"Annuler"),s.a.createElement(w,{type:"submit",variant:"primary",isLoading:n,disabled:n},"Publier l'avis"))))),s.a.createElement("div",{className:"mt-8 bg-blue-50 rounded-lg p-6"},s.a.createElement("h3",{className:"text-lg font-medium text-blue-800 mb-3"},"Conseils pour r\ufffddiger un avis utile"),s.a.createElement("ul",{className:"list-disc pl-5 text-blue-700 space-y-2"},s.a.createElement("li",null,"Soyez honn\ufffdte et objectif dans votre \ufffdvaluation"),s.a.createElement("li",null,"D\ufffdtaillez les aspects positifs et n\ufffdgatifs de votre exp\ufffdrience"),s.a.createElement("li",null,"Mentionnez les \ufffdl\ufffdments sp\ufffdcifiques qui vous ont marqu\ufffd (ponctualit\ufffd, communication, \ufffdtat des marchandises \ufffd l'arriv\ufffde...)"),s.a.createElement("li",null,'Evitez les commentaires trop g\ufffdn\ufffdraux comme "Tr\ufffds bien" ou "Mauvais service"'),s.a.createElement("li",null,"Restez respectueux, m\ufffdme en cas d'exp\ufffdrience n\ufffdgative")),s.a.createElement("p",{className:"mt-4 text-sm text-blue-800"},"Vos avis aident les autres utilisateurs \ufffd prendre des d\ufffdcisions \ufffdclair\ufffdes et permettent aux transporteurs d'am\ufffdliorer leurs services.")))))};const kt={public:[{path:"/",element:s.a.createElement(j,null),exact:!0},{path:"/a-propos",element:s.a.createElement(S,null),exact:!0},{path:"/faq",element:s.a.createElement(M,null),exact:!0},{path:"/contact",element:s.a.createElement(R,null),exact:!0},{path:"/annonces",element:s.a.createElement(he,null),exact:!0},{path:"/annonces/:id",element:s.a.createElement(Ce,null),exact:!0},{path:"/transporteurs",element:s.a.createElement(Se,null),exact:!0},{path:"/transporteurs/:id",element:s.a.createElement(Te,null),exact:!0}],auth:[{path:"/login",element:s.a.createElement(ze,null),exact:!0},{path:"/register",element:s.a.createElement(qe,null),exact:!0},{path:"/forgot-password",element:s.a.createElement(Be,null),exact:!0},{path:"/reset-password/:token",element:s.a.createElement(Ve,null),exact:!0},{path:"/verify-email/:token",element:s.a.createElement(Fe,null),exact:!0}],protected:[{path:"/dashboard",element:s.a.createElement(_e,null),roles:["client","transporteur","admin"],exact:!0},{path:"/profile",element:s.a.createElement(Je,null),roles:["client","transporteur","admin"],exact:!0},{path:"/profile/edit",element:s.a.createElement(He,null),roles:["client","transporteur","admin"],exact:!0},{path:"/dashboard/annonces",element:s.a.createElement(tt,null),roles:["client"],exact:!0},{path:"/dashboard/annonces/create",element:s.a.createElement(rt,null),roles:["client"],exact:!0},{path:"/dashboard/annonces/:id",element:s.a.createElement(dt,null),roles:["client","transporteur"],exact:!0},{path:"/dashboard/annonces/:id/edit",element:s.a.createElement(lt,null),roles:["client"],exact:!0},{path:"/dashboard/devis",element:s.a.createElement(ut,null),roles:["client","transporteur"],exact:!0},{path:"/dashboard/devis/create/:annonceId",element:s.a.createElement(vt,null),roles:["transporteur"],exact:!0},{path:"/dashboard/devis/:id",element:s.a.createElement(ft,null),roles:["client","transporteur"],exact:!0},{path:"/dashboard/messages",element:s.a.createElement(yt,null),roles:["client","transporteur"],exact:!0},{path:"/dashboard/messages/:conversationId",element:s.a.createElement(Nt,null),roles:["client","transporteur"],exact:!0},{path:"/dashboard/avis",element:s.a.createElement(jt,null),roles:["client","transporteur"],exact:!0},{path:"/dashboard/avis/create/:userId/:annonceId",element:s.a.createElement(Ct,null),roles:["client","transporteur"],exact:!0}]};var Dt=()=>s.a.createElement("header",{className:"bg-white shadow"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"flex justify-between h-16"},s.a.createElement("div",{className:"flex"},s.a.createElement(m.b,{to:"/",className:"flex-shrink-0 flex items-center"},s.a.createElement("span",{className:"font-bold text-xl text-teal-600"},"Pro-Trans"))),s.a.createElement("div",{className:"flex items-center"},s.a.createElement(m.b,{to:"/login",className:"mr-4 text-gray-600 hover:text-teal-600"},"Connexion"),s.a.createElement(m.b,{to:"/register",className:"bg-teal-600 text-white px-4 py-2 rounded-md"},"Inscription")))));var St=()=>s.a.createElement("footer",{className:"bg-gray-800 text-white py-8"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"flex flex-col md:flex-row justify-between"},s.a.createElement("div",{className:"mb-4 md:mb-0"},s.a.createElement("h2",{className:"text-xl font-bold"},"Pro-Trans"),s.a.createElement("p",{className:"mt-2 text-gray-300"},"Transport et livraison")),s.a.createElement("div",null,s.a.createElement("h3",{className:"text-lg font-semibold mb-2"},"Liens rapides"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(m.b,{to:"/",className:"text-gray-300 hover:text-white"},"Accueil")),s.a.createElement("li",null,s.a.createElement(m.b,{to:"/a-propos",className:"text-gray-300 hover:text-white"},"\xc0 propos")),s.a.createElement("li",null,s.a.createElement(m.b,{to:"/contact",className:"text-gray-300 hover:text-white"},"Contact"))))),s.a.createElement("div",{className:"mt-8 border-t border-gray-700 pt-4 text-center text-gray-300"},s.a.createElement("p",null,"\xa9 ",(new Date).getFullYear()," Pro-Trans. Tous droits r\xe9serv\xe9s."))));var At=()=>s.a.createElement("div",{className:"flex flex-col min-h-screen"},s.a.createElement(Dt,null),s.a.createElement("main",{className:"flex-grow"},s.a.createElement(i.b,null)),s.a.createElement(St,null));var Ot=()=>{const{isAuthenticated:e}=E();return s.a.createElement("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},s.a.createElement("div",{className:"sm:mx-auto sm:w-full sm:max-w-md"},s.a.createElement(m.b,{to:"/"},s.a.createElement("img",{className:"mx-auto h-16 w-auto",src:"/assets/images/logo.png",alt:"Pro-Trans Logo"})),s.a.createElement("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900"},s.a.createElement(i.b,{context:[e]}))),s.a.createElement("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},s.a.createElement("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},s.a.createElement(i.b,null))),s.a.createElement("div",{className:"mt-8 text-center text-sm text-gray-600"},s.a.createElement(m.b,{to:"/",className:"font-medium text-teal-600 hover:text-teal-500"},"Retour \xe0 l'accueil")))},Lt=a(227),Mt=a(228),Tt=a(229);var Pt=()=>{const{user:e,logout:t}=E(),a=Object(i.r)(),[l,n]=Object(r.useState)(!1),c=()=>{t(),a("/login")},o=[{name:"Tableau de bord",href:"/dashboard",icon:Lt.a,roles:["client","transporteur","admin"]},{name:"Profil",href:"/profile",icon:Ne.a,roles:["client","transporteur","admin"]},{name:"Mes Annonces",href:"/dashboard/annonces",icon:Re.a,roles:["client"]},{name:"Rechercher des annonces",href:"/annonces",icon:Re.a,roles:["transporteur"]},{name:"Mes Devis",href:"/dashboard/devis",icon:h.a,roles:["client","transporteur"]},{name:"Messages",href:"/dashboard/messages",icon:we.a,roles:["client","transporteur"]},{name:"Avis",href:"/dashboard/avis",icon:De.a,roles:["client","transporteur"]}].filter(t=>t.roles.includes(null===e||void 0===e?void 0:e.role));return s.a.createElement("div",{className:"h-screen flex overflow-hidden bg-gray-100"},s.a.createElement("div",{className:""+(l?"fixed inset-0 flex z-40 md:hidden":"hidden")},s.a.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>n(!1)}),s.a.createElement("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white"},s.a.createElement("div",{className:"absolute top-0 right-0 -mr-12 pt-2"},s.a.createElement("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>n(!1)},s.a.createElement("span",{className:"sr-only"},"Fermer la sidebar"),s.a.createElement(ve.a,{className:"h-6 w-6 text-white","aria-hidden":"true"}))),s.a.createElement("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto"},s.a.createElement("div",{className:"flex-shrink-0 flex items-center px-4"},s.a.createElement("img",{className:"h-8 w-auto",src:"/assets/images/logo.png",alt:"Pro-Trans Logo"})),s.a.createElement("nav",{className:"mt-5 px-2 space-y-1"},o.map(e=>s.a.createElement(m.b,{key:e.name,to:e.href,className:"group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900",onClick:()=>n(!1)},s.a.createElement(e.icon,{className:"mr-4 h-6 w-6 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),e.name)),s.a.createElement("button",{onClick:c,className:"w-full group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"},s.a.createElement(Mt.a,{className:"mr-4 h-6 w-6 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),"D\xe9connexion"))),s.a.createElement("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4"},s.a.createElement("div",{className:"flex-shrink-0 group block"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",null,s.a.createElement("img",{className:"inline-block h-10 w-10 rounded-full",src:(null===e||void 0===e?void 0:e.photo)||"/assets/images/default-avatar.png",alt:null===e||void 0===e?void 0:e.nom})),s.a.createElement("div",{className:"ml-3"},s.a.createElement("p",{className:"text-base font-medium text-gray-700 group-hover:text-gray-900"},null===e||void 0===e?void 0:e.nom," ",null===e||void 0===e?void 0:e.prenom),s.a.createElement("p",{className:"text-sm font-medium text-gray-500 group-hover:text-gray-700"},"client"===(null===e||void 0===e?void 0:e.role)?"Client":"Transporteur"))))))),s.a.createElement("div",{className:"hidden md:flex md:flex-shrink-0"},s.a.createElement("div",{className:"flex flex-col w-64"},s.a.createElement("div",{className:"flex flex-col h-0 flex-1 border-r border-gray-200 bg-white"},s.a.createElement("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto"},s.a.createElement("div",{className:"flex items-center flex-shrink-0 px-4"},s.a.createElement("img",{className:"h-8 w-auto",src:"/assets/images/logo.png",alt:"Pro-Trans Logo"})),s.a.createElement("nav",{className:"mt-5 flex-1 px-2 bg-white space-y-1"},o.map(e=>s.a.createElement(m.b,{key:e.name,to:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"},s.a.createElement(e.icon,{className:"mr-3 h-6 w-6 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),e.name)),s.a.createElement("button",{onClick:c,className:"w-full group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"},s.a.createElement(Mt.a,{className:"mr-3 h-6 w-6 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),"D\xe9connexion"))),s.a.createElement("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4"},s.a.createElement(m.b,{to:"/profile",className:"flex-shrink-0 w-full group block"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement("div",null,s.a.createElement("img",{className:"inline-block h-9 w-9 rounded-full",src:(null===e||void 0===e?void 0:e.photo)||"/assets/images/default-avatar.png",alt:null===e||void 0===e?void 0:e.nom})),s.a.createElement("div",{className:"ml-3"},s.a.createElement("p",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900"},null===e||void 0===e?void 0:e.nom," ",null===e||void 0===e?void 0:e.prenom),s.a.createElement("p",{className:"text-xs font-medium text-gray-500 group-hover:text-gray-700"},"client"===(null===e||void 0===e?void 0:e.role)?"Client":"Transporteur")))))))),s.a.createElement("div",{className:"flex flex-col w-0 flex-1 overflow-hidden"},s.a.createElement("div",{className:"md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3"},s.a.createElement("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-teal-500",onClick:()=>n(!0)},s.a.createElement("span",{className:"sr-only"},"Ouvrir la sidebar"),s.a.createElement(Tt.a,{className:"h-6 w-6","aria-hidden":"true"}))),s.a.createElement("main",{className:"flex-1 relative z-0 overflow-y-auto focus:outline-none"},s.a.createElement("div",{className:"py-6"},s.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8"},s.a.createElement(i.b,null))))))};var zt=e=>{let{isAuthenticated:t,roles:a=[],userRole:r,children:l}=e;const n=Object(i.p)();return t?a.length>0&&!a.includes(r)?s.a.createElement(i.a,{to:"/dashboard",state:{accessDenied:!0,message:"Vous n'avez pas les permissions n\xe9cessaires pour acc\xe9der \xe0 cette page."},replace:!0}):l:s.a.createElement(i.a,{to:"/login",state:{from:n.pathname},replace:!0})};var qt=()=>s.a.createElement("div",null,s.a.createElement("h1",null,"NotFound"),s.a.createElement("p",null,"Cette page est en cours de d\ufffdveloppement."));var Bt=function(){const{isAuthenticated:e,user:t,loading:a}=E(),l=Object(i.r)(),n=Object(i.p)();return Object(r.useEffect)(()=>{a||!e||"/login"!==n.pathname&&"/register"!==n.pathname&&"/"!==n.pathname||l("/dashboard")},[e,a,l,n.pathname]),a?s.a.createElement("div",{className:"flex h-screen items-center justify-center"},s.a.createElement("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-teal-600"})):s.a.createElement(i.e,null,s.a.createElement(i.c,{element:s.a.createElement(At,null)},kt.public.map(e=>s.a.createElement(i.c,{key:e.path,path:e.path,element:e.element,exact:e.exact}))),s.a.createElement(i.c,{element:s.a.createElement(Ot,null)},kt.auth.map(e=>s.a.createElement(i.c,{key:e.path,path:e.path,element:e.element,exact:e.exact}))),s.a.createElement(i.c,{element:s.a.createElement(Pt,null)},kt.protected.map(a=>s.a.createElement(i.c,{key:a.path,path:a.path,element:s.a.createElement(zt,{isAuthenticated:e,roles:a.roles,userRole:null===t||void 0===t?void 0:t.role},a.element),exact:a.exact}))),s.a.createElement(i.c,{path:"*",element:s.a.createElement(qt,null)}))};a(169);const Vt=new c.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e4}}});n.a.createRoot(document.getElementById("root")).render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(c.QueryClientProvider,{client:Vt},s.a.createElement(m.a,null,s.a.createElement(g,null,s.a.createElement(Bt,null),s.a.createElement(o.Toaster,{position:"top-right",toastOptions:{duration:5e3,style:{background:"#363636",color:"#fff"}}}))))))}},[[114,1,2]]]);
//# sourceMappingURL=main.2ff8b00c.chunk.js.map